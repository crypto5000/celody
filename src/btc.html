<!DOCTYPE html>
<html lang="en">

<head>
        
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Celody uses cryptocurrency to make music. With Celody, a group of remote people can collaborate on a song and then distribute the song inside a market.">
    <meta name="author" content="Celody">
    
    <title>Celody: Make Music with Bitcoin</title>

    <!-- Bootstrap Core CSS -->
    <link href="https://celody.com/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="https://celody.com/css/landing-page.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="https://celody.com/css/portfolio-item.css" rel="stylesheet">
	<link href="https://celody.com/css/modern-business.css" rel="stylesheet">
    <link href="https://celody.com/css/2-col-portfolio.css" rel="stylesheet">
    <link href="https://celody.com/css/range.css" rel="stylesheet">
	<link href="https://celody.com/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    
	<!-- JQUERY scripts to perform various tasks --> 
    <script src="https://celody.com/js/jquery.min.js"></script>	    		
    
    <link rel="icon" href="https://celody.com/img/fav.ico" />	
        
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://celody.com/index.html">Celody Song Editor: BTC</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li></li>					
                    <li></li>					
                    <li></li>					
                </ul>                
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Header -->
    <header class="intro-header">
        <div class="container">
          <div class="intro-message">                    
          </div>
        </div>
    </header>    
      
    <!-- Page Content -->
    <section class="content-section-a" style="padding-bottom:10px;" id="browse">
        
        <div class="container">                
        <div class="row text-center">

            <div class="col-lg-12" style="margin-top:-30px">                
                <h3 class="page-header">Current Song Name: <div id="songName" style="display:inline">Loading...</div><div id="songNameState" style="display:inline;font-size:10px">&nbsp;(Pending)</div>&nbsp;<i class="fa fa-edit" id="editSongName" style="color:#F9464A;font-weight:bold"></i></h3>                
                <div class="form-group row pGroup" id="saveSongName" style="display:none">                                                                    
                    <div class="col-lg-12">                                                                             
                        <p class="alert alert-info" role="alert" style="display:inline-block;">Enter some off-chain data that will sync with your BTC blockchain transaction.</p><br>                                                                
                        <label for="account">Celody Account:</label><br>                                                            
                        <input type="text" placeholder=" 27 Character Account" style="width:60%;margin: 0 auto;" class="account" id="accountSong"/><br>                                                            
                        <label for="tokenAddress" style="margin-top:4px">Your BTC Address:</label><br>                                                            
                        <input type="text" placeholder=" Public Wallet Address" style="width:60%;margin: 0 auto;" class="tokenAddress" id="tokenAddressSongName"/><br>                                                            
                        <label for="tokenAmountSongName" style="margin-top:3px">BTC Threshold Amount:</label><br>                                                            
                        <input type="text" placeholder=" At least 0.0000" style="width:60%;margin: 0 auto;" id="tokenAmountSongName"/><br>                                                                                                                        
                        <label for="songNameNew" style="margin-top:3px">New Song Name:</label><br>                                                            
                        <input type="text" placeholder=" Enter Name (Max 50 Characters)" style="width:60%;margin: 0 auto;" id="songNameNew"/><br>                                                            
                        <button type="submit" class="btn btn-primary" style="display:inline;background-color:#F9464A;margin-top:10px" id="songNameSaveNext">Finalize Song Name</button>                                                                                    
                        <img class="loadingNew" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div class="loadingTextNew" style="display:none">Please Wait. Sending.</div>                    
                        <p class="alert alert-danger" role="alert" id="errorMessageSongName" style="display:none">There was a problem saving your data. Try again later.</p>                              
                        <h6>*  <a target="_blank" rel="noopener noreferrer" href="https://celody.com/account.html">No Account?</a> Accounts are required to manage your songs.</h6>
                    </div>                                                
                </div>                                                                    
                <div class="form-group row pGroup" id="songNameSaveMessage" style="display:none">                                                                    
                    <div class="col-lg-12">                                                                             
                        <h5>To save the new name as the master version, send exactly <div class="songNameBid" style="display:inline"></div> from your BTC wallet to address:<br></h5>
                        <p class="alert alert-info" role="alert" style="display:inline-block;word-break:break-all;"><code class="songAddress" style="display:inline-block;word-break:break-all;"></code></p>                                                                
                        <p class="alert alert-danger" role="alert" style="display:inline-block;" id="songNameMemo">Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.</p>                                        
                        <h6 id="songNameScatter" style="display:none">*  <a target="_blank" rel="noopener noreferrer" href="#" id="songNameScatterLink">Got Scatter? Send Now</a></h6>
                    </div>                                                
                </div>                                                                    
                <div id="mainWaveForm">
                    <div id="mainProgress">Loading waveform... <img src="https://celody.com/img/loading.gif" alt="loading" height="20" width="20"/></div>
                </div>                                
                <h3 class="page-header">
                    <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="mainPlay"><i class="fa fa-play"></i> Play</button>                                    
                    <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="mainPause"><i class="fa fa-pause"></i> Pause</button>                                                        
                    <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="mainRestart"><i class="fa fa-backward"></i> Restart</button>                                                        
                    <i class="fa fa-download" id="downloadSong" style="color:#F9464A;font-weight:bold;margin-left:5px"></i>
                    <p class="alert alert-info" role="alert" style="display:none;margin-top:20px;font-size:12px" id="createWav">Wav File Being Created for Download. Remaining Processing Time (<span id="time">0:00</span>)</p>                                        
                    <a href="" id="downloadLink" style="display:none;font-size:12px">File Created. Click to Download.</a>                                        
                </h3>                
                <h3 class="page-header">Current Song: Individual Tracks</h3>
            </div>                
                
            <div class="col-lg-12">
                <div id="bass" style="background-color:lightgray;">
                    <div class="form-group row pGroup" id="bGroup1" style="padding-top:5px;padding-bottom:5px">                                                
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            Bass
                        </div>                                                
                        <div class="col-lg-4" style="padding-top:5px;padding-bottom:5px">                 
                            Current Track: <div id="bassCurrent" style="display:inline">Loading...</div>
                        </div>                        
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            <div id="bassState" style="display:inline">Pending</div>: <div class="bassBid" style="display:inline">Loading...</div>
                        </div>                                                
                        <div class="col-lg-2" id="bassUpload" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-upload" style="color:#F9464A;font-weight:bold"></i> Upload Track                            
                        </div>                                                
                        <div class="col-lg-2" id="editBassControl" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-edit" style="color:#F9464A;font-weight:bold"></i> Edit Track
                        </div>                                                
                    </div>                                                                    
                </div>
                <div class="form-group row pGroup" id="bassUploadMessage" style="display:none">                                                
                    <div class="col-lg-12">                                                                                                         
                        <p class="alert alert-danger" role="alert" style="display:inline-block;">This feature is currently being limited to a small number of testers. Check back soon for general availability.</p>                                        
                    </div>                                                
                </div>                                                                    
                <div id="editBass" style="display:none">
                    <div class="form-group row pGroup" id="bGroup2">                                                
                        <div class="col-lg-2">                                                     
                            <div style="padding-top:20%">Wave</div>
                        </div>                                                
                        <div class="col-lg-10">                                             
                            <div id="bassProgress" style="display:none">Loading waveform... <img src="https://celody.com/img/loading.gif" alt="loading" height="20" width="20"/></div>
                            <div id="bassWaveForm"></div>
                        </div>                                                                        
                    </div>                                                                    
                    <div class="form-group row pGroup" id="bGroup3">                                                
                        <div class="col-lg-2">                 
                            Track
                        </div>                                                
                        <div class="col-lg-10">                 
                            <select class="form-control" style="width:100%;" id="bassTrack">                    
                                <option value="bass1">Sharpness with Acid Bass</option>
                                <option value="bass2">Round and Happy Bass</option>
                                <option value="bass3">Smooth and Delicious Bass</option>                                
                                <option value="bass4">Mechanical Robot Bass</option>                                
                                <option value="bass5">Thumpy and Edgy Bass</option>                                
                                <option value="bass6">Slappy Pulsing Bass</option>                                
                                <option value="bass7">Big Bad Jazzman Bass</option>                                
                                <option value="bass8">Deep House Bass</option>                                
                                <option value="bass9">Crunchy Gulp Bass</option>                                
                                <option value="bass10">Quick Running Bass</option>                                
                            </select>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="bVolGroup">                                                
                        <div class="col-lg-2">                 
                            Volume
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary downButton" id="downBassVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">                 
                            <input type="range" min="0" max="1" step=".01" name="bassVol" id="bassVol" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary upButton" id="upBassVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="bPanGroup">                                                
                        <div class="col-lg-2">                 
                            Panning
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary downButton" id="downBassPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassPan" id="bassPan" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary upButton" id="upBassPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="bDubGroup">                                                
                        <div class="col-lg-2">                 
                            Dub Delay
                        </div>                                                                        
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                  
                            <button type="submit" class="btn btn-primary downButton" id="downBassDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassDub" id="bassDub" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary upButton" id="upBassDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="bDisGroup">                                                
                        <div class="col-lg-2">                 
                            Fuzz
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary downButton" id="downBassDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassDis" id="bassDis" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary upButton" id="upBassDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                        
                    <div class="form-group row pGroup moreBFX" id="bTreGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Tremolo
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary downButton" id="downBassTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassTre" id="bassTre" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                 
                            <button type="submit" class="btn btn-primary upButton" id="upBassTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>        
                    <div class="form-group row pGroup moreBFX" id="bFlaGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Flanger
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downBassFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassFla" id="bassFla" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upBassFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                 
                    <div class="form-group row pGroup moreBFX" id="bLowGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Low Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downBassLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassLow" id="bassLow" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upBassLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>  
                    <div class="form-group row pGroup moreBFX" id="bHigGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            High Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downBassHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassHig" id="bassHig" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upBassHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                                                                                                                                                                                                                      
                    <div class="form-group row pGroup moreBFX" id="bAttGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Attack
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downBassAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassAtt" id="bassAtt" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upBassAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                             
                    <div class="form-group row pGroup moreBFX" id="bRelGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Release
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                                <button type="submit" class="btn btn-primary downButton" id="downBassRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="bassRel" id="bassRel" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upBassRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                                        
                    </div>                                                                                                                             
                    <div class="form-group row pGroup" id="bControlGroup">          
                        <div class="col-lg-2">                                                                         
                        </div>                                                                                      
                        <div class="col-lg-10">                                             
                            Bass Only:&nbsp;
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="bassPlay"><i class="fa fa-play"></i> Play</button>                                    
                            <img src="https://celody.com/img/loading.gif" id="bassPlayLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="bassPause"><i class="fa fa-pause"></i> Pause</button>                                                                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="bassRestart"><i class="fa fa-backward"></i> Start</button>
                            <img src="https://celody.com/img/loading.gif" id="bassRestartLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <br>
                            <button type="submit" class="btn btn-primary songPlay" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-file-audio-o"></i> Song</button>                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px;" id="bassMore"><i class="fa fa-plus-square"></i> More FX</button>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px" id="bassSave"><i class="fa fa-save"></i> Save</button>                                                                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="bassSaveAccount" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <p class="alert alert-info" role="alert" style="display:inline-block;">Enter some off-chain data that will sync with your BTC blockchain transaction.</p><br>                                                                
                            <label for="account">Celody Account:</label><br>                                                            
                            <input type="text" placeholder=" 27 Character Account" style="width:60%;margin: 0 auto;" class="account" id="accountBass"/><br>                                                            
                            <label for="tokenAddress" style="margin-top:4px">Your BTC Address:</label><br>                                                            
                            <input type="text" placeholder=" Public Wallet Address" style="width:60%;margin: 0 auto;" class="tokenAddress" id="tokenAddressBass"/><br>                                                            
                            <label for="tokenAmountBass" style="margin-top:3px">BTC Threshold Amount:</label><br>                                                            
                            <input type="text" placeholder=" At least 0.0000" style="width:60%;margin: 0 auto;" id="tokenAmountBass"/><br>                                                                                                                                                
                            <button type="submit" class="btn btn-primary" style="display:inline;background-color:#F9464A;margin-top:10px" id="bassSaveNext">Finalize Bass Track</button>                                                                                    
                            <img class="loadingNew" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div class="loadingTextNew" style="display:none">Please Wait. Sending.</div>                    
                            <p class="alert alert-danger" role="alert" id="errorMessageBass" style="display:none">There was a problem saving your data. Try again later.</p>                              
                            <h6>*  <a target="_blank" rel="noopener noreferrer" href="https://celody.com/account.html">No Account?</a> Accounts are required to manage your songs.</h6>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="bassSaveMessage" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <h5>To save edited track into the master version, send exactly <div class="bassBid" style="display:inline"></div> from your BTC wallet to address:<br></h5>
                            <p class="alert alert-info" role="alert" style="display:inline-block;word-break:break-all;"><code class="songAddress" style="display:inline-block;word-break:break-all;"></code></p>                                                                
                            <p class="alert alert-danger" role="alert" style="display:inline-block;" id="bassMemo">Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.</p>                                        
                            <h6 id="bassScatter" style="display:none">*  <a target="_blank" rel="noopener noreferrer" href="#" id="bassScatterLink">Got Scatter? Send Now</a></h6>                            
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="bBreakGroup">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                 
                        </div>                                                
                    </div>                                                                    
                </div>                
                
            </div>                

            <div class="col-lg-12">
                <div id="drum" style="background-color:lightgray;">
                    <div class="form-group row pGroup" id="dGroup1" style="padding-top:5px;padding-bottom:5px">                                                
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            Drum
                        </div>                                                
                        <div class="col-lg-4" style="padding-top:5px;padding-bottom:5px">                 
                            Current Track: <div id="drumCurrent" style="display:inline">Loading...</div>
                        </div>                        
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            <div id="drumState" style="display:inline">Pending</div>: <div class="drumBid" style="display:inline">Loading...</div>
                        </div>                                                
                        <div class="col-lg-2" id="drumUpload" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-upload" style="color:#F9464A;font-weight:bold"></i> Upload Track
                        </div>                                                
                        <div class="col-lg-2" id="editDrumControl" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-edit" style="color:#F9464A;font-weight:bold"></i> Edit Track
                        </div>                                                
                    </div>                                                                    
                </div>                        
                
            </div>                
            <div class="form-group row pGroup" id="drumUploadMessage" style="display:none">                                                
                <div class="col-lg-12">                                                                                                         
                    <p class="alert alert-danger" role="alert" style="display:inline-block;">This feature is currently being limited to a small number of testers. Check back soon for general availability.</p>                                        
                </div>                                                
            </div>                                                                    
            <div id="editDrum" style="display:none">
                <div class="form-group row pGroup" id="dGroup2">                                                
                    <div class="col-lg-2">                                                     
                        <div style="padding-top:20%">Wave</div>
                    </div>                                                
                    <div class="col-lg-10">                                             
                        <div id="drumProgress" style="display:none">Loading waveform... <img src="https://celody.com/img/loading.gif" alt="loading" height="20" width="20"/></div>
                        <div id="drumWaveForm"></div>
                    </div>                                                                        
                </div>                                                                    
                <div class="form-group row pGroup" id="dGroup3">                                                
                    <div class="col-lg-2">                 
                        Track
                    </div>                                                
                    <div class="col-lg-10">                 
                        <select class="form-control" style="width:100%;" id="drumTrack">                    
                            <option value="drum1">Constant Rhythmic Drum</option>
                            <option value="drum2">Ginger Heartbeat Drum</option>
                            <option value="drum3">Summer Shaking Drum</option>                                
                            <option value="drum4">Skip Party Drum</option>                                
                            <option value="drum5">Peanut Butter and Jam Drum</option>                                
                            <option value="drum6">Cucumber Techno Drum</option>                                
                            <option value="drum7">Come On Home Drum</option>                                
                            <option value="drum8">Lisp with Yelp Drum</option>                                
                            <option value="drum9">Quicken Lane Drum</option>                                
                            <option value="drum10">Clap Your Hands Drum</option>                                
                        </select>
                    </div>                                                
                </div>                                                                    
                <div class="form-group row pGroup" id="dVolGroup">                                                
                    <div class="col-lg-2">                 
                        Volume
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumVol" id="drumVol" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                
                </div>                                                                    
                <div class="form-group row pGroup" id="dPanGroup">                                                
                    <div class="col-lg-2">                 
                        Panning
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumPan" id="drumPan" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                
                </div>                                                                                        
                <div class="form-group row pGroup" id="dDubGroup">                                                
                    <div class="col-lg-2">                 
                        Dub Delay
                    </div>                                                                        
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumDub" id="drumDub" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                
                </div>                                                                                        
                <div class="form-group row pGroup" id="dDisGroup">                                                
                    <div class="col-lg-2">                 
                        Fuzz
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumDis" id="drumDis" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                                    
                </div>                                                                                        
                <div class="form-group row pGroup moreDFX" id="dTreGroup" style="display:none">                                                
                    <div class="col-lg-2">                 
                        Tremolo
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumTre" id="drumTre" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                                    
                </div>        
                <div class="form-group row pGroup moreDFX" id="dFlaGroup" style="display:none">                                                
                    <div class="col-lg-2">                 
                        Flanger
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumFla" id="drumFla" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                                    
                </div>                                                 
                <div class="form-group row pGroup moreDFX" id="dLowGroup" style="display:none">                                                
                    <div class="col-lg-2">                 
                        Low Pass Filter
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumLow" id="drumLow" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                                    
                </div>  
                <div class="form-group row pGroup moreDFX" id="dHigGroup" style="display:none">                                                
                    <div class="col-lg-2">                 
                        High Pass Filter
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumHig" id="drumHig" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                                    
                </div>                                                                                                                                                                                                                                                                                                                      
                <div class="form-group row pGroup moreDFX" id="dAttGroup" style="display:none">                                                
                    <div class="col-lg-2">                 
                        Attack
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary downButton" id="downDrumAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumAtt" id="drumAtt" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                                    
                </div>                                                                                                                             
                <div class="form-group row pGroup moreDFX" id="dRelGroup" style="display:none">                                                
                    <div class="col-lg-2">                 
                        Release
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downDrumRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                    </div>                                                
                    <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                        <input type="range" min="0" max="1" step=".01" name="drumRel" id="drumRel" />
                    </div>                                                
                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                        <button type="submit" class="btn btn-primary upButton" id="upDrumRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                    </div>                                                                                        
                </div>                                                                                                                                                                                 
                <div class="form-group row pGroup" id="dControlGroup">          
                    <div class="col-lg-2">                                                                         
                    </div>                                                                                      
                    <div class="col-lg-10">                                             
                        Drum Only:&nbsp;
                        <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="drumPlay"><i class="fa fa-play"></i> Play</button>                                    
                        <img src="https://celody.com/img/loading.gif" id="drumPlayLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                        <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="drumPause"><i class="fa fa-pause"></i> Pause</button>                                                                                    
                        <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="drumRestart"><i class="fa fa-backward"></i> Start</button>
                        <img src="https://celody.com/img/loading.gif" id="drumRestartLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                        <br>
                        <button type="submit" class="btn btn-primary songPlay" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-file-audio-o"></i> Song</button>                                    
                        <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px;" id="drumMore"><i class="fa fa-plus-square"></i> More FX</button>
                        <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px" id="drumSave"><i class="fa fa-save"></i> Save</button>                                                                                    
                    </div>                                                
                </div>                                                                    
                <div class="form-group row pGroup" id="drumSaveAccount" style="display:none">                                                
                    <div class="col-lg-2">                                                 
                    </div>                                                
                    <div class="col-lg-10">                                                                             
                        <p class="alert alert-info" role="alert" style="display:inline-block;">Enter some off-chain data that will sync with your BTC blockchain transaction.</p><br>                                                                
                        <label for="account">Celody Account:</label><br>                                                            
                        <input type="text" placeholder=" 27 Character Account" style="width:60%;margin: 0 auto;" class="account" id="accountDrum"/><br>                                                            
                        <label for="tokenAddress" style="margin-top:4px">Your BTC Address:</label><br>                                                            
                        <input type="text" placeholder=" Public Wallet Address" style="width:60%;margin: 0 auto;" class="tokenAddress" id="tokenAddressDrum"/><br>                                                            
                        <label for="tokenAmountDrum" style="margin-top:3px">BTC Threshold Amount:</label><br>                                                            
                        <input type="text" placeholder=" At least 0.0000" style="width:60%;margin: 0 auto;" id="tokenAmountDrum"/><br>                                                                                                                                                
                        <button type="submit" class="btn btn-primary" style="display:inline;background-color:#F9464A;margin-top:10px" id="drumSaveNext">Finalize Drum Track</button>                                                                                    
                        <img class="loadingNew" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div class="loadingTextNew" style="display:none">Please Wait. Sending.</div>                    
                        <p class="alert alert-danger" role="alert" id="errorMessageDrum" style="display:none">There was a problem saving your data. Try again later.</p>                              
                        <h6>*  <a target="_blank" rel="noopener noreferrer" href="https://celody.com/account.html">No Account?</a> Accounts are required to manage your songs.</h6>
                    </div>                                                
                </div>                                                                    
                <div class="form-group row pGroup" id="drumSaveMessage" style="display:none">                                                
                    <div class="col-lg-2">                                                 
                    </div>                                                
                    <div class="col-lg-10">                                                                             
                        <h5>To save edited track into the master version, send exactly <div class="drumBid" style="display:inline"></div> from your BTC wallet to address:<br></h5>
                        <p class="alert alert-info" role="alert" style="display:inline-block;word-break:break-all;"><code class="songAddress" style="display:inline-block;word-break:break-all;"></code></p>                                                                
                        <p class="alert alert-danger" role="alert" style="display:inline-block;" id="bassMemo">Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.</p>                                        
                        <h6 id="drumScatter" style="display:none">*  <a target="_blank" rel="noopener noreferrer" href="#" id="drumScatterLink">Got Scatter? Send Now</a></h6>                            
                    </div>                                                
                </div>                                                                    
                <div class="form-group row pGroup" id="dBreakGroup">                                                
                    <div class="col-lg-2">                                                 
                    </div>                                                
                    <div class="col-lg-10">                                                 
                    </div>                                                
                </div>                                                                    
            </div>                
                        
            <div class="col-lg-12">
                <div id="rhythm" style="background-color:lightgray;">
                    <div class="form-group row pGroup" id="rGroup1" style="padding-top:5px;padding-bottom:5px">                                                
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            Rhythm
                        </div>                                                
                        <div class="col-lg-4" style="padding-top:5px;padding-bottom:5px">                 
                            Current Track: <div id="rhythmCurrent" style="display:inline">Loading...</div>
                        </div>                        
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            <div id="rhythmState" style="display:inline">Pending</div>: <div class="rhythmBid" style="display:inline">Loading...</div>
                        </div>             
                        <div class="col-lg-2" id="rhythmUpload" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-upload" style="color:#F9464A;font-weight:bold"></i> Upload Track
                        </div>                                                                                   
                        <div class="col-lg-2" id="editRhythmControl" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-edit" style="color:#F9464A;font-weight:bold"></i> Edit Track
                        </div>                                                
                    </div>                                                                    
                </div>        
                <div class="form-group row pGroup" id="rhythmUploadMessage" style="display:none">                                                
                    <div class="col-lg-12">                                                                                                         
                        <p class="alert alert-danger" role="alert" style="display:inline-block;">This feature is currently being limited to a small number of testers. Check back soon for general availability.</p>                                        
                    </div>                                                
                </div>                                                                    
                <div id="editRhythm" style="display:none">
                    <div class="form-group row pGroup" id="rGroup2">                                                
                        <div class="col-lg-2">                                                     
                            <div style="padding-top:20%">Wave</div>
                        </div>                                                
                        <div class="col-lg-10">                                             
                            <div id="rhythmProgress" style="display:none">Loading waveform... <img src="https://celody.com/img/loading.gif" alt="loading" height="20" width="20"/></div>
                            <div id="rhythmWaveForm"></div>
                        </div>                                                                        
                    </div>                                                                    
                    <div class="form-group row pGroup" id="rGroup3">                                                
                        <div class="col-lg-2">                 
                            Track
                        </div>                                                
                        <div class="col-lg-10">                 
                            <select class="form-control" style="width:100%;" id="rhythmTrack">                    
                                <option value="rhythm1">Clean Winter Guitar Rhythm</option>
                                <option value="rhythm2">Straight Amber Guitar Rhythm</option>
                                <option value="rhythm3">Staccato Bop Guitar Rhythm</option>                                
                                <option value="rhythm4">Brassy Horns Rhythm</option>                                
                                <option value="rhythm5">Lovely Flow Horns Rhythm</option>                                
                                <option value="rhythm6">Cave Wind Rhythm</option>                                
                                <option value="rhythm7">Future Electronic Rhythm</option>                                
                                <option value="rhythm8">Bubble Synth Rhythm</option>                                
                                <option value="rhythm9">Tambourine Woman Rhythm</option>                                
                                <option value="rhythm10">Irish Hills Rhythm</option>                                
                            </select>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="rVolGroup">                                                
                        <div class="col-lg-2">                 
                            Volume
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmVol" id="rhythmVol" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="rPanGroup">                                                
                        <div class="col-lg-2">                 
                            Panning
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmPan" id="rhythmPan" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="rDubGroup">                                                
                        <div class="col-lg-2">                 
                            Dub Delay
                        </div>                                                                        
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmDub" id="rhythmDub" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="rDisGroup">                                                
                        <div class="col-lg-2">                 
                            Fuzz
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmDis" id="rhythmDis" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                        
                    <div class="form-group row pGroup moreRFX" id="rTreGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Tremolo
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmTre" id="rhythmTre" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>        
                    <div class="form-group row pGroup moreRFX" id="rFlaGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Flanger
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmFla" id="rhythmFla" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                 
                    <div class="form-group row pGroup moreRFX" id="rLowGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Low Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmLow" id="rhythmLow" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>  
                    <div class="form-group row pGroup moreRFX" id="rHigGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            High Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmHig" id="rhythmHig" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                                                                                                                                                                                                                      
                    <div class="form-group row pGroup moreRFX" id="rAttGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Attack
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downRhythmAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmAtt" id="rhythmAtt" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                             
                    <div class="form-group row pGroup moreRFX" id="rRelGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Release
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                                <button type="submit" class="btn btn-primary downButton" id="downRhythmRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="rhythmRel" id="rhythmRel" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upRhythmRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                                        
                    </div>                                                                                                                                                                                 
                    <div class="form-group row pGroup" id="rControlGroup">          
                        <div class="col-lg-2">                                                                         
                        </div>                                                                                      
                        <div class="col-lg-10">                                             
                            Rhythm Only:&nbsp;
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="rhythmPlay"><i class="fa fa-play"></i> Play</button>                                    
                            <img src="https://celody.com/img/loading.gif" id="rhythmPlayLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="rhythmPause"><i class="fa fa-pause"></i> Pause</button>                                                                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="rhythmRestart"><i class="fa fa-backward"></i> Start</button>
                            <img src="https://celody.com/img/loading.gif" id="rhythmRestartLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <br>
                            <button type="submit" class="btn btn-primary songPlay" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-file-audio-o"></i> Song</button>                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px;" id="rhythmMore"><i class="fa fa-plus-square"></i> More FX</button>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px" id="rhythmSave"><i class="fa fa-save"></i> Save</button>                                                                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="rhythmSaveAccount" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <p class="alert alert-info" role="alert" style="display:inline-block;">Enter some off-chain data that will sync with your BTC blockchain transaction.</p><br>                                                                
                            <label for="account">Celody Account:</label><br>                                                            
                            <input type="text" placeholder=" 27 Character Account" style="width:60%;margin: 0 auto;" class="account" id="accountRhythm"/><br>                                                            
                            <label for="tokenAddress" style="margin-top:4px">Your BTC Address:</label><br>                                                            
                            <input type="text" placeholder=" Public Wallet Address" style="width:60%;margin: 0 auto;" class="tokenAddress" id="tokenAddressRhythm"/><br>                                                            
                            <label for="tokenAmountRhythm" style="margin-top:3px">BTC Threshold Amount:</label><br>                                                            
                            <input type="text" placeholder=" At least 0.0000" style="width:60%;margin: 0 auto;" id="tokenAmountRhythm"/><br>                                                                                                                                                
                            <button type="submit" class="btn btn-primary" style="display:inline;background-color:#F9464A;margin-top:10px" id="rhythmSaveNext">Finalize Rhythm Track</button>                                                                                    
                            <img class="loadingNew" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div class="loadingTextNew" style="display:none">Please Wait. Sending.</div>                    
                            <p class="alert alert-danger" role="alert" id="errorMessageRhythm" style="display:none">There was a problem saving your data. Try again later.</p>                              
                            <h6>*  <a target="_blank" rel="noopener noreferrer" href="https://celody.com/account.html">No Account?</a> Accounts are required to manage your songs.</h6>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="rhythmSaveMessage" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <h5>To save edited track into the master version, send exactly <div class="rhythmBid" style="display:inline"></div> from your BTC wallet to address:<br></h5>
                            <p class="alert alert-info" role="alert" style="display:inline-block;word-break:break-all;"><code class="songAddress" style="display:inline-block;word-break:break-all;"></code></p>                                                                
                            <p class="alert alert-danger" role="alert" style="display:inline-block;" id="rhythmMemo">Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.</p>                                        
                            <h6 id="rhythmScatter" style="display:none">*  <a target="_blank" rel="noopener noreferrer" href="#" id="rhythmScatterLink">Got Scatter? Send Now</a></h6>                            
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="rBreakGroup">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                 
                        </div>                                                
                    </div>                                                                    
                </div>                                                                            
            </div>                

            <div class="col-lg-12">
                <div id="lead" style="background-color:lightgray;">
                    <div class="form-group row pGroup" id="lGroup1" style="padding-top:5px;padding-bottom:5px">                                                
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            Lead
                        </div>                                                
                        <div class="col-lg-4" style="padding-top:5px;padding-bottom:5px">                 
                            Current Track: <div id="leadCurrent" style="display:inline">Loading...</div>
                        </div>                        
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            <div id="leadState" style="display:inline">Pending</div>: <div class="leadBid" style="display:inline">Loading...</div>
                        </div>                                                
                        <div class="col-lg-2" id="leadUpload" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-upload" style="color:#F9464A;font-weight:bold"></i> Upload Track
                        </div>                                                                                   
                        <div class="col-lg-2" id="editLeadControl" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-edit" style="color:#F9464A;font-weight:bold"></i> Edit Track
                        </div>                                                
                    </div>                                                                    
                </div>                        
                <div class="form-group row pGroup" id="leadUploadMessage" style="display:none">                                                
                    <div class="col-lg-12">                                                                                                         
                        <p class="alert alert-danger" role="alert" style="display:inline-block;">This feature is currently being limited to a small number of testers. Check back soon for general availability.</p>                                        
                    </div>                                                
                </div>                                                                    
                <div id="editLead" style="display:none">
                    <div class="form-group row pGroup" id="lGroup2">                                                
                        <div class="col-lg-2">                                                     
                            <div style="padding-top:20%">Wave</div>
                        </div>                                                
                        <div class="col-lg-10">                                             
                            <div id="leadProgress" style="display:none">Loading waveform... <img src="https://celody.com/img/loading.gif" alt="loading" height="20" width="20"/></div>
                            <div id="leadWaveForm"></div>
                        </div>                                                                        
                    </div>                                                                    
                    <div class="form-group row pGroup" id="lGroup3">                                                
                        <div class="col-lg-2">                 
                            Track
                        </div>                                                
                        <div class="col-lg-10">                 
                            <select class="form-control" style="width:100%;" id="leadTrack">                    
                                <option value="lead1">Red Machine Synth Lead</option>
                                <option value="lead2">Sweeping Waterfall Lead</option>
                                <option value="lead3">Sweet Rainbow Guitar Lead</option>                                
                                <option value="lead4">Tinker Toy Bell Lead</option>                                
                                <option value="lead5">Celtic Fiddler Lead</option>                                
                                <option value="lead6">Breakbeat Filter Lead</option>                                
                                <option value="lead7">English Teletype Lead</option>                                
                                <option value="lead8">Common Street Guitar Lead</option>                                
                                <option value="lead9">Hard Electric Guitar Lead</option>                                
                                <option value="lead10">Busby Saxophone Lead</option>                                
                                <option value="lead11">Swing Street Sax Lead</option>                                
                                <option value="lead12">Broadway Street Sax Lead</option>                                
                                <option value="lead13">Concert Strings Lead</option>                                
                                <option value="lead14">Movement Synth Lead</option>                                
                                <option value="lead15">Tomorrow Slam Lead</option>                                
                            </select>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="lVolGroup">                                                
                        <div class="col-lg-2">                 
                            Volume
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadVol" id="leadVol" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="lPanGroup">                                                
                        <div class="col-lg-2">                 
                            Panning
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadPan" id="leadPan" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="lDubGroup">                                                
                        <div class="col-lg-2">                 
                            Dub Delay
                        </div>                                                                        
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadDub" id="leadDub" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="lDisGroup">                                                
                        <div class="col-lg-2">                 
                            Fuzz
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadDis" id="leadDis" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                        
                    <div class="form-group row pGroup moreLFX" id="lTreGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Tremolo
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadTre" id="leadTre" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>        
                    <div class="form-group row pGroup moreLFX" id="lFlaGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Flanger
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadFla" id="leadFla" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                 
                    <div class="form-group row pGroup moreLFX" id="lLowGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Low Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadLow" id="leadLow" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>  
                    <div class="form-group row pGroup moreLFX" id="lHigGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            High Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadHig" id="leadHig" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                                                                                                                                                                                                                      
                    <div class="form-group row pGroup moreLFX" id="lAttGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Attack
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downLeadAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadAtt" id="leadAtt" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                             
                    <div class="form-group row pGroup moreLFX" id="lRelGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Release
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                                <button type="submit" class="btn btn-primary downButton" id="downLeadRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="leadRel" id="leadRel" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upLeadRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                                        
                    </div>                                                    
                    <div class="form-group row pGroup" id="lControlGroup">          
                        <div class="col-lg-2">                                                                         
                        </div>                                                                                      
                        <div class="col-lg-10">                                             
                            Lead Only:&nbsp;
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="leadPlay"><i class="fa fa-play"></i> Play</button>                                    
                            <img src="https://celody.com/img/loading.gif" id="leadPlayLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="leadPause"><i class="fa fa-pause"></i> Pause</button>                                                                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="leadRestart"><i class="fa fa-backward"></i> Start</button>
                            <img src="https://celody.com/img/loading.gif" id="leadRestartLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <br>
                            <button type="submit" class="btn btn-primary songPlay" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-file-audio-o"></i> Song</button>                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px;" id="leadMore"><i class="fa fa-plus-square"></i> More FX</button>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px" id="leadSave"><i class="fa fa-save"></i> Save</button>                                                                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="leadSaveAccount" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <p class="alert alert-info" role="alert" style="display:inline-block;">Enter some off-chain data that will sync with your BTC blockchain transaction.</p><br>                                                                
                            <label for="account">Celody Account:</label><br>                                                            
                            <input type="text" placeholder=" 27 Character Account" style="width:60%;margin: 0 auto;" class="account" id="accountLead"/><br>                                                            
                            <label for="tokenAddress" style="margin-top:4px">Your BTC Address:</label><br>                                                            
                            <input type="text" placeholder=" Public Wallet Address" style="width:60%;margin: 0 auto;" class="tokenAddress" id="tokenAddressLead"/><br>                                                            
                            <label for="tokenAmountLead" style="margin-top:3px">BTC Threshold Amount:</label><br>                                                            
                            <input type="text" placeholder=" At least 0.0000" style="width:60%;margin: 0 auto;" id="tokenAmountLead"/><br>                                                                                                                                                
                            <button type="submit" class="btn btn-primary" style="display:inline;background-color:#F9464A;margin-top:10px" id="leadSaveNext">Finalize Lead Track</button>                                                                                    
                            <img class="loadingNew" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div class="loadingTextNew" style="display:none">Please Wait. Sending.</div>                    
                            <p class="alert alert-danger" role="alert" id="errorMessageLead" style="display:none">There was a problem saving your data. Try again later.</p>                              
                            <h6>*  <a target="_blank" rel="noopener noreferrer" href="https://celody.com/account.html">No Account?</a> Accounts are required to manage your songs.</h6>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="leadSaveMessage" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <h5>To save edited track into the master version, send exactly <div class="leadBid" style="display:inline"></div> from your BTC wallet to address:<br></h5>
                            <p class="alert alert-info" role="alert" style="display:inline-block;word-break:break-all;"><code class="songAddress" style="display:inline-block;word-break:break-all;"></code></p>                                                                
                            <p class="alert alert-danger" role="alert" style="display:inline-block;" id="leadMemo">Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.</p>                                        
                            <h6 id="leadScatter" style="display:none">*  <a target="_blank" rel="noopener noreferrer" href="#" id="leadScatterLink">Got Scatter? Send Now</a></h6>                            
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="lBreakGroup">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                 
                        </div>                                                
                    </div>                                                                    
                </div>                                                            
            </div>                

            <div class="col-lg-12">
                <div id="vocal" style="background-color:lightgray;">
                    <div class="form-group row pGroup" id="vGroup1" style="padding-top:5px;padding-bottom:5px">                                                
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            Vocals
                        </div>                                                
                        <div class="col-lg-4" style="padding-top:5px;padding-bottom:5px">                 
                            Current Track: <div id="vocalCurrent" style="display:inline">Loading...</div>
                        </div>                        
                        <div class="col-lg-2" style="padding-top:5px;padding-bottom:5px">                 
                            <div id="vocalState" style="display:inline">Pending</div>: <div class="vocalBid" style="display:inline">Loading...</div>
                        </div>                                                
                        <div class="col-lg-2" id="vocalUpload" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-upload" style="color:#F9464A;font-weight:bold"></i> Upload Track
                        </div>                                                                                   
                        <div class="col-lg-2" id="editVocalControl" style="padding-top:5px;padding-bottom:5px">                 
                            <i class="fa fa-edit" style="color:#F9464A;font-weight:bold"></i> Edit Track
                        </div>                                                
                    </div>                                                                    
                </div>                        
                <div class="form-group row pGroup" id="vocalUploadMessage" style="display:none">                                                
                    <div class="col-lg-12">                                                                                                         
                        <p class="alert alert-danger" role="alert" style="display:inline-block;">This feature is currently being limited to a small number of testers. Check back soon for general availability.</p>                                        
                    </div>                                                
                </div>                                                                    
                <div id="editVocal" style="display:none">
                    <div class="form-group row pGroup" id="vGroup2">                                                
                        <div class="col-lg-2">                                                     
                            <div style="padding-top:20%">Wave</div>
                        </div>                                                
                        <div class="col-lg-10">                                             
                            <div id="vocalProgress" style="display:none">Loading waveform... <img src="https://celody.com/img/loading.gif" alt="loading" height="20" width="20"/></div>
                            <div id="vocalWaveForm"></div>
                        </div>                                                                        
                    </div>                                                                    
                    <div class="form-group row pGroup" id="vGroup3">                                                
                        <div class="col-lg-2">                 
                            Track
                        </div>                                                
                        <div class="col-lg-10">                 
                            <select class="form-control" style="width:100%;" id="vocalTrack">                    
                                <option value="vocal1">Female Ah Chant Vocal</option>
                                <option value="vocal2">Stumpy Breaking Vocal</option>
                                <option value="vocal3">Funk Machine Vocal</option>                                
                                <option value="vocal4">Da Da Da Da Da Da Vocal</option>                                
                                <option value="vocal5">Super Syrupy Vocal</option>                                
                                <option value="vocal6">Modern Humming Vocal</option>                                
                                <option value="vocal7">Boop Boop Boop Vocal</option>                                
                                <option value="vocal8">Crescendo Cry Vocal</option>                                
                                <option value="vocal9">Car Engine Crisp Vocal</option>                                
                                <option value="vocal10">Ooh Ooh Ooh Vocal</option>                                
                                <option value="vocal11">Big Bad Boh Vocal</option>                                
                                <option value="vocal12">Wisp Mouth Break Vocal</option>                                
                                <option value="vocal13">Da Da Da Da Da Dum Vocal</option>                                
                                <option value="vocal14">Moving Message Vocal</option>                                
                                <option value="vocal15">Moving Music Vocal</option>                                
                            </select>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="vVolGroup">                                                
                        <div class="col-lg-2">                 
                            Volume
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalVol" id="vocalVol" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalVol" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="vPanGroup">                                                
                        <div class="col-lg-2">                 
                            Panning
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalPan" id="vocalPan" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalPan" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="vDubGroup">                                                
                        <div class="col-lg-2">                 
                            Dub Delay
                        </div>                                                                        
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalDub" id="vocalDub" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalDub" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                
                    </div>                                                                                        
                    <div class="form-group row pGroup" id="vDisGroup">                                                
                        <div class="col-lg-2">                 
                            Fuzz
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalDis" id="vocalDis" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalDis" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                        
                    <div class="form-group row pGroup moreVFX" id="vTreGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Tremolo
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalTre" id="vocalTre" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalTre" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>        
                    <div class="form-group row pGroup moreVFX" id="vFlaGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Flanger
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalFla" id="vocalFla" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalFla" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                 
                    <div class="form-group row pGroup moreVFX" id="vLowGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Low Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalLow" id="vocalLow" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalLow" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>  
                    <div class="form-group row pGroup moreVFX" id="vHigGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            High Pass Filter
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalHig" id="vocalHig" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalHig" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                                                                                                                                                                                                                      
                    <div class="form-group row pGroup moreVFX" id="vAttGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Attack
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary downButton" id="downVocalAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalAtt" id="vocalAtt" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalAtt" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                    
                    </div>                                                                                                                             
                    <div class="form-group row pGroup moreVFX" id="vRelGroup" style="display:none">                                                
                        <div class="col-lg-2">                 
                            Release
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                                <button type="submit" class="btn btn-primary downButton" id="downVocalRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-minus-square"></i></button>                                    
                        </div>                                                
                        <div class="col-lg-8 col-md-8 col-sm-10 col-xs-10">               
                            <input type="range" min="0" max="1" step=".01" name="vocalRel" id="vocalRel" />
                        </div>                                                
                        <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2">                                  
                            <button type="submit" class="btn btn-primary upButton" id="upVocalRel" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-plus-square"></i></button>                                    
                        </div>                                                                                        
                    </div>                                                    
                    <div class="form-group row pGroup" id="vControlGroup">          
                        <div class="col-lg-2">                                                                         
                        </div>                                                                                      
                        <div class="col-lg-10">                                             
                            Vocal Only:&nbsp;
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="vocalPlay"><i class="fa fa-play"></i> Play</button>                                    
                            <img src="https://celody.com/img/loading.gif" id="vocalPlayLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="vocalPause"><i class="fa fa-pause"></i> Pause</button>                                                                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="vocalRestart"><i class="fa fa-backward"></i> Start</button>
                            <img src="https://celody.com/img/loading.gif" id="vocalRestartLoading" alt="loading" height="20" width="20" style="display:none;padding:5px"/>
                            <br>
                            <button type="submit" class="btn btn-primary songPlay" style="background-color:#F9464A;margin-top:5px;"><i class="fa fa-file-audio-o"></i> Song</button>                                    
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px;" id="vocalMore"><i class="fa fa-plus-square"></i> More FX</button>
                            <button type="submit" class="btn btn-primary" style="background-color:#F9464A;margin-top:5px" id="vocalSave"><i class="fa fa-save"></i> Save</button>                                                                                    
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="vocalSaveAccount" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <p class="alert alert-info" role="alert" style="display:inline-block;">Enter some off-chain data that will sync with your BTC blockchain transaction.</p><br>                                                                
                            <label for="account">Celody Account:</label><br>                                                            
                            <input type="text" placeholder=" 27 Character Account" style="width:60%;margin: 0 auto;" class="account" id="accountVocal"/><br>                                                            
                            <label for="tokenAddress" style="margin-top:4px">Your BTC Address:</label><br>                                                            
                            <input type="text" placeholder=" Public Wallet Address" style="width:60%;margin: 0 auto;" class="tokenAddress" id="tokenAddressVocal"/><br>                                                            
                            <label for="tokenAmountVocal" style="margin-top:3px">BTC Threshold Amount:</label><br>                                                            
                            <input type="text" placeholder=" At least 0.0000" style="width:60%;margin: 0 auto;" id="tokenAmountVocal"/><br>                                                                                                                                                
                            <button type="submit" class="btn btn-primary" style="display:inline;background-color:#F9464A;margin-top:10px" id="vocalSaveNext">Finalize Vocal Track</button>                                                                                    
                            <img class="loadingNew" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div class="loadingTextNew" style="display:none">Please Wait. Sending.</div>                    
                            <p class="alert alert-danger" role="alert" id="errorMessageVocal" style="display:none">There was a problem saving your data. Try again later.</p>                              
                            <h6>*  <a target="_blank" rel="noopener noreferrer" href="https://celody.com/account.html">No Account?</a> Accounts are required to manage your songs.</h6>
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="vocalSaveMessage" style="display:none">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                                             
                            <h5>To save edited track into the master version, send exactly <div class="vocalBid" style="display:inline"></div> from your BTC wallet to address:<br></h5>
                            <p class="alert alert-info" role="alert" style="display:inline-block;word-break:break-all;"><code class="songAddress" style="display:inline-block;word-break:break-all;"></code></p>                                                                
                            <p class="alert alert-danger" role="alert" style="display:inline-block;" id="bassMemo">Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.</p>                                        
                            <h6 id="vocalScatter" style="display:none">*  <a target="_blank" rel="noopener noreferrer" href="#" id="vocalScatterLink">Got Scatter? Send Now</a></h6>                            
                        </div>                                                
                    </div>                                                                    
                    <div class="form-group row pGroup" id="vBreakGroup">                                                
                        <div class="col-lg-2">                                                 
                        </div>                                                
                        <div class="col-lg-10">                                                 
                        </div>                                                
                    </div>                                                                    
                </div>                                            
            </div>                

            <div class="col-lg-12">                
                <h3 class="page-header">Current Band Name: <div id="bandName" style="display:inline">Loading...</div><div id="bandNameState" style="display:inline;font-size:10px">&nbsp;(Pending)</div>&nbsp;<i class="fa fa-edit" id="editBandName" style="color:#F9464A;font-weight:bold"></i></h3>
                <div class="form-group row pGroup" id="saveBandName" style="display:none">                                                                    
                    <div class="col-lg-12">                                                                             
                        <p class="alert alert-info" role="alert" style="display:inline-block;">Enter some off-chain data that will sync with your BTC blockchain transaction.</p><br>                                                                
                        <label for="account">Celody Account:</label><br>                                                            
                        <input type="text" placeholder=" 27 Character Account" style="width:60%;margin: 0 auto;" class="account" id="accountBand"/><br>                                                            
                        <label for="tokenAddress" style="margin-top:4px">Your BTC Address:</label><br>                                                            
                        <input type="text" placeholder=" Public Wallet Address" style="width:60%;margin: 0 auto;" class="tokenAddress" id="tokenAddressBandName"/><br>                                                            
                        <label for="tokenAmountBandName" style="margin-top:3px">BTC Threshold Amount:</label><br>                                                            
                        <input type="text" placeholder=" At least 0.0000" style="width:60%;margin: 0 auto;" id="tokenAmountBandName"/><br>                                                                                                                        
                        <label for="bandNameNew" style="margin-top:3px">New Band Name:</label><br>                                                            
                        <input type="text" placeholder=" Enter Name (Max 50 Characters)" style="width:60%;margin: 0 auto;" id="bandNameNew"/><br>                                                            
                        <button type="submit" class="btn btn-primary" style="display:inline;background-color:#F9464A;margin-top:10px" id="bandNameSaveNext">Finalize Band Name</button>                                                                                    
                        <img class="loadingNew" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div class="loadingTextNew" style="display:none">Please Wait. Sending.</div>                    
                        <p class="alert alert-danger" role="alert" id="errorMessageBandName" style="display:none">There was a problem saving your data. Try again later.</p>                                                      
                        <h6>*  <a target="_blank" rel="noopener noreferrer" href="https://celody.com/account.html">No Account?</a> Accounts are required to manage your songs.</h6>
                    </div>                                                
                </div>                                                                                                    
                <div class="form-group row pGroup" id="bandNameSaveMessage" style="display:none">                                                                    
                    <div class="col-lg-12">                                                                             
                        <h5>To save the new name as the master version, send exactly <div class="bandNameBid" style="display:inline"></div> from your BTC wallet to address:<br></h5>
                        <p class="alert alert-info" role="alert" style="display:inline-block;word-break:break-all;"><code class="songAddress" style="display:inline-block;word-break:break-all;"></code></p>                                                                
                        <p class="alert alert-danger" role="alert" style="display:inline-block;" id="bandNameMemo">Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.</p>                                        
                        <h6 id="bandNameScatter" style="display:none">*  <a target="_blank" rel="noopener noreferrer" href="#" id="bandNameScatterLink">Got Scatter? Send Now</a></h6>
                    </div>                                                
                </div>                                                                    
                <h3>                        
                    <button type="submit" class="btn btn-primary" style="background-color:#F9464A" id="songRestore"><i class="fa fa-refresh"></i> Restore Song to Saved Version</button>                                                        
                </h3>                
            </div>                            
        </div>

        <!-- /.row -->            
    </div>      
    <!-- /.container -->

    </section>
    
    <!-- Page Content -->
    <section class="content-section-a" style="padding-top:-20px" id="faq">
        
        <div class="container">        
            <hr class="intro-divider">          
            <div class="row text-center">
            
                <div class="col-lg-12">
                    <h3 class="page-header">Song Editor<br>Frequently Asked Questions:</h3>
                    <p>Question: How does this work?</p> 
                    <p>Answer: The current song structure gets pulled from the blockchain to your browser. You can edit a local version of the song in your browser and then use cryptocurrency to merge your changes back into the master song on the blockchain.</p>
                    <hr class="faq-divider">          
                    <p>Question: What's the point of using cryptocurrency?</p> 
                    <p>Answer: Cryptocurrency provides a mechanism for agreeing on the song's structure. It allows a group of remote people to come to consensus on the final song. It's also how the project calculates a person's contribution level to a song.</p>
                    <hr class="faq-divider">          
                    <p>Question: What parts of a song can I edit?</p> 
                    <p>Answer: You can edit the song's name, each of the five instrument/vocal tracks, or the band's name.</p>                    
                    <hr class="faq-divider">                                                  
                    <p>Question: How do I edit a song's music?</p> 
                    <p>Answer: To edit an instrument track, click the "Edit Track" icon and then adjust the FX sliders or chosen track. Experiment by playing different combinations and seeing what you like.</p>
                    <hr class="faq-divider">                              
                    <p>Question: Do I need to be a trained musician to edit the song?</p> 
                    <p>Answer: No. There are a variety of pre-recorded instruments to choose from. You can be like a dj and choose what you think sounds best.</p>                    
                    <hr class="faq-divider">                              
                    <p>Question: If I edit a song, does it automatically become part of the master song version?</p> 
                    <p>Answer: Editing a song only occurs on your local device. Your edits only become permanent when saved into the blockchain.</p>
                    <hr class="faq-divider">          
                    <p>Question: How do I save my edits into the master song version on the blockchain?</p> 
                    <p>Answer: After clicking the Edit Track icon and making your changes, click on the Save button to get instructions. In short, you need to send a transaction to the blockchain with a certain value. This transaction then gets synced with off-chain data.</p>
                    <hr class="faq-divider">          
                    <p>Question: How do I get bitcoin to send the transaction?</p> 
                    <p>Answer: You need to acquire the token from a cryptocurrency exchange or fiat gateway (like Coinbase) and then transfer your bitcoin to your own wallet. Once you have bitcoin in your wallet, you send the song transaction.</p>                    
                    <hr class="faq-divider">          
                    <p>Question: Can I incorporate my own instruments, vocals and effects in the song?</p> 
                    <p>Answer: Yes. Use the Upload Track button to upload your own sounds. Make sure to follow the instructions when uploading (e.g. don't upload a bass into the drum track, make sure the file format is correct, etc.).</p>
                    <hr class="faq-divider">          
                    <p>Question: I want to create a custom track. How should I start?</p> 
                    <p>Answer: First, you'll want to download the master song with the track you want to replace muted (turn the volume to zero). The song download button is near the top of the page next to the Restart button.</p>
                    <hr class="faq-divider">          
                    <p>Question: Ok. I've downloaded the song to my device? What should I do next to create a custom track?</p> 
                    <p>Answer: You should import the download into your Digital Audio Workstation and then compose your music. Make sure your custom track syncs with the current song.</p>
                    <hr class="faq-divider">          
                    <p>Question: Ok. I've create my track in my Digital Audio Workstation? What should I do next to create a custom track?</p> 
                    <p>Answer: Export only the custom track from your Digital Audio Workstation. Make sure to mute or exclude the rest of the song. Once you have the custom track exported, upload it into the Song Editor using the Upload button.</p>
                    <hr class="faq-divider">          
                    <p>Question: If I upload a track, does it become part of the master song version?</p> 
                    <p>Answer: No. Uploading a track just makes it available to the song's library. It still needs to be saved into the blockchain with the appropriate edits.</p>                    
                    <hr class="faq-divider">          
                    <p>Question: If I upload a track, is it immediately available in the song's library of sounds?</p> 
                    <p>Answer: No. Uploaded tracks need to meet the upload criteria. Read the instructions carefully when uploading.</p>
                    <hr class="faq-divider">          
                    <p>Question: What's the difference between uploading, editing, and saving?</p> 
                    <p>Answer: Uploads allow you to expand the sounds available to be used in the song. Once uploaded to the library, you can then edit the track. Edited tracks are not permanent unless they get saved into the blockchain. So saving is the final step.</p>
                    <hr class="faq-divider">          
                    <p>Question: Why is a certain feature missing? What's the project's status?</p> 
                    <p>Answer: The project is currently in beta. Many features like the Market and smart contracts are under development.</p>                    
                    <hr class="faq-divider">                               
                    <p>Question: Where are the intermediate song files, data and effects stored?</p> 
                    <p>Answer: The song data is stored off-chain in a publicly accessible location. This data is synced with the data on the bitcoin blockchain to determine the master song.</p>
                    <hr class="faq-divider">                              
                    <p>Question: What happens if someone submits a higher valued transaction after my transaction?</p> 
                    <p>Answer: The highest valued transaction becomes the master version. However, if you've submitted a confirmed transaction, the project considers you a partial song creator. Your creation percentage becomes equal to your transaction value divided by the total value amount of all confirmed transactions for the finished song.</p>
                    <hr class="faq-divider">          
                    <p>Question: What happens if someone matches my transaction value?</p> 
                    <p>Answer: The first transaction to confirm becomes the master version.</p>
                    <hr class="faq-divider">          
                    <p>Question: How does a song get finished or closed?</p> 
                    <p>Answer: Currently, manual curation decides when a song is closed. In the future, a community "close" button mechanism may be tested.</p>
                    <hr class="faq-divider">          
                    <p>Question: What happens after a song is closed for edits?</p> 
                    <p>Answer: Once a song is closed, no more edits can be made. The song then moves to the Market. The Market is currently under development.</p>
                    <hr class="faq-divider">                               
                    <p>Question: Is there a way to see who has contributed to the current song?</p> 
                    <p>Answer: The song structure history is on the blockchain and in the public data folder. Using a blockchain explorer, you can see all the transactions sent to the song's address. You can match these transactions to the json file in the public data folder.</p>
                    <hr class="faq-divider">                                                   
                    <p>Question: Why do I need to create an account?</p> 
                    <p>Answer: Accounts are required to manage your sounds (including uploads) and for the Market. There are other potential usecases being considered (e.g. limiting a Band to certain accounts).</p>
                    <hr class="faq-divider">                              
                    <p>Question: Will I be able to earn cryptocurrency from the song?</p> 
                    <p>Answer: The details of the market will be announced when the market launches. LEGAL DISCLAIMER: NO GUARANTEES ARE MADE THAT YOU WILL RECEIVE ANY CRYPTO FROM THIS PROJECT.</p>
                    <hr class="faq-divider">                                 
                    <p>Question: Which API Providers provide the real-time blockchain data?</p> 
                    <p>Answer: The project uses the api made available by BlockCypher. Please support them for their awesome work.</p>
                    <hr class="faq-divider">                                 
                </div>
                
            </div>            
            <!-- /.row -->

            <!-- Item Row -->            
            <hr class="intro-divider">          
            <div class="row text-center" id="userFeedback">                                    
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin-top:10px">                            
                    <h4>Provide Feedback to Improve Celody:</h4>                                    
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin-top:10px">                                                                                
                        <form class="form-horizontal">
                            <fieldset>                            
                                <div class="form-group">                                        
                                    <label for="message"></label>
                                    <div class="col-xs-12">
                                        <input type="text" class="form-control" style="width:80%;margin: 0 auto;" id="feedback" placeholder="Your Message">
                                    </div>                                        
                                </div>                                                
                                <div class="form-group">
                                    <div class="col-xs-12">                                        
                                        <button type="submit" class="btn btn-primary" style="width:88%;margin: 0 auto;" id="sendButton">Send Feedback</button>                                        
                                        <img id="loadingFeedback" src="https://celody.com/img/loading.gif" alt="loading" height="40" width="40" style="display:none">&nbsp;&nbsp;&nbsp;<div id="loadingTexFeedback" style="display:none">Please Wait. Sending.</div>                    
                                        <p class="alert alert-success" role="alert" id="successMessageFeedback" style="display:none">Success. Your message has been sent.</p>                              
                                        <p class="alert alert-danger" role="alert" id="errorMessageFeedback" style="display:none">There was a problem sending your message. Try again later.</p>                              
                                    </div>                            
                                </div>
                            </fieldset>
                        </form>                
                        
                </div>
            </div>            
        
        </div>    
        
    </section>
    <!-- /.container -->      
        
    <!-- Bootstrap Core JavaScript -->
    <script src="https://celody.com/js/bootstrap.min.js"></script>	
    <script src="https://celody.com/js/xss.js"></script>	
    <script src="https://celody.com/js/pizzicato.min.js"></script>
    <script src="https://celody.com/js/wavesurfer.min.js"></script>
    <script src="https://celody.com/js/recorder.js"></script>    

    <script>
    
    $(document).ready(function() {        
        
        // set initialization of song
        var bidMinimum = 1000; // specific to each token (uncoverted from 9 decimals - 0.00001)
        var bidIncrement = 1000; // specific to each token  (uncoverted from 9 decimals - 0.00001)
        var tokenName = "BTC"; // specific to each token
        var accountLength = 27; // standardized length of accounts
        var songDuration = 130000; // milliseconds, used for recording duration
        var MAXRESULTS = 500; // maximum number fetched from api
        var DISPLAYDECIMALS = 8; // display precision of value
        var songID = "";
        var soundFolder = "";
        var songAddress = "";        
        var songName = "Default Name";
        var songNameBid = bidMinimum;        
        var songNameThresh = "0.00001 " + tokenName;
        var bandName = "Default Band";
        var bandNameBid = bidMinimum;        
        var bandNameThresh = "0.00001 " + tokenName;
        
        var bassVol = 0.5;
        var bassPan = 0.35;                
        var bassFla = 0.0;        
        var bassTre = 0.0;        
        var bassLow = 0.0;        
        var bassHig = 0.0;        
        var bassAtt = 0.4;        
        var bassRel = 0.5;        
        var bassDub = 0.0;
        var bassDis = 0.0;
        var bassTrack = "bass7";        
        var bassTrackSource = ""; 
        var bassCurrentTrack = "";       
        var bassBid = bidMinimum;
        var bassThresh = bidMinimum + " " + tokenName;

        var drumVol = 0.5;
        var drumPan = 0.57;                
        var drumFla = 0.0;        
        var drumTre = 0.0;        
        var drumLow = 0.0;        
        var drumHig = 0.0;        
        var drumAtt = 0.4;        
        var drumRel = 0.5;        
        var drumDub = 0.0;
        var drumDis = 0.0;
        var drumTrack = "drum4";        
        var drumTrackSource = ""; 
        var drumCurrentTrack = "";       
        var drumBid = bidMinimum;
        var drumThresh = bidMinimum + " " + tokenName;

        var rhythmVol = 0.5;
        var rhythmPan = 0.27;                
        var rhythmFla = 0.0;        
        var rhythmTre = 0.0;        
        var rhythmLow = 0.0;        
        var rhythmHig = 0.0;        
        var rhythmAtt = 0.4;        
        var rhythmRel = 0.5;        
        var rhythmDub = 0.0;
        var rhythmDis = 0.0;
        var rhythmTrack = "rhythm8";        
        var rhythmTrackSource = ""; 
        var rhythmCurrentTrack = "";       
        var rhythmBid = bidMinimum;
        var rhythmThresh = bidMinimum + " " + tokenName;

        var leadVol = 0.5;
        var leadPan = 0.67;                
        var leadFla = 0.0;        
        var leadTre = 0.0;        
        var leadLow = 0.0;        
        var leadHig = 0.0;        
        var leadAtt = 0.4;        
        var leadRel = 0.5;        
        var leadDub = 0.0;
        var leadDis = 0.0;
        var leadTrack = "lead5";        
        var leadTrackSource = ""; 
        var leadCurrentTrack = "";       
        var leadBid = bidMinimum;
        var leadThresh = bidMinimum + " " + tokenName;

        var vocalVol = 0.5;
        var vocalPan = 0.5;                
        var vocalFla = 0.0;        
        var vocalTre = 0.0;        
        var vocalLow = 0.0;        
        var vocalHig = 0.0;        
        var vocalAtt = 0.4;        
        var vocalRel = 0.5;        
        var vocalDub = 0.0;
        var vocalDis = 0.0;
        var vocalTrack = "vocal6";        
        var vocalTrackSource = ""; 
        var vocalCurrentTrack = "";       
        var vocalBid = bidMinimum;
        var vocalThresh = bidMinimum + " " + tokenName;

        // define tracks
        var drum;
        var bass;
        var rhythm;                     
        var lead;
        var vocal;

        // define effects variables
        var bassFXFla;
        var bassFXLow;
        var bassFXHig;
        var bassFXPan;
        var bassFXTre;
        var bassFXDub;
        var bassFXDis;
        var drumFXFla;
        var drumFXLow;
        var drumFXHig;
        var drumFXPan;        
        var drumFXTre;
        var drumFXDub;
        var drumFXDis;
        var rhythmFXFla;
        var rhythmFXLow;
        var rhythmFXHig;
        var rhythmFXPan;        
        var rhythmFXTre;
        var rhythmFXDub;
        var rhythmFXDis;
        var leadFXFla;
        var leadFXLow;
        var leadFXHig;
        var leadFXPan;        
        var leadFXTre;
        var leadFXDub;
        var leadFXDis;
        var vocalFXFla;
        var vocalFXLow;
        var vocalFXHig;
        var vocalFXPan;        
        var vocalFXTre;
        var vocalFXDub;
        var vocalFXDis;
        
        var mainTrack = bassTrack;
        var mainTrackSource = bassTrackSource;
        var mainCurrentTrack = bassCurrentTrack

        // set wavesurfers
        var mainWave = "no";
        var mainWaveSurfer = WaveSurfer.create({                        
            container: '#mainWaveForm',
            waveColor: '#F9464A',            
            cursorColor: '#fff',      
            responsive: true,
            barWidth: 3
        });                                        

        // flags for edit toggle
        var bassWave = "no";
        var bassWavePlay = "no";
        var bassWaveSurfer = WaveSurfer.create({            
                container: '#bassWaveForm',
                waveColor: '#F9464A',                
                cursorColor: '#fff', 
                responsive: true,     
                barWidth: 3
        });

        // flags for edit toggle
        var drumWave = "no";
        var drumWavePlay = "no";
        var drumWaveSurfer = WaveSurfer.create({            
                container: '#drumWaveForm',
                waveColor: '#F9464A',                
                cursorColor: '#fff', 
                responsive: true,     
                barWidth: 3
        });
        
        // flags for edit toggle
        var rhythmWave = "no";
        var rhythmWavePlay = "no";
        var rhythmWaveSurfer = WaveSurfer.create({            
                container: '#rhythmWaveForm',
                waveColor: '#F9464A',                
                cursorColor: '#fff', 
                responsive: true,     
                barWidth: 3
        });

        // flags for edit toggle
        var leadWave = "no";
        var leadWavePlay = "no";
        var leadWaveSurfer = WaveSurfer.create({            
                container: '#leadWaveForm',
                waveColor: '#F9464A',                
                cursorColor: '#fff', 
                responsive: true,     
                barWidth: 3
        });

        // flags for edit toggle
        var vocalWave = "no";
        var vocalWavePlay = "no";
        var vocalWaveSurfer = WaveSurfer.create({            
                container: '#vocalWaveForm',
                waveColor: '#F9464A',                
                cursorColor: '#fff', 
                responsive: true,     
                barWidth: 3
        });        
        
        // get state from blockchain
        var resultCount = 0;
        var resultFrom = [];
        var resultAddress = [];
        var resultMessage = [];
        var resultValue = [];                
        var resultTimeStamp = [];    
        var resultHash = [];    

        // bad actor abuse filters         
        var btcBlack = []; // wallets
        var btcWhite = []; // wallets
        var btcBlackCheck = false; // keep these as fault for init
        var btcWhiteCheck = false; // keep these as fault for init
        var whiteOn = "no";

        // set the api endpoint
        var httpProviders = ['https://api.blockcypher.com/v1/btc/main/addrs/'+songAddress+'/full','https://api.blockcypher.com/v1/btc/main/addrs/'+songAddress+'/full'];
        
        // scatter chain id
        var chainIDCurrent = "";
        
        // randomly select api endpoint
        var httpRandom = httpProviders[0];
        var providerName = "BlockCypher";
        if (Math.random() > 0.5) {
            httpRandom = httpProviders[1];
            providerName = "BlockCypher";
        }         
  
        // start the fetch of blockchain data
        fetchData(songAddress);
        
        function fetchData(songAddress) {

            // get blockchain data
            $.ajax({
                type: "GET",
                url: httpRandom,
                contentType: 'application/json',                
                success: function(res){                                                
                    if (res.n_tx) {
                        processData(res); 
                    } else {                          
                        if (res.n_tx === 0) {
                            // no results, use defaults
                            initData();
                        } else {
                            alert("The Public Node at "+providerName+" is down and not returning blockchain data. Try back later to get the latest song.");               
                            initData();
                        }
                    }                     
                },
                error: function(){                             
                    alert("The Public Node at "+providerName+" is down and not returning blockchain data. Try back later to get the latest song.");
                    initData();
                }
            });      

            // function to handle blockchain data from bp api
            function processData(jsonData) { 

                var jsonCount = 0;
                if ((jsonData) && (jsonData.txs)) {
                    jsonCount = filterXSS(jsonData.txs.length);                
                } 
                var i = 0;
                var j = 0;
                // check if no actions
                if (jsonCount < 1) {
                    // no results move on to defaults             
                    initData();       
                    return false;
                }
                var tempValue = 0;
                var tempArray = [];
                var tempTransID = "";
                                
                // set up results - cyle through all token transfers
                while (i < jsonCount) {

                    // cycle through all the output address each transfer
                    j = 0;

                    if (jsonData.txs[i].outputs[j].addresses) {

                        while (j < jsonData.txs[i].outputs[j].addresses.length) {

                            // check the action is a transfer to song with no errors
                            if ((filterXSS(jsonData.txs[i].outputs[j].addresses[0]) === songAddress) && (!filterXSS(jsonData.txs[i].double_spend))) {

                                // get quantity of transfer
                                tempValue = filterXSS(jsonData.txs[i].outputs[j].value);
                                
                                // check the transfer amount is positive
                                if (parseFloat(tempValue) > 0) {

                                    // check if any of the black/whitelist is found within possible addresses                                     
                                    //btcBlackCheck = btcBlack.some(r=> jsonData.txs[i].addresses.indexOf(r) >= 0);
                                    //btcWhiteCheck = btcWhite.some(r=> jsonData.txs[i].addresses.indexOf(r) >= 0);                                    

                                    // check if on blacklist for abuse
                                    if (btcBlackCheck) {
                                        // skip transaction
                                    } else if ((whiteOn === "yes") && (!btcWhiteCheck)) {                                                                    
                                        // skip transaction
                                    } else {

                                        // set as a possible song history item - resultFrom includes all possible addresses in trx
                                        resultFrom[resultCount] = filterXSS(jsonData.txs[i].addresses);                    
                                        resultAddress[resultCount] = filterXSS(songAddress);                                                                    
                                        resultTimeStamp[resultCount] = filterXSS(jsonData.txs[i].received); 
                                        resultHash[resultCount] = filterXSS(jsonData.txs[i].hash);                      
                                        resultValue[resultCount] = filterXSS(tempValue); 

                                        // increment number of items found
                                        resultCount++;
                                    }                                                  
                                                                                
                                }

                            }
                            j++;                        
                        }
                    }
                                                
                    i++;

                }            
                            
                // display the results
                if (resultCount < 1) {

                    // no transactions, use defaults
                    initData();
                    return false;

                } else {

                    // pull in off chain memo
                    if (!Date.now) {Date.now = function() {return new Date().getTime();}}                    
                    $.ajax({
                        type: "GET",
                        url: 'https://public.celody.com/' + songID + '.json?v=' + Date.now(),
                        contentType: 'application/json',                
                        success: function(jsonRes){                                                            
                            // check some results exist
                            if (typeof(jsonRes) === 'string') {jsonRes = JSON.parse(jsonRes);}                            
                            if ((jsonRes) && (jsonRes[0].transactions) && (jsonRes[0].transactions.length > 0)) {
                                parseMemo(jsonRes); 
                            } else {                                                          
                                // no results yet, use defaults
                                initData();                                
                            }                                                        
                        },
                        error: function(){                                                         
                            initData();
                        }
                    });      
                }

                function parseMemo(publicData) {

                    // initialize variables
                    var parseAccount = "";
                    var parseType = "";
                    var parseName = "";
                    var parseValue = 0;
                    var parseData = "";
                    var parseVol = -1;
                    var parsePan = -1;
                    var parseFla = -1;
                    var parseTre = -1;
                    var parseLow = -1;
                    var parseHig = -1;
                    var parseAtt = -1;
                    var parseRel = -1;
                    var parseDis = -1;
                    var parseDub = -1;
                    var parseTrack = -1;
                    var totalLength = 0;
                    var tempEnd = 0;
                    var countPos = 0;                    
                    var convertMessage = "";                                                                        
                    var validItem = "yes";          
                    var currentSongNameMax = 0;
                    var currentSongTimeStamp = 0;
                    var currentSongNameHash = "";
                    var currentBandNameMax = 0;
                    var currentBandTimeStamp = 0;
                    var currentBandNameHash = "";
                    var currentBassMax = 0;
                    var currentDrumMax = 0;
                    var currentRhythmMax = 0;
                    var currentLeadMax = 0;
                    var currentVocalMax = 0;
                    var currentBassTimeStamp = 0;
                    var currentDrumTimeStamp = 0;
                    var currentRhythmTimeStamp = 0;
                    var currentLeadTimeStamp = 0;
                    var currentVocalTimeStamp = 0;
                    var currentBassHash = "";
                    var currentDrumHash = "";
                    var currentRhythmHash = "";
                    var currentLeadHash = "";
                    var currentVocalHash = "";                                       

                    // set up temp results for synced public data
                    var currentFromArray = [];
                    var currentFrom = "";
                    var currentValue = 0;
                    var currentKey = "";
                    var totalResults = Object.keys(publicData[0].transactions[0]).length;                    
                    var allocatedArray = [];
                    var t = 0;
                    var tempAccount = "";
                    var tempSongID = "";
                    var tempToken = "";
                    var tempTokenAddress = "";
                    var tempTokenAmount = 0;
                    var tempMemo = "";
                    var tempID = "";                    

                    // loop through results
                    var k = 0;                   
                    var t = 0;
                    
                    loop1:
                    while (k < resultCount) {

                        // get first possible trans
                        currentFrom = resultFrom[k];
                        currentFromArray = currentFrom.split(",");
                        currentValue = resultValue[k];

                        // search public data by address/value
                        t = 0;  
                        tempAccount = "";
                        tempSongID = "";
                        tempToken = "";
                        tempTokenAddress = "";
                        tempTokenAmount = 0;
                        tempMemo = "";
                        tempID = "";              
            
                        loop2:
                        while (t < totalResults) {
                            currentKey = Object.keys(publicData[0].transactions[0]);
                            currentKey = currentKey[t];
                            j= 0;
                            // cycle through all possible addresses to check for specific from
                            loop3:                            
                            while (j < currentFromArray.length) {

                                // set the first address
                                currentFrom = currentFromArray[j];

                                // check if address/value matches and not already allocated
                                if ((filterXSS(publicData[0].transactions[0][currentKey][0].tokenaddress) === currentFrom) && (filterXSS(publicData[0].transactions[0][currentKey][0].tokenamount) === currentValue) && (currentFrom !== songAddress) && (allocatedArray.indexOf(currentKey) === -1)) {

                                    // get id
                                    tempID = filterXSS(publicData[0].transactions[0][currentKey][0].id);
                                    // get memo and other data
                                    tempAccount = filterXSS(publicData[0].transactions[0][currentKey][0].account);
                                    tempSongID = filterXSS(publicData[0].transactions[0][currentKey][0].songID);
                                    tempToken = filterXSS(publicData[0].transactions[0][currentKey][0].token);
                                    tempTokenAddress = filterXSS(publicData[0].transactions[0][currentKey][0].tokenaddress);
                                    tempTokenAmount = filterXSS(publicData[0].transactions[0][currentKey][0].tokenamount);
                                    tempMemo = filterXSS(publicData[0].transactions[0][currentKey][0].memo);                                                                                                

                                    // add to allocated (used) array to prevent duplicates
                                    allocatedArray.push(currentKey);
                                    
                                    // break out of loop
                                    break loop2;
                                }                                                    

                                j++;
                            }

                            t++;
                        }

                        // validate and check public data item syncs to possible trans
                        validItem = "yes";
                        if (tempID) {

                            if (tempSongID !== songID) {
                                validItem = "no";
                            }

                            if (tempToken !== tokenName) {
                                validItem = "no";
                            }

                            if (tempTokenAddress !== currentFrom) {
                                validItem = "no";
                            }

                            if (resultAddress[k] !== songAddress) {
                                validItem = "no";
                            }

                        } else {
                            validItem = "no";
                        }

                        // reset parse variables
                        parseAccount = "";
                        parseType = "";
                        parseName = "";
                        parseValue = 0;
                        parseData = "";
                        parseVol = -1;
                        parsePan = -1;
                        parseFla = -1;
                        parseTre = -1;
                        parseLow = -1;
                        parseHig = -1;
                        parseAtt = -1;
                        parseRel = -1;
                        parseDis = -1;
                        parseDub = -1;
                        parseTrack = -1;

                        // parse the message                            
                        if ((tempMemo) && (tempMemo.length > 1)) {                 

                            // set length
                            totalLength = tempMemo.length;                        
                            tempEnd = tempMemo.length;
                            countPos = tempMemo.length;                            
                            
                            // sanitize values
                            convertMessage = filterXSS(tempMemo);
                                                        
                            // trim the message
                            convertMessage = convertMessage.trim();
                            
                            // validate the message starts with songID
                            var songIDLength = songID.length;
                            if (convertMessage.substring(0, songIDLength) !== songID) {
                                validItem = "no";
                            }
                            
                            // validate the message contains an account
                            if (validItem === "yes") {

                                // validate 27 character length exists
                                if (convertMessage.length < songIDLength + accountLength) {
                                    validItem = "no";
                                } else {
                                    parseAccount = convertMessage.substring(songIDLength,songIDLength + accountLength);
                                    // validate the account content
                                    for (var j = 0; j < parseAccount.length; j++) {
                                        if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(parseAccount.charAt(j)) < 0) {                            
                                            validItem = "no";
                                        }
                                    } 
                                }                                                                               
                            }

                            // validate the message type is songName/bandName/track
                            if (validItem === "yes") {

                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";

                                } else {
                                    parseType = convertMessage.substring(songIDLength + accountLength,songIDLength + accountLength + 2);

                                    switch (parseType){
                                        case "SN":
                                            parseType = "songName";                                                
                                            break;
                                        case "BN":
                                            parseType = "bandName";
                                            break;
                                        case "BV":
                                            parseType = "bass";                                                
                                            break;
                                        case "DV":
                                            parseType = "drum";                                                
                                            break;
                                        case "RV":
                                            parseType = "rhythm";                                                
                                            break;
                                        case "LV":
                                            parseType = "lead";                                                
                                            break;
                                        case "VV":
                                            parseType = "vocal";
                                            break;                                            
                                        default:
                                            validItem = "no";
                                    }        
                                    
                                }
                            }

                            // if song name, validate parts, check if max
                            if ((validItem === "yes") && (parseType === "songName")) {
                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";
                                } else {                                        
                                    parseName = convertMessage.substring(songIDLength + accountLength + 2,convertMessage.length);
                                    if (!parseName) {
                                        validItem = "no";
                                    // check name length is under 50 characters
                                    } else {
                                        if (parseName.length > 50) {
                                            parseName = convertMessage.substring(songIDLength + accountLength + 2,songIDLength + accountLength + 52);
                                        } else {
                                            parseName = convertMessage.substring(songIDLength + accountLength + 2,convertMessage.length);
                                        }
                                        // detect if current max
                                        if (resultValue[k]) {
                                            parseValue = resultValue[k];
                                        } else {
                                            parseValue = -1;
                                        }
                                        if (isNaN(resultValue[k])) {
                                            parseValue = -1;
                                        }
                                        if (parseValue > currentSongNameMax) {
                                            songName = parseName;
                                            songNameBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentSongNameMax = parseValue;
                                            currentSongTimeStamp = resultTimeStamp[k];
                                            currentSongNameHash = resultHash[k];
                                        } else if ((parseValue === currentSongNameMax) && (parseValue > 0) && (resultTimeStamp[k] < currentSongTimeStamp)) {
                                            // earlier transaction - same value
                                            songName = parseName;
                                            songNameBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentSongNameMax = parseValue;
                                            currentSongTimeStamp = resultTimeStamp[k];
                                            currentSongNameHash = resultHash[k];
                                        }
                                    }
                                }
                            }

                            // if band name, validate parts, check if max
                            if ((validItem === "yes") && (parseType === "bandName")) {
                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";
                                } else {                                             
                                    parseName = convertMessage.substring(songIDLength + accountLength + 2,convertMessage.length);
                                    if (!parseName) {
                                        validItem = "no";
                                    // check name length is under 50 characters
                                    } else { 
                                        if (parseName.length > 50) {
                                            parseName = convertMessage.substring(songIDLength + accountLength + 2,songIDLength + accountLength + 52);
                                        } else {
                                            parseName = convertMessage.substring(songIDLength + accountLength + 2,convertMessage.length);
                                        }
                                        // detect if current max
                                        if (resultValue[k]) {
                                            parseValue = resultValue[k];
                                        } else {
                                            parseValue = -1;
                                        }
                                        if (isNaN(resultValue[k])) {
                                            parseValue = -1;
                                        }
                                        if (parseValue > currentBandNameMax) {
                                            bandName = parseName;
                                            bandNameBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentBandNameMax = parseValue;
                                            currentBandTimeStamp = resultTimeStamp[k];
                                            currentBandNameHash = resultHash[k];
                                        } else if ((parseValue === currentBandNameMax) && (parseValue > 0) && (resultTimeStamp[k] < currentBandTimeStamp)) {
                                            // earlier transaction - same value
                                            bandName = parseName;
                                            bandNameBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentBandNameMax = parseValue;
                                            currentBandTimeStamp = resultTimeStamp[k];
                                            currentBandNameHash = resultHash[k];
                                        }
                                    }
                                }
                            }

                            // if bass, validate parts, check if max
                            if ((validItem === "yes") && (parseType === "bass")) {
                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";
                                } else {                                        
                                    parseData = convertMessage.substring(songIDLength + accountLength,convertMessage.length);
                                    parseVol = checkSetting(parseData,"BV","BP");
                                    parsePan = checkSetting(parseData,"BP","BF");
                                    parseFla = checkSetting(parseData,"BF","BT");
                                    parseTre = checkSetting(parseData,"BT","BL");
                                    parseLow = checkSetting(parseData,"BL","BH");
                                    parseHig = checkSetting(parseData,"BH","BA");
                                    parseAtt = checkSetting(parseData,"BA","BR");
                                    parseRel = checkSetting(parseData,"BR","BDI");
                                    parseDis = checkSetting(parseData,"BDI","BDU");
                                    parseDub = checkSetting(parseData,"BDU","BCT");                                        
                                    parseTrack = checkTrack(parseData,"BCT","END");                                        
                                    if (!parseVol) {validItem = "no";}
                                    if (!parsePan) {validItem = "no";}
                                    if (!parseFla) {validItem = "no";}
                                    if (!parseTre) {validItem = "no";}
                                    if (!parseLow) {validItem = "no";}
                                    if (!parseHig) {validItem = "no";}
                                    if (!parseAtt) {validItem = "no";}
                                    if (!parseRel) {validItem = "no";}
                                    if (!parseDis) {validItem = "no";}
                                    if (!parseDub) {validItem = "no";}
                                    if (!parseTrack) {validItem = "no";}
                                    if (validItem === "yes") {                                            
                                        // detect if current max
                                        if (resultValue[k]) {
                                            parseValue = resultValue[k];
                                        } else {
                                            parseValue = -1;
                                        }
                                        if (isNaN(resultValue[k])) {
                                            parseValue = -1;
                                        }
                                        if (parseValue > currentBassMax) {
                                            bassTrack = parseTrack;
                                            bassVol = parseVol;
                                            bassPan = parsePan;                                     
                                            bassFla = parseFla;
                                            bassTre = parseTre;
                                            bassLow = parseLow;
                                            bassHig = parseHig;
                                            bassAtt = parseAtt;
                                            bassRel = parseRel;
                                            bassDis = parseDis;
                                            bassDub = parseDub;
                                            bassBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentBassMax = parseValue;
                                            currentBassTimeStamp = resultTimeStamp[k];
                                            currentBassHash = resultHash[k];
                                        } else if ((parseValue === currentBassMax) && (parseValue > 0) && (resultTimeStamp[k] < currentBassTimeStamp)) {
                                            // earlier transaction - same value
                                            bassTrack = parseTrack;
                                            bassVol = parseVol;
                                            bassPan = parsePan;
                                            bassFla = parseFla;
                                            bassTre = parseTre;
                                            bassLow = parseLow;
                                            bassHig = parseHig;
                                            bassAtt = parseAtt;
                                            bassRel = parseRel;
                                            bassDis = parseDis;
                                            bassDub = parseDub;
                                            bassBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentBassMax = parseValue;
                                            currentBassTimeStamp = resultTimeStamp[k];
                                            currentBassHash = resultHash[k];
                                        }
                                    }
                                }
                            }

                            // if drum, validate parts, check if max
                            if ((validItem === "yes") && (parseType === "drum")) {

                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";
                                } else {                                        
                                    parseData = convertMessage.substring(songIDLength + accountLength,convertMessage.length);
                                    parseVol = checkSetting(parseData,"DV","DP");
                                    parsePan = checkSetting(parseData,"DP","DF");
                                    parseFla = checkSetting(parseData,"DF","DT");
                                    parseTre = checkSetting(parseData,"DT","DL");
                                    parseLow = checkSetting(parseData,"DL","DH");
                                    parseHig = checkSetting(parseData,"DH","DA");
                                    parseAtt = checkSetting(parseData,"DA","DR");
                                    parseRel = checkSetting(parseData,"DR","DDI");
                                    parseDis = checkSetting(parseData,"DDI","DDU");
                                    parseDub = checkSetting(parseData,"DDU","DCT");                                        
                                    parseTrack = checkTrack(parseData,"DCT","END");                                        
                                    if (!parseVol) {validItem = "no";}
                                    if (!parsePan) {validItem = "no";}
                                    if (!parseFla) {validItem = "no";}
                                    if (!parseTre) {validItem = "no";}
                                    if (!parseLow) {validItem = "no";}
                                    if (!parseHig) {validItem = "no";}
                                    if (!parseAtt) {validItem = "no";}
                                    if (!parseRel) {validItem = "no";}
                                    if (!parseDis) {validItem = "no";}
                                    if (!parseDub) {validItem = "no";}
                                    if (!parseTrack) {validItem = "no";}
                                                                            
                                    if (validItem === "yes") {                                            
                                        // detect if current max
                                        if (resultValue[k]) {
                                            parseValue = resultValue[k];
                                        } else {
                                            parseValue = -1;
                                        }
                                        if (isNaN(resultValue[k])) {
                                            parseValue = -1;
                                        }
                                        if (parseValue > currentDrumMax) {
                                            drumTrack = parseTrack;
                                            drumVol = parseVol;
                                            drumPan = parsePan;
                                            drumFla = parseFla;
                                            drumTre = parseTre;
                                            drumLow = parseLow;
                                            drumHig = parseHig;
                                            drumAtt = parseAtt;
                                            drumRel = parseRel;
                                            drumDis = parseDis;
                                            drumDub = parseDub;
                                            drumBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentDrumMax = parseValue;
                                            currentDrumTimeStamp = resultTimeStamp[k];
                                            currentDrumHash = resultHash[k];
                                        } else if ((parseValue === currentDrumMax) && (parseValue > 0) && (resultTimeStamp[k] < currentDrumTimeStamp)) {                                                     
                                            // earlier transaction - same value
                                            drumTrack = parseTrack;
                                            drumVol = parseVol;
                                            drumPan = parsePan;
                                            drumFla = parseFla;
                                            drumTre = parseTre;
                                            drumLow = parseLow;
                                            drumHig = parseHig;
                                            drumAtt = parseAtt;
                                            drumRel = parseRel;
                                            drumDis = parseDis;
                                            drumDub = parseDub;
                                            drumBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentDrumMax = parseValue;
                                            currentDrumTimeStamp = resultTimeStamp[k];
                                            currentDrumHash = resultHash[k];
                                        }
                                    }
                                }
                            }

                            // if rhythm, validate parts, check if max
                            if ((validItem === "yes") && (parseType === "rhythm")) {
                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";
                                } else {                                        
                                    parseData = convertMessage.substring(songIDLength + accountLength,convertMessage.length);
                                    parseVol = checkSetting(parseData,"RV","RP");
                                    parsePan = checkSetting(parseData,"RP","RF");
                                    parseFla = checkSetting(parseData,"RF","RT");
                                    parseTre = checkSetting(parseData,"RT","RL");
                                    parseLow = checkSetting(parseData,"RL","RH");
                                    parseHig = checkSetting(parseData,"RH","RA");
                                    parseAtt = checkSetting(parseData,"RA","RR");
                                    parseRel = checkSetting(parseData,"RR","RDI");
                                    parseDis = checkSetting(parseData,"RDI","RDU");
                                    parseDub = checkSetting(parseData,"RDU","RCT");                                        
                                    parseTrack = checkTrack(parseData,"RCT","END");                                        
                                    if (!parseVol) {validItem = "no";}
                                    if (!parsePan) {validItem = "no";}
                                    if (!parseFla) {validItem = "no";}
                                    if (!parseTre) {validItem = "no";}
                                    if (!parseLow) {validItem = "no";}
                                    if (!parseHig) {validItem = "no";}
                                    if (!parseAtt) {validItem = "no";}
                                    if (!parseRel) {validItem = "no";}
                                    if (!parseDis) {validItem = "no";}
                                    if (!parseDub) {validItem = "no";}
                                    if (!parseTrack) {validItem = "no";}
                                                                            
                                    if (validItem === "yes") {                                            
                                        // detect if current max
                                        if (resultValue[k]) {
                                            parseValue = resultValue[k];
                                        } else {
                                            parseValue = -1;
                                        }
                                        if (isNaN(resultValue[k])) {
                                            parseValue = -1;
                                        }
                                        if (parseValue > currentRhythmMax) {
                                            rhythmTrack = parseTrack;
                                            rhythmVol = parseVol;
                                            rhythmPan = parsePan;
                                            rhythmFla = parseFla;
                                            rhythmTre = parseTre;
                                            rhythmLow = parseLow;
                                            rhythmHig = parseHig;
                                            rhythmAtt = parseAtt;
                                            rhythmRel = parseRel;
                                            rhythmDis = parseDis;
                                            rhythmDub = parseDub;
                                            rhythmBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentRhythmMax = parseValue;
                                            currentRhythmTimeStamp = resultTimeStamp[k];
                                            currentRhythmHash = resultHash[k];
                                        } else if ((parseValue === currentRhythmMax) && (parseValue > 0) && (resultTimeStamp[k] < currentRhythmTimeStamp)) {
                                            // earlier transaction - same value
                                            rhythmTrack = parseTrack;
                                            rhythmVol = parseVol;
                                            rhythmPan = parsePan;
                                            rhythmFla = parseFla;
                                            rhythmTre = parseTre;
                                            rhythmLow = parseLow;
                                            rhythmHig = parseHig;
                                            rhythmAtt = parseAtt;
                                            rhythmRel = parseRel;
                                            rhythmDis = parseDis;
                                            rhythmDub = parseDub;
                                            rhythmBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentRhythmMax = parseValue;
                                            currentRhythmTimeStamp = resultTimeStamp[k];
                                            currentRhythmHash = resultHash[k];
                                        }
                                    }
                                }
                            }

                            // if lead, validate parts, check if max
                            if ((validItem === "yes") && (parseType === "lead")) {
                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";
                                } else {                                        
                                    parseData = convertMessage.substring(songIDLength + accountLength,convertMessage.length);
                                    parseVol = checkSetting(parseData,"LV","LP");
                                    parsePan = checkSetting(parseData,"LP","LF");
                                    parseFla = checkSetting(parseData,"LF","LT");
                                    parseTre = checkSetting(parseData,"LT","LL");
                                    parseLow = checkSetting(parseData,"LL","LH");
                                    parseHig = checkSetting(parseData,"LH","LA");
                                    parseAtt = checkSetting(parseData,"LA","LR");
                                    parseRel = checkSetting(parseData,"LR","LDI");
                                    parseDis = checkSetting(parseData,"LDI","LDU");
                                    parseDub = checkSetting(parseData,"LDU","LCT");                                        
                                    parseTrack = checkTrack(parseData,"LCT","END");                                        
                                    if (!parseVol) {validItem = "no";}
                                    if (!parsePan) {validItem = "no";}
                                    if (!parseFla) {validItem = "no";}
                                    if (!parseTre) {validItem = "no";}
                                    if (!parseLow) {validItem = "no";}
                                    if (!parseHig) {validItem = "no";}
                                    if (!parseAtt) {validItem = "no";}
                                    if (!parseRel) {validItem = "no";}
                                    if (!parseDis) {validItem = "no";}
                                    if (!parseDub) {validItem = "no";}
                                    if (!parseTrack) {validItem = "no";}
                                                                            
                                    if (validItem === "yes") {                                            
                                        // detect if current max
                                        if (resultValue[k]) {
                                            parseValue = resultValue[k];
                                        } else {
                                            parseValue = -1;
                                        }
                                        if (isNaN(resultValue[k])) {
                                            parseValue = -1;
                                        }
                                        if (parseValue > currentLeadMax) {
                                            leadTrack = parseTrack;
                                            leadVol = parseVol;
                                            leadPan = parsePan;
                                            leadFla = parseFla;
                                            leadTre = parseTre;
                                            leadLow = parseLow;
                                            leadHig = parseHig;
                                            leadAtt = parseAtt;
                                            leadRel = parseRel;
                                            leadDis = parseDis;
                                            leadDub = parseDub;
                                            leadBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentLeadMax = parseValue;
                                            currentLeadTimeStamp = resultTimeStamp[k];
                                            currentLeadHash = resultHash[k];
                                        } else if ((parseValue === currentLeadMax) && (parseValue > 0) && (resultTimeStamp[k] < currentLeadTimeStamp)) {
                                            // earlier transaction - same value
                                            leadTrack = parseTrack;
                                            leadVol = parseVol;
                                            leadPan = parsePan;
                                            leadFla = parseFla;
                                            leadTre = parseTre;
                                            leadLow = parseLow;
                                            leadHig = parseHig;
                                            leadAtt = parseAtt;
                                            leadRel = parseRel;
                                            leadDis = parseDis;
                                            leadDub = parseDub;
                                            leadBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentLeadMax = parseValue;
                                            currentLeadTimeStamp = resultTimeStamp[k];
                                            currentLeadHash = resultHash[k];
                                        }
                                    }
                                }
                            }
                            
                            // if vocal, validate parts, check if max
                            if ((validItem === "yes") && (parseType === "vocal")) {
                                // validate 2 character identifier exists
                                if (convertMessage.length < songIDLength + accountLength + 2) {
                                    validItem = "no";
                                } else {                                        
                                    parseData = convertMessage.substring(songIDLength + accountLength,convertMessage.length);
                                    parseVol = checkSetting(parseData,"VV","VP");
                                    parsePan = checkSetting(parseData,"VP","VF");
                                    parseFla = checkSetting(parseData,"VF","VT");
                                    parseTre = checkSetting(parseData,"VT","VL");
                                    parseLow = checkSetting(parseData,"VL","VH");
                                    parseHig = checkSetting(parseData,"VH","VA");
                                    parseAtt = checkSetting(parseData,"VA","VR");
                                    parseRel = checkSetting(parseData,"VR","VDI");
                                    parseDis = checkSetting(parseData,"VDI","VDU");
                                    parseDub = checkSetting(parseData,"VDU","VCT");                                        
                                    parseTrack = checkTrack(parseData,"VCT","END");                                        
                                    if (!parseVol) {validItem = "no";}
                                    if (!parsePan) {validItem = "no";}
                                    if (!parseFla) {validItem = "no";}
                                    if (!parseTre) {validItem = "no";}
                                    if (!parseLow) {validItem = "no";}
                                    if (!parseHig) {validItem = "no";}
                                    if (!parseAtt) {validItem = "no";}
                                    if (!parseRel) {validItem = "no";}
                                    if (!parseDis) {validItem = "no";}
                                    if (!parseDub) {validItem = "no";}
                                    if (!parseTrack) {validItem = "no";}
                                                                            
                                    if (validItem === "yes") {                                            
                                        // detect if current max
                                        if (resultValue[k]) {
                                            parseValue = resultValue[k];
                                        } else {
                                            parseValue = -1;
                                        }
                                        if (isNaN(resultValue[k])) {
                                            parseValue = -1;
                                        }
                                        if (parseValue > currentVocalMax) {
                                            vocalTrack = parseTrack;
                                            vocalVol = parseVol;
                                            vocalPan = parsePan;
                                            vocalFla = parseFla;
                                            vocalTre = parseTre;
                                            vocalLow = parseLow;
                                            vocalHig = parseHig;
                                            vocalAtt = parseAtt;
                                            vocalRel = parseRel;
                                            vocalDis = parseDis;
                                            vocalDub = parseDub;
                                            vocalBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentVocalMax = parseValue;
                                            currentVocalTimeStamp = resultTimeStamp[k];
                                            currentVocalHash = resultHash[k];
                                        } else if ((parseValue === currentVocalMax) && (parseValue > 0) && (resultTimeStamp[k] < currentVocalTimeStamp)) {
                                            // earlier transaction - same value
                                            vocalTrack = parseTrack;
                                            vocalVol = parseVol;
                                            vocalPan = parsePan;
                                            vocalFla = parseFla;
                                            vocalTre = parseTre;
                                            vocalLow = parseLow;
                                            vocalHig = parseHig;
                                            vocalAtt = parseAtt;
                                            vocalRel = parseRel;
                                            vocalDis = parseDis;
                                            vocalDub = parseDub;
                                            vocalBid = parseFloat(parseValue) + parseFloat(bidIncrement);
                                            currentVocalMax = parseValue;
                                            currentVocalTimeStamp = resultTimeStamp[k];
                                            currentVocalHash = resultHash[k];
                                        }
                                    }
                                }
                            }

                            function checkSetting(message,startCode,endCode) {
                                var setting = false;
                                var startPos = 0;
                                var endPos = 0;
                                // check if no ending - last setting
                                if (endCode === "END") {
                                    // set the position of the end to the string length
                                    endPos = message.length;
                                } else {
                                    // get the position of the end
                                    endPos = message.indexOf(endCode);
                                }

                                // get the position of the start      
                                startPos = message.indexOf(startCode);                                  

                                // if positions are valid                                        
                                if ((startPos >=0) && (endPos > startPos)) {
                                    
                                    // get the setting between start and end                                        
                                    setting = message.substring(startPos + startCode.length,endPos);

                                    // convert back dots
                                    setting = setting.replace(/d/g, "\.");

                                    // convert to float with 1 decimal
                                    setting = parseFloat(setting).toFixed(1);

                                    // check value is valid
                                    if (!setting) {
                                        setting = false;
                                    }

                                    // check value is valid
                                    if (isNaN(setting)) {
                                        setting = false;
                                    }

                                    // check value is valid
                                    if ((setting < 0) || (setting > 1.0)) {
                                        setting = false
                                    }                                        
                                
                                }
                                
                                return setting;
                            }

                            function checkTrack(message,startCode,endCode) {
                                var setting = false;
                                var startPos = 0;
                                var endPos = 0;
                                // check if no ending - last setting
                                if (endCode === "END") {
                                    // set the position of the end to the string length
                                    endPos = message.length;
                                } else {
                                    // get the position of the end
                                    endPos = message.indexOf(endCode);
                                }

                                // get the position of the start      
                                startPos = message.indexOf(startCode);                                  

                                // if positions are valid                                        
                                if ((startPos >=0) && (endPos > startPos)) {
                                    
                                    // get the setting between start and end                                        
                                    setting = message.substring(startPos + startCode.length,endPos);
                            
                                    // check value is valid
                                    if (!setting) {
                                        setting = false;
                                    }
                                            
                                }
                                
                                return setting;
                            }
                                                                                            
                        } else {

                            // item is not valid
                            validItem = "no";
                        }
                        
                        k++;
                    }                         
                    
                    // initialize data - either no results or current results
                    initData();
                } // close parseMemo function                    
                                                        
            }                                                        
        }
  
        function initData() {
            
            // in initialize all states to confirmed
            $("#songNameState").hide();                                                                                            
            $("#bandNameState").hide();                                                        
            $("#bassState").text("Threshold");                                                                                            
            $("#drumState").text("Threshold");                                                        
            $("#rhythmState").text("Threshold");                
            $("#leadState").text("Threshold");                
            $("#vocalState").text("Threshold");                                                    

            // validate state
            if (!songID) {
                songID = "";
                alert("There is a problem with the song ID. Please open an issue on github.")
                return false;
            }        
            if ((songID.length < 1) || (songID.length > 100)) {
                songID = "";
                alert("There is a problem with the song ID. Please open an issue on github.")
                return false;
            }        
            if (!songAddress) {
                songAddress = "";
                alert("There is a problem with the token address for this song. Please open an issue on github.")
                return false;
            }        
            if ((songAddress.length < 1) || (songAddress.length > 100)) {
                songAddress = "";
                alert("There is a problem with the token address for this song. Please open an issue on github.")
                return false;
            }        
            if (!songName) {
                songName = "Crypto Song";            
                return false;
            }        
            if ((songName.length < 1) || (songName.length > 50)) {
                songName = "Crypto Song";                        
                return false;
            }        
            if (!bandName) {
                bandName = "Crypto Band";            
                return false;
            }        
            if ((bandName.length < 1) || (bandName.length > 50)) {
                bandName = "Crypto Band";                        
                return false;
            }        
            
            // divide to convert 8 placed units to 1.0 btc
            songNameBid = validateBid(songNameBid)/100000000;        
            bandNameBid = validateBid(bandNameBid)/100000000;        
            bassBid = validateBid(bassBid)/100000000;        
            drumBid = validateBid(drumBid)/100000000;        
            rhythmBid = validateBid(rhythmBid)/100000000;        
            leadBid = validateBid(leadBid)/100000000;        
            vocalBid = validateBid(vocalBid)/100000000;                        
            
            // validate bids
            function validateBid(valueBid) {
                if (!valueBid) {
                    valueBid = bidMinimum;
                }
                if (isNaN(valueBid)) {
                    valueBid = bidMinimum;
                }
                if (valueBid < bidMinimum) {
                    valueBid = bidMinimum;
                }
                return valueBid;
            }
            
            songNameThresh = "" + songNameBid.toFixed(DISPLAYDECIMALS) + " " + tokenName;        
            bandNameThresh = "" + bandNameBid.toFixed(DISPLAYDECIMALS) + " " + tokenName;        
            bassThresh = "" + bassBid.toFixed(DISPLAYDECIMALS) + " " + tokenName;        
            drumThresh = "" + drumBid.toFixed(DISPLAYDECIMALS) + " " + tokenName;        
            rhythmThresh = "" + rhythmBid.toFixed(DISPLAYDECIMALS) + " " + tokenName;        
            leadThresh = "" + leadBid.toFixed(DISPLAYDECIMALS) + " " + tokenName;        
            vocalThresh = "" + vocalBid.toFixed(DISPLAYDECIMALS) + " " + tokenName;        
            
            // set amount placeholder based on threshold        
            $("#tokenAmountSongName").attr("placeholder", " At least " + filterXSS(songNameBid.toFixed(DISPLAYDECIMALS)));                
            $("#tokenAmountBandName").attr("placeholder", " At least " + filterXSS(bandNameBid.toFixed(DISPLAYDECIMALS)));                
            $("#tokenAmountBass").attr("placeholder", " At least " + filterXSS(bassBid.toFixed(DISPLAYDECIMALS)));                
            $("#tokenAmountDrum").attr("placeholder", " At least " + filterXSS(drumBid.toFixed(DISPLAYDECIMALS)));                
            $("#tokenAmountRhythm").attr("placeholder", " At least " + filterXSS(rhythmBid.toFixed(DISPLAYDECIMALS)));                
            $("#tokenAmountLead").attr("placeholder", " At least " + filterXSS(leadBid.toFixed(DISPLAYDECIMALS)));                
            $("#tokenAmountVocal").attr("placeholder", " At least " + filterXSS(vocalBid.toFixed(DISPLAYDECIMALS)));                
            
            if (!bassVol) {
                bassVol = 0.0;
            }
            if (isNaN(bassVol)) {
                bassVol = 0.5;
            }
            if ((bassVol < 0.0) || (bassVol > 1.0)) {
                bassVol = 0.5;
            }
            if (!bassPan) {
                bassPan = 0.0;
            }
            if (isNaN(bassPan)) {
                bassPan = 0.4;
            }
            if ((bassPan < 0) || (bassPan > 1.0)) {
                bassPan = 0.4;
            }                        
            
            bassFla = validateSetting(bassFla);
            bassTre = validateSetting(bassTre);
            bassLow = validateSetting(bassLow);
            bassHig = validateSetting(bassHig);
            bassAtt = validateSetting(bassAtt);
            bassRel = validateSetting(bassRel);        
            bassDub = validateSetting(bassDub);        
            bassDis = validateSetting(bassDis);        
            
            function validateSetting(bassValue) {
                if (!bassValue) {
                    bassValue = 0.0;
                }
                if (isNaN(bassValue)) {
                    bassValue = 0.0;
                }
                if ((bassValue < 0.0) || (bassValue > 1.0)) {
                    bassValue = 0.0;
                }
                return bassValue;
            }
            
            switch (bassTrack){
                case "bass1":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass1.mp3';
                    bassCurrentTrack = "Sharpness with Acid Bass";
                    break;
                case "bass2":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass2.mp3';
                    bassCurrentTrack = "Round and Happy Bass";
                    break;
                case "bass3":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass3.mp3';
                    bassCurrentTrack = "Smooth and Delicious Bass";
                    break;
                case "bass4":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass4.mp3';
                    bassCurrentTrack = "Mechanical Robot Bass";
                    break;
                case "bass5":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass5.mp3';
                    bassCurrentTrack = "Thumpy and Edgy Bass";
                    break;
                case "bass6":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass6.mp3';
                    bassCurrentTrack = "Slappy Pulsing Bass";
                    break;
                case "bass7":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass7.mp3';
                    bassCurrentTrack = "Big Bad Jazzman Bass";
                    break;
                case "bass8":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass8.mp3';
                    bassCurrentTrack = "Deep House Bass";
                    break;
                case "bass9":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass9.mp3';
                    bassCurrentTrack = "Crunchy Gulp Bass";
                    break;
                case "bass10":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass10.mp3';
                    bassCurrentTrack = "Quick Running Bass";
                    break;
                default:
                    bassTrack = "bass1";
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass1.mp3';
                    bassCurrentTrack = "Sharpness with Acid Bass";
            }        

            // round all values to 1 decimal
            bassVol = Math.round( bassVol * 10 ) / 10;
            bassPan = Math.round( bassPan * 10 ) / 10;                
            bassFla = Math.round( bassFla * 10 ) / 10;                
            bassTre = Math.round( bassTre * 10 ) / 10;                
            bassLow = Math.round( bassLow * 10 ) / 10;                
            bassHig = Math.round( bassHig * 10 ) / 10;                
            bassAtt = Math.round( bassAtt * 10 ) / 10;                
            bassRel = Math.round( bassRel * 10 ) / 10;                
            bassDub = Math.round( bassDub * 10 ) / 10;                
            bassDis = Math.round( bassDis * 10 ) / 10;                

            // validate state
            if (!drumVol) {
                drumVol = 0.0;
            }
            if (isNaN(drumVol)) {
                drumVol = 0.5;
            }
            if ((drumVol < 0.0) || (drumVol > 1.0)) {
                drumVol = 0.5;
            }
            if (!drumPan) {
                drumPan = 0.0;
            }
            if (isNaN(drumPan)) {
                drumPan = 0.55;
            }
            if ((drumPan < 0) || (drumPan > 1.0)) {
                drumPan = 0.55;
            }                        
            
            drumFla = validateSetting(drumFla);
            drumTre = validateSetting(drumTre);
            drumLow = validateSetting(drumLow);
            drumHig = validateSetting(drumHig);
            drumAtt = validateSetting(drumAtt);
            drumRel = validateSetting(drumRel);        
            drumDub = validateSetting(drumDub);        
            drumDis = validateSetting(drumDis);        
            
            function validateSetting(drumValue) {
                if (!drumValue) {
                    drumValue = 0.0;
                }
                if (isNaN(drumValue)) {
                    drumValue = 0.0;
                }
                if ((drumValue < 0.0) || (drumValue > 1.0)) {
                    drumValue = 0.0;
                }
                return drumValue;
            }

            switch (drumTrack){
                case "drum1":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum1.mp3';
                    drumCurrentTrack = "Constant Rhythmic Drum";
                    break;
                case "drum2":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum2.mp3';
                    drumCurrentTrack = "Ginger Heartbeat Drum";
                    break;
                case "drum3":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum3.mp3';
                    drumCurrentTrack = "Summer Shaking Drum";
                    break;
                case "drum4":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum4.mp3';
                    drumCurrentTrack = "Skip Party Drum";
                    break;
                case "drum5":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum5.mp3';
                    drumCurrentTrack = "Peanut Butter and Jam Drum";
                    break;
                case "drum6":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum6.mp3';
                    drumCurrentTrack = "Cucumber Techno Drum";
                    break;
                case "drum7":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum7.mp3';
                    drumCurrentTrack = "Come On Home Drum";
                    break;
                case "drum8":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum8.mp3';
                    drumCurrentTrack = "Lisp with Yelp Drum";
                    break;
                case "drum9":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum9.mp3';
                    drumCurrentTrack = "Quicken Lane Drum";
                    break;
                case "drum10":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum10.mp3';
                    drumCurrentTrack = "Clap Your Hands Drum";
                    break;
                default:
                    drumTrack = "drum1";
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum1.mp3';
                    drumCurrentTrack = "Constant Rhythmic Drum";
            }        

            // round all values to 1 decimal
            drumVol = Math.round( drumVol * 10 ) / 10;
            drumPan = Math.round( drumPan * 10 ) / 10;                
            drumFla = Math.round( drumFla * 10 ) / 10;                
            drumTre = Math.round( drumTre * 10 ) / 10;                
            drumLow = Math.round( drumLow * 10 ) / 10;                
            drumHig = Math.round( drumHig * 10 ) / 10;                
            drumAtt = Math.round( drumAtt * 10 ) / 10;                
            drumRel = Math.round( drumRel * 10 ) / 10;                
            drumDub = Math.round( drumDub * 10 ) / 10;                
            drumDis = Math.round( drumDis * 10 ) / 10;                

            // validate state
            if (!rhythmVol) {
                rhythmVol = 0.0;
            }
            if (isNaN(rhythmVol)) {
                rhythmVol = 0.5;
            }
            if ((rhythmVol < 0.0) || (rhythmVol > 1.0)) {
                rhythmVol = 0.5;
            }
            if (!rhythmPan) {
                rhythmPan = 0.0;
            }
            if (isNaN(rhythmPan)) {
                rhythmPan = 0.3;
            }
            if ((rhythmPan < 0) || (rhythmPan > 1.0)) {
                rhythmPan = 0.3;
            }                        
            
            rhythmFla = validateSetting(rhythmFla);
            rhythmTre = validateSetting(rhythmTre);
            rhythmLow = validateSetting(rhythmLow);
            rhythmHig = validateSetting(rhythmHig);
            rhythmAtt = validateSetting(rhythmAtt);
            rhythmRel = validateSetting(rhythmRel);        
            rhythmDub = validateSetting(rhythmDub);        
            rhythmDis = validateSetting(rhythmDis);        
            
            function validateSetting(rhythmValue) {
                if (!rhythmValue) {
                    rhythmValue = 0.0;
                }
                if (isNaN(rhythmValue)) {
                    rhythmValue = 0.0;
                }
                if ((rhythmValue < 0.0) || (rhythmValue > 1.0)) {
                    rhythmValue = 0.0;
                }
                return rhythmValue;
            }
            
            switch (rhythmTrack){
                case "rhythm1":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm1.mp3';
                    rhythmCurrentTrack = "Clean Winter Guitar Rhythm";
                    break;
                case "rhythm2":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm2.mp3';
                    rhythmCurrentTrack = "Straight Amber Guitar Rhythm";
                    break;
                case "rhythm3":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm3.mp3';
                    rhythmCurrentTrack = "Staccato Bop Guitar Rhythm";
                    break;
                case "rhythm4":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm4.mp3';
                    rhythmCurrentTrack = "Brassy Horns Rhythm";
                    break;
                case "rhythm5":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm5.mp3';
                    rhythmCurrentTrack = "Lovely Flow Horns Rhythm";
                    break;
                case "rhythm6":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm6.mp3';
                    rhythmCurrentTrack = "Cave Wind Rhythm";
                    break;
                case "rhythm7":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm7.mp3';
                    rhythmCurrentTrack = "Future Electronic Rhythm";
                    break;
                case "rhythm8":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm8.mp3';
                    rhythmCurrentTrack = "Bubble Synth Rhythm";
                    break;
                case "rhythm9":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm9.mp3';
                    rhythmCurrentTrack = "Tambourine Woman Rhythm";
                    break;
                case "rhythm10":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm10.mp3';
                    rhythmCurrentTrack = "Irish Hills Rhythm";
                    break;
                default:
                    rhythmTrack = "rhythm1";
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm1.mp3';
                    rhythmCurrentTrack = "Clean Winter Guitar Rhythm";
            }        

            // round all values to 1 decimal
            rhythmVol = Math.round( rhythmVol * 10 ) / 10;
            rhythmPan = Math.round( rhythmPan * 10 ) / 10;                
            rhythmFla = Math.round( rhythmFla * 10 ) / 10;                
            rhythmTre = Math.round( rhythmTre * 10 ) / 10;                
            rhythmLow = Math.round( rhythmLow * 10 ) / 10;                
            rhythmHig = Math.round( rhythmHig * 10 ) / 10;                
            rhythmAtt = Math.round( rhythmAtt * 10 ) / 10;                
            rhythmRel = Math.round( rhythmRel * 10 ) / 10;                
            rhythmDub = Math.round( rhythmDub * 10 ) / 10;                
            rhythmDis = Math.round( rhythmDis * 10 ) / 10;                
            
            // validate state
            if (!leadVol) {
                leadVol = 0.0;
            }
            if (isNaN(leadVol)) {
                leadVol = 0.5;
            }
            if ((leadVol < 0.0) || (leadVol > 1.0)) {
                leadVol = 0.5;
            }
            if (!leadPan) {
                leadPan = 0.0;
            }
            if (isNaN(leadPan)) {
                leadPan = 0.6;
            }
            if ((leadPan < 0) || (leadPan > 1.0)) {
                leadPan = 0.6;
            }                        
            
            leadFla = validateSetting(leadFla);
            leadTre = validateSetting(leadTre);
            leadLow = validateSetting(leadLow);
            leadHig = validateSetting(leadHig);
            leadAtt = validateSetting(leadAtt);
            leadRel = validateSetting(leadRel);        
            leadDub = validateSetting(leadDub);        
            leadDis = validateSetting(leadDis);        
            
            function validateSetting(leadValue) {
                if (!leadValue) {
                    leadValue = 0.0;
                }
                if (isNaN(leadValue)) {
                    leadValue = 0.0;
                }
                if ((leadValue < 0.0) || (leadValue > 1.0)) {
                    leadValue = 0.0;
                }
                return leadValue;
            }
            
            switch (leadTrack){
                case "lead1":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead1.mp3';
                    leadCurrentTrack = "Red Machine Synth Lead";
                    break;
                case "lead2":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead2.mp3';
                    leadCurrentTrack = "Sweeping Waterfall Lead";
                    break;
                case "lead3":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead3.mp3';
                    leadCurrentTrack = "Sweet Rainbow Guitar Lead";
                    break;
                case "lead4":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead4.mp3';
                    leadCurrentTrack = "Tinker Toy Bell Lead";
                    break;
                case "lead5":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead5.mp3';
                    leadCurrentTrack = "Celtic Fiddler Lead";
                    break;
                case "lead6":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead6.mp3';
                    leadCurrentTrack = "Breakbeat Filter Lead";
                    break;
                case "lead7":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead7.mp3';
                    leadCurrentTrack = "English Teletype Lead";
                    break;
                case "lead8":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead8.mp3';
                    leadCurrentTrack = "Common Street Guitar Lead";
                    break;
                case "lead9":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead9.mp3';
                    leadCurrentTrack = "Hard Electric Guitar Lead";
                    break;
                case "lead10":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead10.mp3';
                    leadCurrentTrack = "Busby Saxophone Lead";
                    break;
                case "lead11":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead11.mp3';
                    leadCurrentTrack = "Swing Street Sax Lead";
                    break;
                case "lead12":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead12.mp3';
                    leadCurrentTrack = "Broadway Street Sax Lead";
                    break;
                case "lead13":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead13.mp3';
                    leadCurrentTrack = "Concert Strings Lead";
                    break;
                case "lead14":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead14.mp3';
                    leadCurrentTrack = "Movement Synth Lead";
                    break;
                case "lead15":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead15.mp3';
                    leadCurrentTrack = "Tomorrow Slam Lead";
                    break;
                default:
                    leadTrack = "lead1";
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead1.mp3';
                    leadCurrentTrack = "Red Machine Synth Lead";
            }        

            // round all values to 1 decimal
            leadVol = Math.round( leadVol * 10 ) / 10;
            leadPan = Math.round( leadPan * 10 ) / 10;                
            leadFla = Math.round( leadFla * 10 ) / 10;                
            leadTre = Math.round( leadTre * 10 ) / 10;                
            leadLow = Math.round( leadLow * 10 ) / 10;                
            leadHig = Math.round( leadHig * 10 ) / 10;                
            leadAtt = Math.round( leadAtt * 10 ) / 10;                
            leadRel = Math.round( leadRel * 10 ) / 10;                
            leadDub = Math.round( leadDub * 10 ) / 10;                
            leadDis = Math.round( leadDis * 10 ) / 10;                
            
            // validate state
            if (!vocalVol) {
                vocalVol = 0.0;
            }
            if (isNaN(vocalVol)) {
                vocalVol = 0.5;
            }
            if ((vocalVol < 0.0) || (vocalVol > 1.0)) {
                vocalVol = 0.5;
            }
            if (!vocalPan) {
                vocalPan = 0.0;
            }
            if (isNaN(vocalPan)) {
                vocalPan = 0.5;
            }
            if ((vocalPan < 0) || (vocalPan > 1.0)) {
                vocalPan = 0.5;
            }                        
            
            vocalFla = validateSetting(vocalFla);
            vocalTre = validateSetting(vocalTre);
            vocalLow = validateSetting(vocalLow);
            vocalHig = validateSetting(vocalHig);
            vocalAtt = validateSetting(vocalAtt);
            vocalRel = validateSetting(vocalRel);        
            vocalDub = validateSetting(vocalDub);        
            vocalDis = validateSetting(vocalDis);        
            
            function validateSetting(vocalValue) {
                if (!vocalValue) {
                    vocalValue = 0.0;
                }
                if (isNaN(vocalValue)) {
                    vocalValue = 0.0;
                }
                if ((vocalValue < 0.0) || (vocalValue > 1.0)) {
                    vocalValue = 0.0;
                }
                return vocalValue;
            }
            
            switch (vocalTrack){
                case "vocal1":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal1.mp3';
                    vocalCurrentTrack = "Female Ah Chant Vocal";
                    break;
                case "vocal2":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal2.mp3';
                    vocalCurrentTrack = "Stumpy Breaking Vocal";
                    break;
                case "vocal3":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal3.mp3';
                    vocalCurrentTrack = "Funk Machine Vocal";
                    break;
                case "vocal4":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal4.mp3';
                    vocalCurrentTrack = "Da Da Da Da Da Da Vocal";
                    break;
                case "vocal5":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal5.mp3';
                    vocalCurrentTrack = "Super Syrupy Vocal";
                    break;
                case "vocal6":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal6.mp3';
                    vocalCurrentTrack = "Modern Humming Vocal";
                    break;
                case "vocal7":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal7.mp3';
                    vocalCurrentTrack = "Boop Boop Boop Vocal";
                    break;
                case "vocal8":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal8.mp3';
                    vocalCurrentTrack = "Crescendo Cry Vocal";
                    break;
                case "vocal9":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal9.mp3';
                    vocalCurrentTrack = "Car Engine Crisp Vocal";
                    break;
                case "vocal10":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal10.mp3';
                    vocalCurrentTrack = "Ooh Ooh Ooh Vocal";
                    break;
                case "vocal11":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal11.mp3';
                    vocalCurrentTrack = "Big Bad Boh Vocal";
                    break;
                case "vocal12":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal12.mp3';
                    vocalCurrentTrack = "Wisp Mouth Break Vocal";
                    break;
                case "vocal13":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal13.mp3';
                    vocalCurrentTrack = "Da Da Da Da Da Dum Vocal";
                    break;
                case "vocal14":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal14.mp3';
                    vocalCurrentTrack = "Moving Message Vocal";
                    break;
                case "vocal15":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal15.mp3';
                    vocalCurrentTrack = "Moving Music Vocal";
                    break;
                default:
                    vocalTrack = "vocal1";
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal1.mp3';
                    vocalCurrentTrack = "Female Ah Chant Vocal";
            }        

            // round all values to 1 decimal
            vocalVol = Math.round( vocalVol * 10 ) / 10;
            vocalPan = Math.round( vocalPan * 10 ) / 10;                
            vocalFla = Math.round( vocalFla * 10 ) / 10;                
            vocalTre = Math.round( vocalTre * 10 ) / 10;                
            vocalLow = Math.round( vocalLow * 10 ) / 10;                
            vocalHig = Math.round( vocalHig * 10 ) / 10;                
            vocalAtt = Math.round( vocalAtt * 10 ) / 10;                
            vocalRel = Math.round( vocalRel * 10 ) / 10;                
            vocalDub = Math.round( vocalDub * 10 ) / 10;                
            vocalDis = Math.round( vocalDis * 10 ) / 10;                
            
            // set the main track to the bass track
            mainTrack = bassTrack;
            mainTrackSource = bassTrackSource;
            mainCurrentTrack = bassCurrentTrack;

            // check that all tracks are not muted
            if ((bassVol <= 0.1) && (drumVol <= 0.1) && (rhythmVol <= 0.1) && (leadVol <= 0.1) && (vocalVol <= 0.1)) {
                // set the default bass volume
                bassVol = 0.5;
            }        
        
            drum = new Pizzicato.Sound({ 
                source: 'file',
                options: { 
                    path: [drumTrackSource],
                    volume: drumVol,
                    release: drumRel,
                    attack: drumAtt,
                    detached: false
                }
            }, function(error) {
                if (error) {
                    alert('Your internet connection may down. Drum audio did not load. Try reloading page.');
                }
            });

            bass = new Pizzicato.Sound({ 
                source: 'file',
                options: { 
                    path: [bassTrackSource],
                    volume: bassVol,
                    release: bassRel,
                    attack: bassAtt,
                    detached: false
                }
            }, function(error) {
                if (error) {
                    alert('Your internet connection may down. Bass audio did not load. Try reloading page.');
                }
            });

            rhythm = new Pizzicato.Sound({ 
                source: 'file',
                options: { 
                    path: [rhythmTrackSource],
                    volume: rhythmVol,
                    release: rhythmRel,
                    attack: rhythmAtt,
                    detached: false
                }
            }, function(error) {
                if (error) {
                    alert('Your internet connection may down. Rhythm audio did not load. Try reloading page.');
                }
            });                     

            lead = new Pizzicato.Sound({ 
                source: 'file',
                options: { 
                    path: [leadTrackSource],
                    volume: leadVol,
                    release: leadRel,
                    attack: leadAtt,
                    detached: false
                }
            }, function(error) {
                if (error) {
                    alert('Your internet connection may down. Lead audio did not load. Try reloading page.');
                }
            });

            vocal = new Pizzicato.Sound({ 
                source: 'file',
                options: { 
                    path: [vocalTrackSource],
                    volume: vocalVol,
                    release: vocalRel,
                    attack: vocalAtt,
                    detached: false
                }
            }, function(error) {
                if (error) {
                    alert('Your internet connection may down. Vocal audio did not load. Try reloading page.');
                }
            });

            bassFXFla = new Pizzicato.Effects.Flanger({
                time: 0.48,
                speed: bassFla,
                depth: 0.41,
                feedback: 0.11,
                mix: 0.3
            });
            bassFXLow = new Pizzicato.Effects.LowPassFilter({
                frequency: Math.round( bassLow * 22000),
                peak: 10
            });
            bassFXHig = new Pizzicato.Effects.HighPassFilter({
                frequency: Math.round( bassHig * 22000),
                peak: 10
            });
            bassFXPan = new Pizzicato.Effects.StereoPanner({
                pan: Math.round( ((bassPan * 2) - 1) * 10 ) / 10,
            });        
            bassFXTre = new Pizzicato.Effects.Tremolo({
                speed: Math.round( bassTre * 20 * 10 ) / 10,
                depth: .3,
                mix: 0.3
            });
            bassFXDub = new Pizzicato.Effects.DubDelay({
                feedback: 0.2,
                time: Math.round( bassDub * 10 ) / 10,
                mix: 0.3,
                cutoff: 2000
            });
            bassFXDis = new Pizzicato.Effects.Distortion({
                gain: Math.round( bassDis * 0.15 * 10 ) / 10,
            });

            drumFXFla = new Pizzicato.Effects.Flanger({
                time: 0.48,
                speed: drumFla,
                depth: 0.41,
                feedback: 0.11,
                mix: 0.3
            });
            drumFXLow = new Pizzicato.Effects.LowPassFilter({
                frequency: Math.round( drumLow * 22000),
                peak: 10
            });
            drumFXHig = new Pizzicato.Effects.HighPassFilter({
                frequency: Math.round( drumHig * 22000),
                peak: 10
            });
            drumFXPan = new Pizzicato.Effects.StereoPanner({
                pan: Math.round( ((drumPan * 2) - 1) * 10 ) / 10,
            });        
            drumFXTre = new Pizzicato.Effects.Tremolo({
                speed: Math.round( drumTre * 20 * 10 ) / 10,
                depth: .3,
                mix: 0.3
            });
            drumFXDub = new Pizzicato.Effects.DubDelay({
                feedback: 0.2,
                time: Math.round( drumDub * 10 ) / 10,
                mix: 0.3,
                cutoff: 2000
            });
            drumFXDis = new Pizzicato.Effects.Distortion({
                gain: Math.round( drumDis * 0.15 * 10 ) / 10,
            });

            rhythmFXFla = new Pizzicato.Effects.Flanger({
                time: 0.48,
                speed: rhythmFla,
                depth: 0.41,
                feedback: 0.11,
                mix: 0.3
            });
            rhythmFXLow = new Pizzicato.Effects.LowPassFilter({
                frequency: Math.round( rhythmLow * 22000),
                peak: 10
            });
            rhythmFXHig = new Pizzicato.Effects.HighPassFilter({
                frequency: Math.round( rhythmHig * 22000),
                peak: 10
            });
            rhythmFXPan = new Pizzicato.Effects.StereoPanner({
                pan: Math.round( ((rhythmPan * 2) - 1) * 10 ) / 10,
            });        
            rhythmFXTre = new Pizzicato.Effects.Tremolo({
                speed: Math.round( rhythmTre * 20 * 10 ) / 10,
                depth: .3,
                mix: 0.3
            });
            rhythmFXDub = new Pizzicato.Effects.DubDelay({
                feedback: 0.2,
                time: Math.round( rhythmDub * 10 ) / 10,
                mix: 0.3,
                cutoff: 2000
            });
            rhythmFXDis = new Pizzicato.Effects.Distortion({
                gain: Math.round( rhythmDis * 0.15 * 10 ) / 10,
            });

            leadFXFla = new Pizzicato.Effects.Flanger({
                time: 0.48,
                speed: leadFla,
                depth: 0.41,
                feedback: 0.11,
                mix: 0.3
            });
            leadFXLow = new Pizzicato.Effects.LowPassFilter({
                frequency: Math.round( leadLow * 22000),
                peak: 10
            });
            leadFXHig = new Pizzicato.Effects.HighPassFilter({
                frequency: Math.round( leadHig * 22000),
                peak: 10
            });
            leadFXPan = new Pizzicato.Effects.StereoPanner({
                pan: Math.round( ((leadPan * 2) - 1) * 10 ) / 10,
            });        
            leadFXTre = new Pizzicato.Effects.Tremolo({
                speed: Math.round( leadTre * 20 * 10 ) / 10,
                depth: .3,
                mix: 0.3
            });
            leadFXDub = new Pizzicato.Effects.DubDelay({
                feedback: 0.2,
                time: Math.round( leadDub * 10 ) / 10,
                mix: 0.3,
                cutoff: 2000
            });
            leadFXDis = new Pizzicato.Effects.Distortion({
                gain: Math.round( leadDis * 0.15 * 10 ) / 10,
            });

            vocalFXFla = new Pizzicato.Effects.Flanger({
                time: 0.48,
                speed: vocalFla,
                depth: 0.41,
                feedback: 0.11,
                mix: 0.3
            });
            vocalFXLow = new Pizzicato.Effects.LowPassFilter({
                frequency: Math.round( vocalLow * 22000),
                peak: 10
            });
            vocalFXHig = new Pizzicato.Effects.HighPassFilter({
                frequency: Math.round( vocalHig * 22000),
                peak: 10
            });
            vocalFXPan = new Pizzicato.Effects.StereoPanner({
                pan: Math.round( ((vocalPan * 2) - 1) * 10 ) / 10,
            });        
            vocalFXTre = new Pizzicato.Effects.Tremolo({
                speed: Math.round( vocalTre * 20 * 10 ) / 10,
                depth: .3,
                mix: 0.3
            });
            vocalFXDub = new Pizzicato.Effects.DubDelay({
                feedback: 0.2,
                time: Math.round( vocalDub * 10 ) / 10,
                mix: 0.3,
                cutoff: 2000
            });
            vocalFXDis = new Pizzicato.Effects.Distortion({
                gain: Math.round( vocalDis * 0.15 * 10 ) / 10,
            });
                            
            // set initial effects                
            bass.addEffect(bassFXPan);
            if (bassFla >= 0.1) {bass.addEffect(bassFXFla)}
            if (bassLow >= 0.1) {bass.addEffect(bassFXLow)}
            if (bassHig >= 0.1) {bass.addEffect(bassFXHig)}                                
            if (bassTre >= 0.1) {bass.addEffect(bassFXTre)}                    
            if (bassDub >= 0.1) {bass.addEffect(bassFXDub)}                    
            if (bassDis >= 0.1) {bass.addEffect(bassFXDis)}                    
            
            // set initial effects        
            drum.addEffect(drumFXPan);
            if (drumFla >= 0.1) {drum.addEffect(drumFXFla)}
            if (drumLow >= 0.1) {drum.addEffect(drumFXLow)}
            if (drumHig >= 0.1) {drum.addEffect(drumFXHig)}                                
            if (drumTre >= 0.1) {drum.addEffect(drumFXTre)}                    
            if (drumDub >= 0.1) {drum.addEffect(drumFXDub)}                    
            if (drumDis >= 0.1) {drum.addEffect(drumFXDis)}                    
            
            // set initial effects        
            rhythm.addEffect(rhythmFXPan);
            if (rhythmFla >= 0.1) {rhythm.addEffect(rhythmFXFla)}
            if (rhythmLow >= 0.1) {rhythm.addEffect(rhythmFXLow)}
            if (rhythmHig >= 0.1) {rhythm.addEffect(rhythmFXHig)}                                
            if (rhythmTre >= 0.1) {rhythm.addEffect(rhythmFXTre)}                    
            if (rhythmDub >= 0.1) {rhythm.addEffect(rhythmFXDub)}                    
            if (rhythmDis >= 0.1) {rhythm.addEffect(rhythmFXDis)}                    
            
            // set initial effects        
            lead.addEffect(leadFXPan);
            if (leadFla >= 0.1) {lead.addEffect(leadFXFla)}
            if (leadLow >= 0.1) {lead.addEffect(leadFXLow)}
            if (leadHig >= 0.1) {lead.addEffect(leadFXHig)}                                
            if (leadTre >= 0.1) {lead.addEffect(leadFXTre)}                    
            if (leadDub >= 0.1) {lead.addEffect(leadFXDub)}                    
            if (leadDis >= 0.1) {lead.addEffect(leadFXDis)}                    
            
            // set initial effects        
            vocal.addEffect(vocalFXPan);
            if (vocalFla >= 0.1) {vocal.addEffect(vocalFXFla)}
            if (vocalLow >= 0.1) {vocal.addEffect(vocalFXLow)}
            if (vocalHig >= 0.1) {vocal.addEffect(vocalFXHig)}                                
            if (vocalTre >= 0.1) {vocal.addEffect(vocalFXTre)}                    
            if (vocalDub >= 0.1) {vocal.addEffect(vocalFXDub)}                    
            if (vocalDis >= 0.1) {vocal.addEffect(vocalFXDis)}                    
        
            mainWaveSurfer.load(mainTrackSource);                
            mainWaveSurfer.on('ready', function () {            
                document.getElementById('mainProgress').style.display = 'none';            
                mainWave = "yes";        
            });

            // set track data
            $(".bassBid").text(filterXSS(bassThresh));
            $("#bassCurrent").text(filterXSS(bassCurrentTrack));
            $(".drumBid").text(filterXSS(drumThresh));
            $("#drumCurrent").text(filterXSS(drumCurrentTrack));
            $(".rhythmBid").text(filterXSS(rhythmThresh));
            $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));
            $(".leadBid").text(filterXSS(leadThresh));
            $("#leadCurrent").text(filterXSS(leadCurrentTrack));
            $(".vocalBid").text(filterXSS(vocalThresh));
            $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));
            $(".songAddress").text(filterXSS(songAddress));
            $("#songName").text(filterXSS(songName));
            $("#bandName").text(filterXSS(bandName));
            
        }
        
        // handle the waveform click
        $("#mainWaveForm").on( "click", function() {	            	
            bass.stop();
            drum.stop();
            lead.stop();
            rhythm.stop();
            vocal.stop();
            if (mainWave === "yes") {                                            
                // small delay to capture updated position of seek
                setTimeout(function(){
                    if (mainWaveSurfer.getDuration() > 0) {                     
                        bassWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        drumWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        rhythmWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        leadWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        vocalWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                    } else {
                        bassWaveSurfer.seekTo(0);
                        drumWaveSurfer.seekTo(0);
                        rhythmWaveSurfer.seekTo(0);
                        leadWaveSurfer.seekTo(0);
                        vocalWaveSurfer.seekTo(0);
                    }
                    // if playing, seek the group
                    if (mainWaveSurfer.isPlaying()) {                                                            
                        bass.play(0,mainWaveSurfer.getCurrentTime());
                        drum.play(0,mainWaveSurfer.getCurrentTime());
                        lead.play(0,mainWaveSurfer.getCurrentTime());
                        rhythm.play(0,mainWaveSurfer.getCurrentTime());
                        vocal.play(0,mainWaveSurfer.getCurrentTime());
                        bassWaveSurfer.play();
                        drumWaveSurfer.play();
                        rhythmWaveSurfer.play();
                        leadWaveSurfer.play();
                        vocalWaveSurfer.play();
                    }
                }, 500);
            }            
            return false;
        });

        // handle the waveform click
        $("#bassWaveForm").on( "click", function() {		
            bass.stop();
            drum.stop();
            lead.stop();
            rhythm.stop();
            vocal.stop();                        
            if (bassWave === "yes") {                
                // small delay to capture updated position of seek
                setTimeout(function(){                                         
                    if (bassWaveSurfer.getDuration() > 0) {                     
                        mainWaveSurfer.seekTo(bassWaveSurfer.getCurrentTime()/bassWaveSurfer.getDuration());
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(bassWaveSurfer.getCurrentTime()/bassWaveSurfer.getDuration());
                        drumWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(bassWaveSurfer.getCurrentTime()/bassWaveSurfer.getDuration());
                        rhythmWaveSurfer.pause();
                        leadWaveSurfer.seekTo(bassWaveSurfer.getCurrentTime()/bassWaveSurfer.getDuration());
                        leadWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(bassWaveSurfer.getCurrentTime()/bassWaveSurfer.getDuration());
                        vocalWaveSurfer.pause();
                    } else {
                        mainWaveSurfer.seekTo(0);
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(0);
                        drumWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(0);
                        rhythmWaveSurfer.pause();
                        leadWaveSurfer.seekTo(0);
                        leadWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(0);
                        vocalWaveSurfer.pause();
                    }                                        
                    // pause the sound - require button click
                    bass.pause(0,bassWaveSurfer.getCurrentTime());                                                                
                    bassWaveSurfer.pause();
                }, 500);
            }            
            return false;
        });

        // handle the waveform click
        $("#drumWaveForm").on( "click", function() {		
            bass.stop();
            drum.stop();
            lead.stop();
            rhythm.stop();
            vocal.stop();
            if (drumWave === "yes") {                
                // small delay to capture updated position of seek
                setTimeout(function(){                                         
                    if (drumWaveSurfer.getDuration() > 0) {                     
                        mainWaveSurfer.seekTo(drumWaveSurfer.getCurrentTime()/drumWaveSurfer.getDuration());
                        mainWaveSurfer.pause();
                        bassWaveSurfer.seekTo(drumWaveSurfer.getCurrentTime()/drumWaveSurfer.getDuration());
                        bassWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(drumWaveSurfer.getCurrentTime()/drumWaveSurfer.getDuration());
                        rhythmWaveSurfer.pause();
                        leadWaveSurfer.seekTo(drumWaveSurfer.getCurrentTime()/drumWaveSurfer.getDuration());
                        leadWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(drumWaveSurfer.getCurrentTime()/drumWaveSurfer.getDuration());
                        vocalWaveSurfer.pause();
                    } else {
                        mainWaveSurfer.seekTo(0);
                        mainWaveSurfer.pause();
                        bassWaveSurfer.seekTo(0);
                        bassWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(0);
                        rhythmWaveSurfer.pause();
                        leadWaveSurfer.seekTo(0);
                        leadWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(0);
                        vocalWaveSurfer.pause();
                    }                                        
                    // pause the sound - require button click
                    drum.pause(0,drumWaveSurfer.getCurrentTime());                                                                
                    drumWaveSurfer.pause();
                }, 500);
            }            
            return false;
        });

        // handle the waveform click
        $("#rhythmWaveForm").on( "click", function() {		
            bass.stop();
            drum.stop();
            lead.stop();
            rhythm.stop();
            vocal.stop();
            if (rhythmWave === "yes") {                
                // small delay to capture updated position of seek
                setTimeout(function(){                                         
                    if (rhythmWaveSurfer.getDuration() > 0) {                     
                        mainWaveSurfer.seekTo(rhythmWaveSurfer.getCurrentTime()/rhythmWaveSurfer.getDuration());
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(rhythmWaveSurfer.getCurrentTime()/rhythmWaveSurfer.getDuration());
                        drumWaveSurfer.pause();
                        bassWaveSurfer.seekTo(rhythmWaveSurfer.getCurrentTime()/rhythmWaveSurfer.getDuration());
                        bassWaveSurfer.pause();
                        leadWaveSurfer.seekTo(rhythmWaveSurfer.getCurrentTime()/rhythmWaveSurfer.getDuration());
                        leadWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(rhythmWaveSurfer.getCurrentTime()/rhythmWaveSurfer.getDuration());
                        vocalWaveSurfer.pause();
                    } else {
                        mainWaveSurfer.seekTo(0);
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(0);
                        drumWaveSurfer.pause();
                        bassWaveSurfer.seekTo(0);
                        bassWaveSurfer.pause();
                        leadWaveSurfer.seekTo(0);
                        leadWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(0);
                        vocalWaveSurfer.pause();
                    }                                        
                    // pause the sound - require button click
                    rhythm.pause(0,rhythmWaveSurfer.getCurrentTime());                                                                
                    rhythmWaveSurfer.pause();
                }, 500);
            }            
            return false;
        });

        // handle the waveform click
        $("#leadWaveForm").on( "click", function() {		
            bass.stop();
            drum.stop();
            lead.stop();
            rhythm.stop();
            vocal.stop();
            if (leadWave === "yes") {                
                // small delay to capture updated position of seek
                setTimeout(function(){                                         
                    if (leadWaveSurfer.getDuration() > 0) {                     
                        mainWaveSurfer.seekTo(leadWaveSurfer.getCurrentTime()/leadWaveSurfer.getDuration());
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(leadWaveSurfer.getCurrentTime()/leadWaveSurfer.getDuration());
                        drumWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(leadWaveSurfer.getCurrentTime()/leadWaveSurfer.getDuration());
                        rhythmWaveSurfer.pause();
                        bassWaveSurfer.seekTo(leadWaveSurfer.getCurrentTime()/leadWaveSurfer.getDuration());
                        bassWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(leadWaveSurfer.getCurrentTime()/leadWaveSurfer.getDuration());
                        vocalWaveSurfer.pause();
                    } else {
                        mainWaveSurfer.seekTo(0);
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(0);
                        drumWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(0);
                        rhythmWaveSurfer.pause();
                        bassWaveSurfer.seekTo(0);
                        bassWaveSurfer.pause();
                        vocalWaveSurfer.seekTo(0);
                        vocalWaveSurfer.pause();
                    }
                    // pause the sound - require button click
                    lead.pause(0,leadWaveSurfer.getCurrentTime());                                            
                    leadWaveSurfer.pause();
                }, 500);
            }            
            return false;
        });

        // handle the waveform click
        $("#vocalWaveForm").on( "click", function() {		
            bass.stop();
            drum.stop();
            lead.stop();
            rhythm.stop();
            vocal.stop();
            if (vocalWave === "yes") {                
                // small delay to capture updated position of seek
                setTimeout(function(){                                         
                    if (vocalWaveSurfer.getDuration() > 0) {                     
                        mainWaveSurfer.seekTo(vocalWaveSurfer.getCurrentTime()/vocalWaveSurfer.getDuration());
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(vocalWaveSurfer.getCurrentTime()/vocalWaveSurfer.getDuration());
                        drumWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(vocalWaveSurfer.getCurrentTime()/vocalWaveSurfer.getDuration());
                        rhythmWaveSurfer.pause();
                        leadWaveSurfer.seekTo(vocalWaveSurfer.getCurrentTime()/vocalWaveSurfer.getDuration());
                        leadWaveSurfer.pause();
                        bassWaveSurfer.seekTo(vocalWaveSurfer.getCurrentTime()/vocalWaveSurfer.getDuration());
                        bassWaveSurfer.pause();
                    } else {
                        mainWaveSurfer.seekTo(0);
                        mainWaveSurfer.pause();
                        drumWaveSurfer.seekTo(0);
                        drumWaveSurfer.pause();
                        rhythmWaveSurfer.seekTo(0);
                        rhythmWaveSurfer.pause();
                        leadWaveSurfer.seekTo(0);
                        leadWaveSurfer.pause();
                        bassWaveSurfer.seekTo(0);
                        bassWaveSurfer.pause();
                    }                    
                    // pause the sound - require button click
                    vocal.pause(0,vocalWaveSurfer.getCurrentTime());                                                                
                    vocalWaveSurfer.pause();
                }, 500);
            }            
            return false;
        });

        // handle the button click
        $("#bassUpload").on( "click", function() {		
            $("#bassUploadMessage").toggle();		            
            return false;
        });

        // handle the button click
        $("#drumUpload").on( "click", function() {		
            $("#drumUploadMessage").toggle();		            
            return false;
        });

        // handle the button click
        $("#rhythmUpload").on( "click", function() {		
            $("#rhythmUploadMessage").toggle();		            
            return false;
        });

        // handle the button click
        $("#leadUpload").on( "click", function() {		
            $("#leadUploadMessage").toggle();		            
            return false;
        });

        // handle the button click
        $("#vocalUpload").on( "click", function() {		
            $("#vocalUploadMessage").toggle();		            
            return false;
        });        

        // handle the edit button click
        $("#editBassControl").on( "click", function() {		            
            $("#editBass").fadeToggle("slow");                        
            // handle the initial waveform
            if (bassWave === "no") {
                bassWave = "yes";
                $("#bassProgress").show();                                    
                bassWaveSurfer.load(bassTrackSource);                                    
                bassWaveSurfer.on('ready', function () {
                    $("#bassProgress").hide();                    
                });
            }            
            // set the state
            $("#bassVol").val(bassVol);            
            $("#bassPan").val(bassPan);                                    
            $("#bassFla").val(bassFla);                        
            $("#bassTre").val(bassTre);                                
            $("#bassLow").val(bassLow);                        
            $("#bassHig").val(bassHig);                        
            $("#bassAtt").val(bassAtt);            
            $("#bassRel").val(bassRel);            
            $("#bassDub").val(bassDub);            
            $("#bassDis").val(bassDis);            
            // set the track dropdown            
            var dd = document.getElementById('bassTrack');
            for (var i = 0; i < dd.options.length; i++) {
                if (dd.options[i].value === bassTrack) {
                    dd.selectedIndex = i;
                    break;
                }
            }
            resetAudioBass("no");
            return false;
        });

        // handle the edit button click
        $("#editDrumControl").on( "click", function() {		            
            $("#editDrum").fadeToggle("slow");                       
            // handle the initial waveform
            if (drumWave === "no") {
                drumWave = "yes";
                $("#drumProgress").show();                                    
                drumWaveSurfer.load(drumTrackSource);                                    
                drumWaveSurfer.on('ready', function () {
                    $("#drumProgress").hide();                    
                });
            }            
            // set the state
            $("#drumVol").val(drumVol);            
            $("#drumPan").val(drumPan);                                    
            $("#drumFla").val(drumFla);                        
            $("#drumTre").val(drumTre);                                
            $("#drumLow").val(drumLow);                        
            $("#drumHig").val(drumHig);                        
            $("#drumAtt").val(drumAtt);            
            $("#drumRel").val(drumRel);            
            $("#drumDub").val(drumDub);            
            $("#drumDis").val(drumDis);            
            // set the track dropdown            
            var dd = document.getElementById('drumTrack');
            for (var i = 0; i < dd.options.length; i++) {
                if (dd.options[i].value === drumTrack) {
                    dd.selectedIndex = i;
                    break;
                }
            }
            resetAudioDrum("no");
            return false;
        });

        // handle the edit button click
        $("#editRhythmControl").on( "click", function() {		            
            $("#editRhythm").fadeToggle("slow");                        
            // handle the initial waveform
            if (rhythmWave === "no") {
                rhythmWave = "yes";
                $("#rhythmProgress").show();                                    
                rhythmWaveSurfer.load(rhythmTrackSource);                                    
                rhythmWaveSurfer.on('ready', function () {
                    $("#rhythmProgress").hide();                    
                });
            }            
            // set the state
            $("#rhythmVol").val(rhythmVol);            
            $("#rhythmPan").val(rhythmPan);                                    
            $("#rhythmFla").val(rhythmFla);                        
            $("#rhythmTre").val(rhythmTre);                                
            $("#rhythmLow").val(rhythmLow);                        
            $("#rhythmHig").val(rhythmHig);                        
            $("#rhythmAtt").val(rhythmAtt);            
            $("#rhythmRel").val(rhythmRel);            
            $("#rhythmDub").val(rhythmDub);            
            $("#rhythmDis").val(rhythmDis);            
            // set the track dropdown            
            var dd = document.getElementById('rhythmTrack');
            for (var i = 0; i < dd.options.length; i++) {
                if (dd.options[i].value === rhythmTrack) {
                    dd.selectedIndex = i;
                    break;
                }
            }
            resetAudioRhythm("no");
            return false;
        });

        // handle the edit button click
        $("#editLeadControl").on( "click", function() {		            
            $("#editLead").fadeToggle("slow");                       
            // handle the initial waveform
            if (leadWave === "no") {
                leadWave = "yes";
                $("#leadProgress").show();                                    
                leadWaveSurfer.load(leadTrackSource);                                    
                leadWaveSurfer.on('ready', function () {
                    $("#leadProgress").hide();                    
                });
            }            
            // set the state
            $("#leadVol").val(leadVol);            
            $("#leadPan").val(leadPan);                                    
            $("#leadFla").val(leadFla);                        
            $("#leadTre").val(leadTre);                                
            $("#leadLow").val(leadLow);                        
            $("#leadHig").val(leadHig);                        
            $("#leadAtt").val(leadAtt);            
            $("#leadRel").val(leadRel);            
            $("#leadDub").val(leadDub);            
            $("#leadDis").val(leadDis);            
            // set the track dropdown            
            var dd = document.getElementById('leadTrack');
            for (var i = 0; i < dd.options.length; i++) {
                if (dd.options[i].value === leadTrack) {
                    dd.selectedIndex = i;
                    break;
                }
            }
            resetAudioLead("no");
            return false;
        });
        
        // handle the edit button click
        $("#editVocalControl").on( "click", function() {		            
            $("#editVocal").fadeToggle("slow");                        
            // handle the initial waveform
            if (vocalWave === "no") {
                vocalWave = "yes";
                $("#vocalProgress").show();                                    
                vocalWaveSurfer.load(vocalTrackSource);                                    
                vocalWaveSurfer.on('ready', function () {
                    $("#vocalProgress").hide();                    
                });
            }            
            // set the state
            $("#vocalVol").val(vocalVol);            
            $("#vocalPan").val(vocalPan);                                    
            $("#vocalFla").val(vocalFla);                        
            $("#vocalTre").val(vocalTre);                                
            $("#vocalLow").val(vocalLow);                        
            $("#vocalHig").val(vocalHig);                        
            $("#vocalAtt").val(vocalAtt);            
            $("#vocalRel").val(vocalRel);            
            $("#vocalDub").val(vocalDub);            
            $("#vocalDis").val(vocalDis);            
            // set the track dropdown            
            var dd = document.getElementById('vocalTrack');
            for (var i = 0; i < dd.options.length; i++) {
                if (dd.options[i].value === vocalTrack) {
                    dd.selectedIndex = i;
                    break;
                }
            }
            resetAudioVocal("no");
            return false;
        });
        
        // handle the input changes
        $("#bassTrack").on( "change", function() {		                             
            // check if need to update mainTrack
            var mainFlag = "no";
            var mainTime = 0;
            if (mainTrack === bassTrack) { 
                mainFlag = "yes";    
            }
            $("#bassProgress").show();                    
            bassTrack = $("#bassTrack").val();                        
            // stop sound, if playing            
            if (bassWaveSurfer.isPlaying()) {
                // stop sound, wavesurfer
                bass.pause();           
                bassWaveSurfer.pause();         
            }            
            // clear the waveform
            $("#bassWaveForm").empty();                                    
            // reload the new waveform
            bassWaveSurfer = WaveSurfer.create({            
                container: '#bassWaveForm',
                waveColor: '#F9464A',
                cursorColor: '#fff',      
                responsive: true,
                barWidth: 3
            });                     
            switch (bassTrack){
                case "bass1":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass1.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Sharpness with Acid Bass";
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass2":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass2.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Round and Happy Bass";                
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass3":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass3.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Smooth and Delicious Bass";                
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass4":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass4.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Mechanical Robot Bass";         
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass5":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass5.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Thumpy and Edgy Bass";                
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass6":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass6.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Slappy Pulsing Bass";                
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass7":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass7.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Big Bad Jazzman Bass";                
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass8":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass8.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Deep House Bass";            
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass9":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass9.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Crunchy Gulp Bass";
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                case "bass10":
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass10.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Quick Running Bass";                
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
                    break;
                default:
                    bassTrackSource = 'https://celody.com/' + soundFolder + '/bass1.mp3';
                    bassWaveSurfer.load(bassTrackSource);
                    bassCurrentTrack = "Sharpness with Acid Bass";
                    $("#bassCurrent").text(filterXSS(bassCurrentTrack));               
                    $("#bassProgress").hide();                    
            }         
            if (mainFlag === "yes") {
                mainTrack = bassTrack;
                mainTrackSource = bassTrackSource;
                mainCurrentTrack = bassCurrentTrack;
                // stop wave, if playing            
                if (mainWaveSurfer.isPlaying()) {                    
                    mainWaveSurfer.pause();         
                    if (mainWaveSurfer.getDuration() > 0) {                     
                        mainTime = mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration();
                    }                     
                }            
                // clear the waveform
                $("#mainWaveForm").empty();                                    
                // reload the new waveform
                mainWaveSurfer = WaveSurfer.create({            
                    container: '#mainWaveForm',
                    waveColor: '#F9464A',
                    cursorColor: '#fff',      
                    responsive: true,
                    barWidth: 3
                });
                mainWaveSurfer.load(mainTrackSource);
                mainWaveSurfer.on('ready', function () {            
                    mainWaveSurfer.setMute(true);
                    mainWaveSurfer.seekTo(mainTime);
                    mainWaveSurfer.play();
                });
            }
            bassWavePlay = "no";
            // bypass filters that cause audio feedback
            bassRel = 0.5;
            bassAtt = 0.5;
            bassVol = 0.5;                    
            bassFla = 0;
            bassTre = 0;
            bassLow = 0;
            bassHig = 0;
            bassDub = 0;
            bassDis = 0;
            $("#bassVol").val(bassVol);                                    
            $("#bassFla").val(bassFla);                        
            $("#bassTre").val(bassTre);                        
            $("#bassLow").val(bassLow);                        
            $("#bassHig").val(bassHig);                        
            $("#bassAtt").val(bassAtt);            
            $("#bassRel").val(bassRel);                                
            $("#bassDub").val(bassDub);                                
            $("#bassDis").val(bassDis);                                
            resetAudioBass("yes");
            return false;
        });

        // handle the input changes
        $("#bassVol").on( "change", function() {		
            bassVol = $("#bassVol").val();            
            bassVol = Math.round( bassVol * 10 ) / 10;
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#bassPan").on( "change", function() {		
            bassPan = $("#bassPan").val();            
            bassPan = Math.round( bassPan * 10 ) / 10;            
            resetAudioBass("no");
            return false;
        });        
                        
        // handle the input changes
        $("#bassFla").on( "change", function() {		
            bassFla = $("#bassFla").val();        
            bassFla = Math.round( bassFla * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#bassTre").on( "change", function() {		
            bassTre = $("#bassTre").val();        
            bassTre = Math.round( bassTre * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });
        
        // handle the input changes
        $("#bassLow").on( "change", function() {		
            bassLow = $("#bassLow").val();        
            bassLow = Math.round( bassLow * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#bassHig").on( "change", function() {		
            bassHig = $("#bassHig").val();        
            bassHig = Math.round( bassHig * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#bassAtt").on( "change", function() {		
            bassAtt = $("#bassAtt").val();        
            bassAtt = Math.round( bassAtt * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#bassRel").on( "change", function() {		
            bassRel = $("#bassRel").val();        
            bassRel = Math.round( bassRel * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#bassDub").on( "change", function() {		
            bassDub = $("#bassDub").val();        
            bassDub = Math.round( bassDub * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#bassDis").on( "change", function() {		
            bassDis = $("#bassDis").val();        
            bassDis = Math.round( bassDis * 10 ) / 10;    
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassVol").on( "click", function() {		            
            bassVol = Math.round( ((bassVol-0.1)) * 10 ) / 10;
            if (bassVol < 0) {bassVol=0.0;}
            $("#bassVol").val(bassVol);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassPan").on( "click", function() {		            
            bassPan = Math.round( (bassPan-0.1) * 10 ) / 10;            
            if (bassPan < 0) {bassPan=0.0;}
            $("#bassPan").val(bassPan);
            resetAudioBass("no");
            return false;
        });        
                        
        // handle the input changes
        $("#downBassFla").on( "click", function() {		            
            bassFla = Math.round( (bassFla-0.1) * 10 ) / 10;    
            if (bassFla < 0) {bassFla=0.0;}
            $("#bassFla").val(bassFla);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassTre").on( "click", function() {		            
            bassTre = Math.round( (bassTre-0.1) * 10 ) / 10;    
            if (bassTre < 0) {bassTre=0.0;}
            $("#bassTre").val(bassTre);
            resetAudioBass("no");
            return false;
        });
        
        // handle the input changes
        $("#downBassLow").on( "click", function() {		            
            bassLow = Math.round( (bassLow-0.1) * 10 ) / 10;    
            if (bassLow < 0) {bassLow=0.0;}
            $("#bassLow").val(bassLow);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassHig").on( "click", function() {		            
            bassHig = Math.round( (bassHig-0.1) * 10 ) / 10;    
            if (bassHig < 0) {bassHig=0.0;}
            $("#bassHig").val(bassHig);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassAtt").on( "click", function() {		            
            bassAtt = Math.round( (bassAtt-0.1) * 10 ) / 10;    
            if (bassAtt < 0) {bassAtt=0.0;}
            $("#bassAtt").val(bassAtt);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassRel").on( "click", function() {		            
            bassRel = Math.round( (bassRel-0.1) * 10 ) / 10;    
            if (bassRel < 0) {bassRel=0.0;}
            $("#bassRel").val(bassRel);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassDub").on( "click", function() {		            
            bassDub = Math.round( (bassDub-0.1) * 10 ) / 10;    
            if (bassDub < 0) {bassDub=0.0;}
            $("#bassDub").val(bassDub);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#downBassDis").on( "click", function() {		            
            bassDis = Math.round( (bassDis-0.1) * 10 ) / 10;    
            if (bassDis < 0) {bassDis=0.0;}
            $("#bassDis").val(bassDis);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassVol").on( "click", function() {		            
            bassVol = Math.round( ((bassVol+0.1)) * 10 ) / 10;
            if (bassVol > 1) {bassVol=1.0;}
            $("#bassVol").val(bassVol);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassPan").on( "click", function() {		            
            bassPan = Math.round( (bassPan+0.1) * 10 ) / 10;            
            if (bassPan > 1) {bassPan=1.0;}
            $("#bassPan").val(bassPan);
            resetAudioBass("no");
            return false;
        });        
                        
        // handle the input changes
        $("#upBassFla").on( "click", function() {		            
            bassFla = Math.round( (bassFla+0.1) * 10 ) / 10;    
            if (bassFla > 1) {bassFla=1.0;}
            $("#bassFla").val(bassFla);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassTre").on( "click", function() {		            
            bassTre = Math.round( (bassTre+0.1) * 10 ) / 10;    
            if (bassTre > 1) {bassTre=1.0;}
            $("#bassTre").val(bassTre);
            resetAudioBass("no");
            return false;
        });
        
        // handle the input changes
        $("#upBassLow").on( "click", function() {		            
            bassLow = Math.round( (bassLow+0.1) * 10 ) / 10;    
            if (bassLow > 1) {bassLow=1.0;}
            $("#bassLow").val(bassLow);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassHig").on( "click", function() {		            
            bassHig = Math.round( (bassHig+0.1) * 10 ) / 10;    
            if (bassHig > 1) {bassHig=1.0;}
            $("#bassHig").val(bassHig);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassAtt").on( "click", function() {		            
            bassAtt = Math.round( (bassAtt+0.1) * 10 ) / 10;    
            if (bassAtt > 1) {bassAtt=1.0;}
            $("#bassAtt").val(bassAtt);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassRel").on( "click", function() {		            
            bassRel = Math.round( (bassRel+0.1) * 10 ) / 10;    
            if (bassRel > 1) {bassRel=1.0;}
            $("#bassRel").val(bassRel);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassDub").on( "click", function() {		            
            bassDub = Math.round( (bassDub+0.1) * 10 ) / 10;    
            if (bassDub > 1) {bassDub=1.0;}
            $("#bassDub").val(bassDub);
            resetAudioBass("no");
            return false;
        });

        // handle the input changes
        $("#upBassDis").on( "click", function() {		            
            bassDis = Math.round( (bassDis+0.1) * 10 ) / 10;    
            if (bassDis > 1) {bassDis=1.0;}
            $("#bassDis").val(bassDis);
            resetAudioBass("no");
            return false;
        });
                                             
        // function to edit audio streams
        function resetAudioBass(changeTrack) {
            // check if changing track
            if (changeTrack === "yes") { 
                // stop sound, disconnect sound
                bass.stop();
                $("#bassPlay").hide();		            
                $("#bassPlayLoading").show();		            
                $("#bassRestart").hide();		            
                $("#bassRestartLoading").show();		                                                  
                // need timers for small processing delay to prevent audio feedback death
                setTimeout(function(){  
                    resetAudioBassNext1(changeTrack);
                }, 2000);
            } else {
                resetAudioBassNext2(changeTrack);
            }
            return false;
        }
        
        // function to edit audio streams
        function resetAudioBassNext1(changeTrack) {
            // disconnect old track                                
            if (bass) {                
                bass.disconnect();
            }
            setTimeout(function(){                      
                resetAudioBassNext2(changeTrack);
            }, 1000);
        }
        
        // function to edit audio streams
        function resetAudioBassNext2(changeTrack) {
            // check if playing - song or individual track        
            if ((bassWaveSurfer.isPlaying()) || (mainWaveSurfer.isPlaying())) { 
                bass.pause();
                drum.pause();
                lead.pause();
                rhythm.pause();
                vocal.pause();
                // reload audio if track change
                if (changeTrack === "yes") {                                        
                    bassWaveSurfer.pause();
                    bassWaveSurfer.seekTo(0);                
                    bass = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [bassTrackSource],
                            volume: bassVol,
                            release: bassRel,
                            attack: bassAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Bass audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#bassPlayLoading").hide();		            
                            $("#bassPlay").show();		                                    
                            $("#bassRestartLoading").hide();		            
                            $("#bassRestart").show();		                                                                                      
                            if (mainWaveSurfer.isPlaying()) {                          
                                mainWaveSurfer.pause();
                                mainWaveSurfer.seekTo(0);
                                bassWaveSurfer.seekTo(0);
                                drumWaveSurfer.seekTo(0);
                                leadWaveSurfer.seekTo(0);
                                rhythmWaveSurfer.seekTo(0);
                                vocalWaveSurfer.seekTo(0);
                                bass.play(0,0);
                                drum.play(0,0);
                                lead.play(0,0);
                                rhythm.play(0,0);
                                vocal.play(0,0);
                                bassWaveSurfer.seekTo(0);
                                bassWaveSurfer.play();              
                                drumWaveSurfer.play();              
                                leadWaveSurfer.play();              
                                rhythmWaveSurfer.play();              
                                vocalWaveSurfer.play();              
                                mainWaveSurfer.play();              
                            }
                        }
                    });
                } else {
                    // pause sound
                    bass.pause();
                    resetFX();
                    loadChanges();
                    if (mainWaveSurfer.isPlaying()) {                        ;                        
                        mainWaveSurfer.pause();
                        bass.play(0,mainWaveSurfer.getCurrentTime());
                        drum.play(0,mainWaveSurfer.getCurrentTime());
                        lead.play(0,mainWaveSurfer.getCurrentTime());
                        rhythm.play(0,mainWaveSurfer.getCurrentTime());
                        vocal.play(0,mainWaveSurfer.getCurrentTime());
                        mainWaveSurfer.play();
                        if (mainWaveSurfer.getDuration() > 0) {                     
                            bassWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        } else {
                            bassWaveSurfer.seekTo(0);
                        }
                        bassWaveSurfer.play();
                    } else {
                        bass.play(0,bassWaveSurfer.getCurrentTime());
                        bassWaveSurfer.play();
                    }
                }                                                                
            } else {                           
                if (changeTrack === "yes") {                    
                    bass = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [bassTrackSource],
                            volume: bassVol,
                            release: bassRel,
                            attack: bassAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Bass audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#bassPlayLoading").hide();		            
                            $("#bassPlay").show();		                                    
                            $("#bassRestartLoading").hide();		            
                            $("#bassRestart").show();		                                                                
                        }
                    });
                } else {
                    bass.pause();
                    resetFX();
                    loadChanges();                    
                }                
            }    
            function resetFX() {
                // reset volume and effects
                bass.volume = bassVol;            
                bass.release = bassRel;
                bass.attack = bassAtt;            
                bassFXFla.speed = bassFla;                        
                bassFXLow.frequency = Math.round( bassLow * 22000);
                bassFXHig.frequency = Math.round( bassHig * 22000);                    
                bassFXPan.pan = Math.round( ((bassPan * 2) - 1) * 10 ) / 10;                                        
                bassFXTre.speed = Math.round( bassTre * 20 * 10 ) / 10;                                            
                bassFXDub.time = Math.round( bassDub  * 10 ) / 10;
                bassFXDis.gain = Math.round( bassDis * 0.15 * 10 ) / 10;
                return false;
            }    
            function loadChanges() {
                // handle pan if not added - if already added, value should be reset (no remove)
                if (bass.effects.indexOf(bassFXPan) < 0) {bass.addEffect(bassFXPan)}

                // remove all added effects - required to recover from browser fx crashes (throws warning)
                if (bass.effects.indexOf(bassFXFla) >= 0) {bass.removeEffect(bassFXFla);}
                if (bass.effects.indexOf(bassFXLow) >= 0) {bass.removeEffect(bassFXLow);}
                if (bass.effects.indexOf(bassFXHig) >= 0) {bass.removeEffect(bassFXHig);}                                
                if (bass.effects.indexOf(bassFXTre) >= 0) {bass.removeEffect(bassFXTre);}                    
                if (bass.effects.indexOf(bassFXDub) >= 0) {bass.removeEffect(bassFXDub);}                    
                if (bass.effects.indexOf(bassFXDis) >= 0) {bass.removeEffect(bassFXDis);}                    

                // add effects (not bypassed)
                if ((bassFla >= 0.1) && (bass.effects.indexOf(bassFXFla) < 0)) {bass.addEffect(bassFXFla)}
                if ((bassLow >= 0.1) && (bass.effects.indexOf(bassFXLow) < 0)) {bass.addEffect(bassFXLow)}
                if ((bassHig >= 0.1) && (bass.effects.indexOf(bassFXHig) < 0)) {bass.addEffect(bassFXHig)}                                
                if ((bassTre >= 0.1) && (bass.effects.indexOf(bassFXTre) < 0)) {bass.addEffect(bassFXTre)}                    
                if ((bassDub >= 0.1) && (bass.effects.indexOf(bassFXDub) < 0)) {bass.addEffect(bassFXDub)}                    
                if ((bassDis >= 0.1) && (bass.effects.indexOf(bassFXDis) < 0)) {bass.addEffect(bassFXDis)}                    
            }    
            return false;
        }

        // handle the button click
        $("#bassPlay").on( "click", function() {		            
            lead.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            bassWaveSurfer.setMute(true);
            bassWaveSurfer.play();            
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                         
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                         
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                         
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                         
            if (bassWavePlay === "no") {
                bassWavePlay = "yes";
                $("#bassPlay").hide();		            
                $("#bassPlayLoading").show();		            
                setTimeout(function(){  
                    $("#bassPlayLoading").fadeOut("slow");		
                    $("#bassPlay").fadeIn("slow");
                }, 3000);
            } else {
                bass.pause();            
            }            
            bass.play(0,bassWaveSurfer.getCurrentTime());
            return false;
        });

        // handle the button click
        $("#bassPause").on( "click", function() {		            
            bass.pause();          
            lead.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            bassWaveSurfer.pause();       
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                                     
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            return false;
        });

        // handle the button click
        $("#bassRestart").on( "click", function() {		
            lead.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            bassWaveSurfer.setMute(true);
            drumWaveSurfer.setMute(true);
            rhythmWaveSurfer.setMute(true);
            leadWaveSurfer.setMute(true);
            vocalWaveSurfer.setMute(true);
            bassWaveSurfer.seekTo(0);
            bassWaveSurfer.play();
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            bass.stop();
            bass.play(0,0);
            $("#bassRestart").hide();		            
            $("#bassRestartLoading").show();		            
            setTimeout(function(){  
                $("#bassRestartLoading").fadeOut("slow");		
                $("#bassRestart").fadeIn("slow");
            }, 3000);
            return false;
        });

        // handle the button click
        $("#bassSave").on( "click", function() {		
            $("#bassSaveAccount").toggle();		            
            $("#bassSaveMessage").hide();		                        
            $("#bassScatter").hide();		                        
            return false;
        });

        $("#bassSaveNext").on( "click", function() {		
            // get data
            var account = $("#accountBass").val();
            var tokenAmount = $("#tokenAmountBass").val();
            var tokenAddress = $("#tokenAddressBass").val();
            // validate account
            if (!account) {
                alert("Account is invalid. Please enter a value.");                                        
                return false;
            }            
            // validate account length
            if (account.length === 27) {
                // do nothing
            } else {
                alert("Account is invalid. Account should be 27 characters.");                                        
                return false;
            }            
            // validate account content
            for (var j = 0; j < account.length; j++) {
                if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(account.charAt(j)) < 0) {                            
                    alert("Account should contain only letters A-Z or the number 9. Account is invalid.");                                        
                    return false;
                }
            }
            // check token amount exists
            if (!tokenAmount) {
                alert("Token amount is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token is a number
            if (isNaN(tokenAmount)) {                
                alert("Token amount is invalid. Please enter a number.");                                        
                return false;
            }
            // validate the token is positive
            if (tokenAmount <= 0) {                
                alert("Token amount is invalid. Please enter a positive number.");                                        
                return false;
            }
            // validate the token is above threshold
            if (tokenAmount < bassBid) {                
                alert("Token amount is less than current threshold. Increase the amount to become the master track.");                                        
                return false;
            }            
            // check token address exists
            if (!tokenAddress) {
                alert("Token address is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token address length             
            if ((tokenAddress.length > 25) && (tokenAddress.length < 36)) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should be between 26 and 35 characters.");                                        
                return false;
            }
            // check token address starts with 1 or 3
            if ((tokenAddress.substring(0,1) === "1") || (tokenAddress.substring(0,1) === "3")) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should start with 1 or 3.");                                        
                return false;
            }     
            // check token address content
            for (var j = 0; j < tokenAddress.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(tokenAddress.charAt(j)) < 0) {                            
                    alert("Token address is invalid. Address should start with 1 or 3 and only contains numbers and letters.");                                        
                    return false;
                }
            }
            // validate the songID
            if (!songID) {
                alert("No songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            if ((songID.length < 2) || (songID.length > 100)) {                
                alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }            
            // validate the songID length
            for (var j = 0; j < songID.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(songID.charAt(j)) < 0) {                            
                    alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                    return false;
                }
            }
            // validate the token
            if (!tokenName) {
                alert("No token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the token length
            if ((tokenName.length < 2) || (tokenName.length > 100)) {                
                alert("Invalid token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }                        
            // set the memo with the current state
            var bassMemo = songID + "" + account + "BV" + parseFloat(bassVol).toFixed(1) + "BP" + parseFloat(bassPan).toFixed(1) + "BF" + parseFloat(bassFla).toFixed(1) + "BT" + parseFloat(bassTre).toFixed(1) + "BL" + parseFloat(bassLow).toFixed(1) + "BH" + parseFloat(bassHig).toFixed(1) + "BA" + parseFloat(bassAtt).toFixed(1) + "BR" + parseFloat(bassRel).toFixed(1) + "BDI" + parseFloat(bassDis).toFixed(1) + "BDU" + parseFloat(bassDub).toFixed(1) + "BCT" + bassTrack;            
            // replace the dots with the letter d
            var memo = bassMemo.replace(/\./g, "d");
            // validate the memo
            if (!memo) {
                alert("No memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the memo
            if ((memo.length < 2) || (memo.length > 255)) {                
                alert("Invalid memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            for (var j = 0; j < memo.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(memo.charAt(j)) < 0) {                            
                    alert("Invalid memo has been specified for this song. Please only include letters and numbers. No special characters.");                                        
                    return false;
                }
            }
            // sanitize
            account = filterXSS(account);
            tokenAmount = filterXSS(tokenAmount);
            tokenAddress = filterXSS(tokenAddress);            
            songID = filterXSS(songID);            
            tokenName = filterXSS(tokenName);            
            memo = filterXSS(memo);            

            // convert the amount to BTC api format
            var tokenDisplay = tokenAmount;
            tokenAmount = tokenAmount * 100000000;
            tokenAmount = tokenAmount.toFixed(0)

            $('.loadingNew').fadeIn("slow");
            $('.loadingTextNew').fadeIn("slow");            
            $('#errorMessageBass').hide();	

            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',
                contentType: 'application/json',
                data: JSON.stringify({                                        
                    'account': account,
                    'tokenamount': tokenAmount,
                    'tokenaddress': tokenAddress,
                    'songID': songID,
                    'token': tokenName,
                    'memo': memo
                }),
                success: function(res){                    
                    if (res.result === "Success") {
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();
                        $(".account").val(filterXSS(account));
                        $(".tokenAddress").val(filterXSS(tokenAddress));                        
                        // set the scatter link            
                        var scatterPayload = songAddress + "/" + tokenDisplay + "/" + memo + "/" + chainIDCurrent;
                        $("#bassScatterLink").prop('href',"scatter://transfer/?payload=" + filterXSS(scatterPayload));            
                        $(".bassBid").text(filterXSS(tokenDisplay + " BTC"));		            
                        $("#bassMemo").text(filterXSS('Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.'));		            
                        $("#bassSaveAccount").fadeOut("slow");
                        $("#bassSaveMessage").fadeIn("slow");		            
                        $("#bassScatter").hide();		            
                    } else {                          
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();	
                        $('#errorMessageBass').show();	    
                    }
                },
                error: function(){                                   
                    $('.loadingNew').hide();
                    $('.loadingTextNew').hide();	
                    $('#errorMessageBass').show();	
                }
            });            
            return false;
        }); 
                
        // handle the button click
        $("#bassMore").on( "click", function() {		
            $(".moreBFX").toggle();
            return false;
        });        

        // handle the input changes
        $("#drumTrack").on( "change", function() {		                             
            // check if need to update mainTrack
            var mainFlag = "no";
            var mainTime = 0;
            if (mainTrack === drumTrack) { 
                mainFlag = "yes";    
            }
            $("#drumProgress").show();                    
            drumTrack = $("#drumTrack").val();                        
            // stop sound, if playing            
            if (drumWaveSurfer.isPlaying()) {
                // stop sound, wavesurfer
                drum.pause();           
                drumWaveSurfer.pause();         
            }            
            // clear the waveform
            $("#drumWaveForm").empty();                                    
            // reload the new waveform
            drumWaveSurfer = WaveSurfer.create({            
                container: '#drumWaveForm',
                waveColor: '#F9464A',
                cursorColor: '#fff',      
                responsive: true,
                barWidth: 3
            });       
            switch (drumTrack){
                case "drum1":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum1.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Constant Rhythmic Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum2":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum2.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Ginger Heartbeat Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum3":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum3.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Summer Shaking Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum4":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum4.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Skip Party Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum5":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum5.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Peanut Butter and Jam Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum6":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum6.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Cucumber Techno Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum7":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum7.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Come On Home Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum8":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum8.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Lisp with Yelp Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum9":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum9.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Quicken Lane Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                case "drum10":
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum10.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Clap Your Hands Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
                    break;
                default:
                    drumTrackSource = 'https://celody.com/' + soundFolder + '/drum1.mp3';
                    drumWaveSurfer.load(drumTrackSource);
                    drumCurrentTrack = "Constant Rhythmic Drum";
                    $("#drumCurrent").text(filterXSS(drumCurrentTrack));               
                    $("#drumProgress").hide();                    
            }                                 
            if (mainFlag === "yes") {
                mainTrack = drumTrack;
                mainTrackSource = drumTrackSource;
                mainCurrentTrack = drumCurrentTrack;
                // stop wave, if playing            
                if (mainWaveSurfer.isPlaying()) {                    
                    mainWaveSurfer.pause();         
                    if (mainWaveSurfer.getDuration() > 0) {                     
                        mainTime = mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration();
                    }                     
                }            
                // clear the waveform
                $("#mainWaveForm").empty();                                    
                // reload the new waveform
                mainWaveSurfer = WaveSurfer.create({            
                    container: '#mainWaveForm',
                    waveColor: '#F9464A',
                    cursorColor: '#fff',      
                    responsive: true,
                    barWidth: 3
                });
                mainWaveSurfer.load(mainTrackSource);
                mainWaveSurfer.on('ready', function () {            
                    mainWaveSurfer.setMute(true);
                    mainWaveSurfer.seekTo(mainTime);
                    mainWaveSurfer.play();
                });
            }
            drumWavePlay = "no";
            // bypass filters that cause audio feedback
            drumRel = 0.5;
            drumAtt = 0.5;
            drumVol = 0.5;                    
            drumFla = 0;
            drumTre = 0;
            drumLow = 0;
            drumHig = 0;
            drumDub = 0;
            drumDis = 0;
            $("#drumVol").val(drumVol);                                    
            $("#drumFla").val(drumFla);                        
            $("#drumTre").val(drumTre);                        
            $("#drumLow").val(drumLow);                        
            $("#drumHig").val(drumHig);                        
            $("#drumAtt").val(drumAtt);            
            $("#drumRel").val(drumRel);                                
            $("#drumDub").val(drumDub);                                
            $("#drumDis").val(drumDis);                                
            resetAudioDrum("yes");
            return false;
        });

        // handle the input changes
        $("#drumVol").on( "change", function() {		
            drumVol = $("#drumVol").val();            
            drumVol = Math.round( drumVol * 10 ) / 10;
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#drumPan").on( "change", function() {		
            drumPan = $("#drumPan").val();            
            drumPan = Math.round( drumPan * 10 ) / 10;            
            resetAudioDrum("no");
            return false;
        });        
                        
        // handle the input changes
        $("#drumFla").on( "change", function() {		
            drumFla = $("#drumFla").val();        
            drumFla = Math.round( drumFla * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#drumTre").on( "change", function() {		
            drumTre = $("#drumTre").val();        
            drumTre = Math.round( drumTre * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });
        
        // handle the input changes
        $("#drumLow").on( "change", function() {		
            drumLow = $("#drumLow").val();        
            drumLow = Math.round( drumLow * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#drumHig").on( "change", function() {		
            drumHig = $("#drumHig").val();        
            drumHig = Math.round( drumHig * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#drumAtt").on( "change", function() {		
            drumAtt = $("#drumAtt").val();        
            drumAtt = Math.round( drumAtt * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#drumRel").on( "change", function() {		
            drumRel = $("#drumRel").val();        
            drumRel = Math.round( drumRel * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#drumDub").on( "change", function() {		
            drumDub = $("#drumDub").val();        
            drumDub = Math.round( drumDub * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#drumDis").on( "change", function() {		
            drumDis = $("#drumDis").val();        
            drumDis = Math.round( drumDis * 10 ) / 10;    
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumVol").on( "click", function() {		            
            drumVol = Math.round( ((drumVol-0.1)) * 10 ) / 10;
            if (drumVol < 0) {drumVol=0.0;}
            $("#drumVol").val(drumVol);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumPan").on( "click", function() {		            
            drumPan = Math.round( (drumPan-0.1) * 10 ) / 10;            
            if (drumPan < 0) {drumPan=0.0;}
            $("#drumPan").val(drumPan);
            resetAudioDrum("no");
            return false;
        });        
                        
        // handle the input changes
        $("#downDrumFla").on( "click", function() {		            
            drumFla = Math.round( (drumFla-0.1) * 10 ) / 10;    
            if (drumFla < 0) {drumFla=0.0;}
            $("#drumFla").val(drumFla);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumTre").on( "click", function() {		            
            drumTre = Math.round( (drumTre-0.1) * 10 ) / 10;    
            if (drumTre < 0) {drumTre=0.0;}
            $("#drumTre").val(drumTre);
            resetAudioDrum("no");
            return false;
        });
        
        // handle the input changes
        $("#downDrumLow").on( "click", function() {		            
            drumLow = Math.round( (drumLow-0.1) * 10 ) / 10;    
            if (drumLow < 0) {drumLow=0.0;}
            $("#drumLow").val(drumLow);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumHig").on( "click", function() {		            
            drumHig = Math.round( (drumHig-0.1) * 10 ) / 10;    
            if (drumHig < 0) {drumHig=0.0;}
            $("#drumHig").val(drumHig);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumAtt").on( "click", function() {		            
            drumAtt = Math.round( (drumAtt-0.1) * 10 ) / 10;    
            if (drumAtt < 0) {drumAtt=0.0;}
            $("#drumAtt").val(drumAtt);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumRel").on( "click", function() {		            
            drumRel = Math.round( (drumRel-0.1) * 10 ) / 10;    
            if (drumRel < 0) {drumRel=0.0;}
            $("#drumRel").val(drumRel);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumDub").on( "click", function() {		            
            drumDub = Math.round( (drumDub-0.1) * 10 ) / 10;    
            if (drumDub < 0) {drumDub=0.0;}
            $("#drumDub").val(drumDub);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#downDrumDis").on( "click", function() {		            
            drumDis = Math.round( (drumDis-0.1) * 10 ) / 10;    
            if (drumDis < 0) {drumDis=0.0;}
            $("#drumDis").val(drumDis);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumVol").on( "click", function() {		            
            drumVol = Math.round( ((drumVol+0.1)) * 10 ) / 10;
            if (drumVol > 1) {drumVol=1.0;}
            $("#drumVol").val(drumVol);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumPan").on( "click", function() {		            
            drumPan = Math.round( (drumPan+0.1) * 10 ) / 10;            
            if (drumPan > 1) {drumPan=1.0;}
            $("#drumPan").val(drumPan);
            resetAudioDrum("no");
            return false;
        });        
                        
        // handle the input changes
        $("#upDrumFla").on( "click", function() {		            
            drumFla = Math.round( (drumFla+0.1) * 10 ) / 10;    
            if (drumFla > 1) {drumFla=1.0;}
            $("#drumFla").val(drumFla);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumTre").on( "click", function() {		            
            drumTre = Math.round( (drumTre+0.1) * 10 ) / 10;    
            if (drumTre > 1) {drumTre=1.0;}
            $("#drumTre").val(drumTre);
            resetAudioDrum("no");
            return false;
        });
        
        // handle the input changes
        $("#upDrumLow").on( "click", function() {		            
            drumLow = Math.round( (drumLow+0.1) * 10 ) / 10;    
            if (drumLow > 1) {drumLow=1.0;}
            $("#drumLow").val(drumLow);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumHig").on( "click", function() {		            
            drumHig = Math.round( (drumHig+0.1) * 10 ) / 10;    
            if (drumHig > 1) {drumHig=1.0;}
            $("#drumHig").val(drumHig);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumAtt").on( "click", function() {		            
            drumAtt = Math.round( (drumAtt+0.1) * 10 ) / 10;    
            if (drumAtt > 1) {drumAtt=1.0;}
            $("#drumAtt").val(drumAtt);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumRel").on( "click", function() {		            
            drumRel = Math.round( (drumRel+0.1) * 10 ) / 10;    
            if (drumRel > 1) {drumRel=1.0;}
            $("#drumRel").val(drumRel);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumDub").on( "click", function() {		            
            drumDub = Math.round( (drumDub+0.1) * 10 ) / 10;    
            if (drumDub > 1) {drumDub=1.0;}
            $("#drumDub").val(drumDub);
            resetAudioDrum("no");
            return false;
        });

        // handle the input changes
        $("#upDrumDis").on( "click", function() {		            
            drumDis = Math.round( (drumDis+0.1) * 10 ) / 10;    
            if (drumDis > 1) {drumDis=1.0;}
            $("#drumDis").val(drumDis);
            resetAudioDrum("no");
            return false;
        });
        
        // function to edit audio streams
        function resetAudioDrum(changeTrack) {
            // check if changing track
            if (changeTrack === "yes") { 
                // stop sound, disconnect sound
                drum.stop();
                $("#drumPlay").hide();		            
                $("#drumPlayLoading").show();		            
                $("#drumRestart").hide();		            
                $("#drumRestartLoading").show();		                                                  
                // need timers for small processing delay to prevent audio feedback death
                setTimeout(function(){  
                    resetAudioDrumNext1(changeTrack);
                }, 2000);
            } else {
                resetAudioDrumNext2(changeTrack);
            }
            return false;
        }
        
        // function to edit audio streams
        function resetAudioDrumNext1(changeTrack) {
            // disconnect old track                                
            if (drum) {                
                drum.disconnect();
            }
            setTimeout(function(){                      
                resetAudioDrumNext2(changeTrack);
            }, 1000);
        }
        
        // function to edit audio streams
        function resetAudioDrumNext2(changeTrack) {
            // check if playing - song or individual track        
            if ((drumWaveSurfer.isPlaying()) || (mainWaveSurfer.isPlaying())) { 
                bass.pause();
                drum.pause();
                lead.pause();
                rhythm.pause();
                vocal.pause();
                // reload audio if track change
                if (changeTrack === "yes") {                                        
                    drumWaveSurfer.pause();
                    drumWaveSurfer.seekTo(0);                
                    drum = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [drumTrackSource],
                            volume: drumVol,
                            release: drumRel,
                            attack: drumAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Drum audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#drumPlayLoading").hide();		            
                            $("#drumPlay").show();		                                    
                            $("#drumRestartLoading").hide();		            
                            $("#drumRestart").show();		                                                                                      
                            if (mainWaveSurfer.isPlaying()) {
                                mainWaveSurfer.pause();
                                mainWaveSurfer.seekTo(0);
                                bassWaveSurfer.seekTo(0);
                                drumWaveSurfer.seekTo(0);
                                leadWaveSurfer.seekTo(0);
                                rhythmWaveSurfer.seekTo(0);
                                vocalWaveSurfer.seekTo(0);
                                bass.play(0,0);
                                drum.play(0,0);
                                lead.play(0,0);
                                rhythm.play(0,0);
                                vocal.play(0,0);
                                bassWaveSurfer.play();              
                                drumWaveSurfer.play();              
                                leadWaveSurfer.play();              
                                rhythmWaveSurfer.play();              
                                vocalWaveSurfer.play();              
                                mainWaveSurfer.play();              
                            }
                        }
                    });
                } else {
                    // pause sound
                    drum.pause();
                    resetFX();
                    loadChanges();
                    if (mainWaveSurfer.isPlaying()) {                        ;                        
                        mainWaveSurfer.pause();                        
                        bass.play(0,mainWaveSurfer.getCurrentTime());
                        drum.play(0,mainWaveSurfer.getCurrentTime());
                        lead.play(0,mainWaveSurfer.getCurrentTime());
                        rhythm.play(0,mainWaveSurfer.getCurrentTime());
                        vocal.play(0,mainWaveSurfer.getCurrentTime());
                        mainWaveSurfer.play();
                        if (mainWaveSurfer.getDuration() > 0) {                     
                            drumWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        } else {
                            drumWaveSurfer.seekTo(0);
                        }
                        drumWaveSurfer.play();
                    } else {
                        drum.play(0,drumWaveSurfer.getCurrentTime());
                        drumWaveSurfer.play();
                    }
                }                                                                
            } else {                           
                if (changeTrack === "yes") {                    
                    drum = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [drumTrackSource],
                            volume: drumVol,
                            release: drumRel,
                            attack: drumAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Drum audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#drumPlayLoading").hide();		            
                            $("#drumPlay").show();		                                    
                            $("#drumRestartLoading").hide();		            
                            $("#drumRestart").show();		                                                                
                        }
                    });
                } else {
                    drum.pause();
                    resetFX();
                    loadChanges();                    
                }                
            }    
            function resetFX() {
                // reset volume and effects
                drum.volume = drumVol;            
                drum.release = drumRel;
                drum.attack = drumAtt;            
                drumFXFla.speed = drumFla;                        
                drumFXLow.frequency = Math.round( drumLow * 22000);
                drumFXHig.frequency = Math.round( drumHig * 22000);                    
                drumFXPan.pan = Math.round( ((drumPan * 2) - 1) * 10 ) / 10;                                        
                drumFXTre.speed = Math.round( drumTre * 20 * 10 ) / 10;                                            
                drumFXDub.time = Math.round( drumDub  * 10 ) / 10;
                drumFXDis.gain = Math.round( drumDis * 0.15 * 10 ) / 10;
                return false;
            }    
            function loadChanges() {
                // handle pan if not added - if already added, value should be reset (no remove)
                if (drum.effects.indexOf(drumFXPan) < 0) {drum.addEffect(drumFXPan)}

                // remove all added effects - required to recover from browser fx crashes (throws warning)
                if (drum.effects.indexOf(drumFXFla) >= 0) {drum.removeEffect(drumFXFla);}
                if (drum.effects.indexOf(drumFXLow) >= 0) {drum.removeEffect(drumFXLow);}
                if (drum.effects.indexOf(drumFXHig) >= 0) {drum.removeEffect(drumFXHig);}                                
                if (drum.effects.indexOf(drumFXTre) >= 0) {drum.removeEffect(drumFXTre);}                    
                if (drum.effects.indexOf(drumFXDub) >= 0) {drum.removeEffect(drumFXDub);}                    
                if (drum.effects.indexOf(drumFXDis) >= 0) {drum.removeEffect(drumFXDis);}                    

                // add effects (not bypassed)
                if ((drumFla >= 0.1) && (drum.effects.indexOf(drumFXFla) < 0)) {drum.addEffect(drumFXFla)}
                if ((drumLow >= 0.1) && (drum.effects.indexOf(drumFXLow) < 0)) {drum.addEffect(drumFXLow)}
                if ((drumHig >= 0.1) && (drum.effects.indexOf(drumFXHig) < 0)) {drum.addEffect(drumFXHig)}                                
                if ((drumTre >= 0.1) && (drum.effects.indexOf(drumFXTre) < 0)) {drum.addEffect(drumFXTre)}                    
                if ((drumDub >= 0.1) && (drum.effects.indexOf(drumFXDub) < 0)) {drum.addEffect(drumFXDub)}                    
                if ((drumDis >= 0.1) && (drum.effects.indexOf(drumFXDis) < 0)) {drum.addEffect(drumFXDis)}                    
            }    
            return false;
        }

        // handle the button click
        $("#drumPlay").on( "click", function() {		            
            lead.pause();
            bass.pause();
            rhythm.pause();
            vocal.pause();
            drumWaveSurfer.setMute(true);
            drumWaveSurfer.play();            
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                         
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                         
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                         
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                         
            if (drumWavePlay === "no") {
                drumWavePlay = "yes";
                $("#drumPlay").hide();		            
                $("#drumPlayLoading").show();		            
                setTimeout(function(){  
                    $("#drumPlayLoading").fadeOut("slow");		
                    $("#drumPlay").fadeIn("slow");
                }, 3000);
            } else {
                drum.pause();            
            }            
            drum.play(0,drumWaveSurfer.getCurrentTime());
            return false;
        });

        // handle the button click
        $("#drumPause").on( "click", function() {		            
            bass.pause();          
            lead.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            drumWaveSurfer.pause();       
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                                     
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            return false;
        });

        // handle the button click
        $("#drumRestart").on( "click", function() {		
            lead.pause();
            bass.pause();
            rhythm.pause();
            vocal.pause();
            bassWaveSurfer.setMute(true);
            drumWaveSurfer.setMute(true);
            rhythmWaveSurfer.setMute(true);
            leadWaveSurfer.setMute(true);
            vocalWaveSurfer.setMute(true);
            bassWaveSurfer.seekTo(0);
            bassWaveSurfer.stop();
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                                     
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.play();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            drum.stop();
            drum.play(0,0);
            $("#drumRestart").hide();		            
            $("#drumRestartLoading").show();		            
            setTimeout(function(){  
                $("#drumRestartLoading").fadeOut("slow");		
                $("#drumRestart").fadeIn("slow");
            }, 3000);
            return false;
        });

        // handle the button click
        $("#drumSave").on( "click", function() {		
            $("#drumSaveAccount").toggle();		            
            $("#drumSaveMessage").hide();		            
            $("#drumScatter").hide();		            
            return false;
        });

        $("#drumSaveNext").on( "click", function() {		
            // get data
            var account = $("#accountDrum").val();
            var tokenAmount = $("#tokenAmountDrum").val();
            var tokenAddress = $("#tokenAddressDrum").val();
            // validate account
            if (!account) {
                alert("Account is invalid. Please enter a value.");                                        
                return false;
            }            
            // validate account length
            if (account.length === 27) {
                // do nothing
            } else {
                alert("Account is invalid. Account should be 27 characters.");                                        
                return false;
            }            
            // validate account content
            for (var j = 0; j < account.length; j++) {
                if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(account.charAt(j)) < 0) {                            
                    alert("Account should contain only letters A-Z or the number 9. Account is invalid.");                                        
                    return false;
                }
            }
            // check token amount exists
            if (!tokenAmount) {
                alert("Token amount is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token is a number
            if (isNaN(tokenAmount)) {                
                alert("Token amount is invalid. Please enter a number.");                                        
                return false;
            }
            // validate the token is positive
            if (tokenAmount <= 0) {                
                alert("Token amount is invalid. Please enter a positive number.");                                        
                return false;
            }
            // validate the token is above threshold
            if (tokenAmount < drumBid) {                
                alert("Token amount is less than current threshold. Increase the amount to become the master track.");                                        
                return false;
            }            
            // check token address exists
            if (!tokenAddress) {
                alert("Token address is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token address length             
            if ((tokenAddress.length > 25) && (tokenAddress.length < 36)) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should be between 26 and 35 characters.");                                        
                return false;
            }
            // check token address starts with 1 or 3
            if ((tokenAddress.substring(0,1) === "1") || (tokenAddress.substring(0,1) === "3")) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should start with 1 or 3.");                                        
                return false;
            }     
            // check token address content
            for (var j = 0; j < tokenAddress.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(tokenAddress.charAt(j)) < 0) {                            
                    alert("Token address is invalid. Address should start with 1 or 3 and only contains numbers and letters.");                                        
                    return false;
                }
            }
            // validate the songID
            if (!songID) {
                alert("No songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            if ((songID.length < 2) || (songID.length > 100)) {                
                alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }            
            // validate the songID length
            for (var j = 0; j < songID.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(songID.charAt(j)) < 0) {                            
                    alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                    return false;
                }
            }
            // validate the token
            if (!tokenName) {
                alert("No token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the token length
            if ((tokenName.length < 2) || (tokenName.length > 100)) {                
                alert("Invalid token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }                        
            // set the memo with the current state
            var drumMemo = songID + "" + account + "DV" + parseFloat(drumVol).toFixed(1) + "DP" + parseFloat(drumPan).toFixed(1) + "DF" + parseFloat(drumFla).toFixed(1) + "DT" + parseFloat(drumTre).toFixed(1) + "DL" + parseFloat(drumLow).toFixed(1) + "DH" + parseFloat(drumHig).toFixed(1) + "DA" + parseFloat(drumAtt).toFixed(1) + "DR" + parseFloat(drumRel).toFixed(1) + "DDI" + parseFloat(drumDis).toFixed(1) + "DDU" + parseFloat(drumDub).toFixed(1) + "DCT" + drumTrack;            
            // replace the dots with the letter d
            var memo = drumMemo.replace(/\./g, "d");
            // validate the memo
            if (!memo) {
                alert("No memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the memo
            if ((memo.length < 2) || (memo.length > 255)) {                
                alert("Invalid memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            for (var j = 0; j < memo.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(memo.charAt(j)) < 0) {                            
                    alert("Invalid memo has been specified for this song. Please only include letters and numbers. No special characters.");                                        
                    return false;
                }
            }
            
            // sanitize
            account = filterXSS(account);
            tokenAmount = filterXSS(tokenAmount);
            tokenAddress = filterXSS(tokenAddress);            
            songID = filterXSS(songID);            
            tokenName = filterXSS(tokenName);            
            memo = filterXSS(memo);            

            // convert the amount to BTC api format
            var tokenDisplay = tokenAmount;
            tokenAmount = tokenAmount * 100000000;
            tokenAmount = tokenAmount.toFixed(0)

            $('.loadingNew').fadeIn("slow");
            $('.loadingTextNew').fadeIn("slow");            
            $('#errorMessageDrum').hide();	

            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',
                contentType: 'application/json',
                data: JSON.stringify({                                        
                    'account': account,
                    'tokenamount': tokenAmount,
                    'tokenaddress': tokenAddress,
                    'songID': songID,
                    'token': tokenName,
                    'memo': memo
                }),
                success: function(res){                    
                    if (res.result === "Success") {
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();
                        $(".account").val(filterXSS(account));
                        $(".tokenAddress").val(filterXSS(tokenAddress));                        
                        // set the scatter link            
                        var scatterPayload = songAddress + "/" + tokenDisplay + "/" + memo + "/" + chainIDCurrent;
                        $("#drumScatterLink").prop('href',"scatter://transfer/?payload=" + filterXSS(scatterPayload));            
                        $(".drumBid").text(filterXSS(tokenDisplay + " BTC"));		            
                        $("#drumMemo").text(filterXSS('Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.'));		            
                        $("#drumSaveAccount").fadeOut("slow");
                        $("#drumSaveMessage").fadeIn("slow");		            
                        $("#drumScatter").hide();		            
                    } else {                          
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();	
                        $('#errorMessageDrum').show();	    
                    }
                },
                error: function(){                                   
                    $('.loadingNew').hide();
                    $('.loadingTextNew').hide();	
                    $('#errorMessageDrum').show();	
                }
            });            
            return false;
        }); 
        
        // handle the button click
        $("#drumMore").on( "click", function() {		
            $(".moreDFX").toggle();
            return false;
        });        

        // handle the input changes
        $("#rhythmTrack").on( "change", function() {		                             
            // check if need to update mainTrack
            var mainFlag = "no";
            var mainTime = 0;
            if (mainTrack === rhythmTrack) { 
                mainFlag = "yes";    
            }
            $("#rhythmProgress").show();                    
            rhythmTrack = $("#rhythmTrack").val();                        
            // stop sound, if playing            
            if (rhythmWaveSurfer.isPlaying()) {
                // stop sound, wavesurfer
                rhythm.pause();           
                rhythmWaveSurfer.pause();         
            }            
            // clear the waveform
            $("#rhythmWaveForm").empty();                                    
            // reload the new waveform
            rhythmWaveSurfer = WaveSurfer.create({            
                container: '#rhythmWaveForm',
                waveColor: '#F9464A',
                cursorColor: '#fff',      
                responsive: true,
                barWidth: 3
            });            
            switch (rhythmTrack){
                case "rhythm1":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm1.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Clean Winter Guitar Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm2":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm2.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Straight Amber Guitar Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm3":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm3.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Staccato Bop Guitar Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm4":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm4.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Brassy Horns Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm5":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm5.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Lovely Flow Horns Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm6":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm6.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Cave Wind Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm7":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm7.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Future Electronic Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm8":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm8.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Bubble Synth Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm9":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm9.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Tambourine Woman Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                case "rhythm10":
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm10.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Irish Hills Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
                    break;
                default:
                    rhythmTrackSource = 'https://celody.com/' + soundFolder + '/rhythm1.mp3';
                    rhythmWaveSurfer.load(rhythmTrackSource);
                    rhythmCurrentTrack = "Clean Winter Guitar Rhythm";
                    $("#rhythmCurrent").text(filterXSS(rhythmCurrentTrack));               
                    $("#rhythmProgress").hide();                    
            }                                 
            if (mainFlag === "yes") {
                mainTrack = rhythmTrack;
                mainTrackSource = rhythmTrackSource;
                mainCurrentTrack = rhythmCurrentTrack;
                // stop wave, if playing            
                if (mainWaveSurfer.isPlaying()) {                    
                    mainWaveSurfer.pause();         
                    if (mainWaveSurfer.getDuration() > 0) {                     
                        mainTime = mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration();
                    }                     
                }            
                // clear the waveform
                $("#mainWaveForm").empty();                                    
                // reload the new waveform
                mainWaveSurfer = WaveSurfer.create({            
                    container: '#mainWaveForm',
                    waveColor: '#F9464A',
                    cursorColor: '#fff',      
                    responsive: true,
                    barWidth: 3
                });
                mainWaveSurfer.load(mainTrackSource);
                mainWaveSurfer.on('ready', function () {            
                    mainWaveSurfer.setMute(true);
                    mainWaveSurfer.seekTo(mainTime);
                    mainWaveSurfer.play();
                });
            }
            rhythmWavePlay = "no";
            // bypass filters that cause audio feedback
            rhythmRel = 0.5;
            rhythmAtt = 0.5;
            rhythmVol = 0.5;                    
            rhythmFla = 0;
            rhythmTre = 0;
            rhythmLow = 0;
            rhythmHig = 0;
            rhythmDub = 0;
            rhythmDis = 0;
            $("#rhythmVol").val(rhythmVol);                                    
            $("#rhythmFla").val(rhythmFla);                        
            $("#rhythmTre").val(rhythmTre);                        
            $("#rhythmLow").val(rhythmLow);                        
            $("#rhythmHig").val(rhythmHig);                        
            $("#rhythmAtt").val(rhythmAtt);            
            $("#rhythmRel").val(rhythmRel);                                
            $("#rhythmDub").val(rhythmDub);                                
            $("#rhythmDis").val(rhythmDis);                                
            resetAudioRhythm("yes");
            return false;
        });

        // handle the input changes
        $("#rhythmVol").on( "change", function() {		
            rhythmVol = $("#rhythmVol").val();            
            rhythmVol = Math.round( rhythmVol * 10 ) / 10;
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#rhythmPan").on( "change", function() {		
            rhythmPan = $("#rhythmPan").val();            
            rhythmPan = Math.round( rhythmPan * 10 ) / 10;            
            resetAudioRhythm("no");
            return false;
        });        
                        
        // handle the input changes
        $("#rhythmFla").on( "change", function() {		
            rhythmFla = $("#rhythmFla").val();        
            rhythmFla = Math.round( rhythmFla * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#rhythmTre").on( "change", function() {		
            rhythmTre = $("#rhythmTre").val();        
            rhythmTre = Math.round( rhythmTre * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });
        
        // handle the input changes
        $("#rhythmLow").on( "change", function() {		
            rhythmLow = $("#rhythmLow").val();        
            rhythmLow = Math.round( rhythmLow * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#rhythmHig").on( "change", function() {		
            rhythmHig = $("#rhythmHig").val();        
            rhythmHig = Math.round( rhythmHig * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#rhythmAtt").on( "change", function() {		
            rhythmAtt = $("#rhythmAtt").val();        
            rhythmAtt = Math.round( rhythmAtt * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#rhythmRel").on( "change", function() {		
            rhythmRel = $("#rhythmRel").val();        
            rhythmRel = Math.round( rhythmRel * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#rhythmDub").on( "change", function() {		
            rhythmDub = $("#rhythmDub").val();        
            rhythmDub = Math.round( rhythmDub * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#rhythmDis").on( "change", function() {		
            rhythmDis = $("#rhythmDis").val();        
            rhythmDis = Math.round( rhythmDis * 10 ) / 10;    
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmVol").on( "click", function() {		            
            rhythmVol = Math.round( ((rhythmVol-0.1)) * 10 ) / 10;
            if (rhythmVol < 0) {rhythmVol=0.0;}
            $("#rhythmVol").val(rhythmVol);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmPan").on( "click", function() {		            
            rhythmPan = Math.round( (rhythmPan-0.1) * 10 ) / 10;            
            if (rhythmPan < 0) {rhythmPan=0.0;}
            $("#rhythmPan").val(rhythmPan);
            resetAudioRhythm("no");
            return false;
        });        
                        
        // handle the input changes
        $("#downRhythmFla").on( "click", function() {		            
            rhythmFla = Math.round( (rhythmFla-0.1) * 10 ) / 10;    
            if (rhythmFla < 0) {rhythmFla=0.0;}
            $("#rhythmFla").val(rhythmFla);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmTre").on( "click", function() {		            
            rhythmTre = Math.round( (rhythmTre-0.1) * 10 ) / 10;    
            if (rhythmTre < 0) {rhythmTre=0.0;}
            $("#rhythmTre").val(rhythmTre);
            resetAudioRhythm("no");
            return false;
        });
        
        // handle the input changes
        $("#downRhythmLow").on( "click", function() {		            
            rhythmLow = Math.round( (rhythmLow-0.1) * 10 ) / 10;    
            if (rhythmLow < 0) {rhythmLow=0.0;}
            $("#rhythmLow").val(rhythmLow);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmHig").on( "click", function() {		            
            rhythmHig = Math.round( (rhythmHig-0.1) * 10 ) / 10;    
            if (rhythmHig < 0) {rhythmHig=0.0;}
            $("#rhythmHig").val(rhythmHig);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmAtt").on( "click", function() {		            
            rhythmAtt = Math.round( (rhythmAtt-0.1) * 10 ) / 10;    
            if (rhythmAtt < 0) {rhythmAtt=0.0;}
            $("#rhythmAtt").val(rhythmAtt);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmRel").on( "click", function() {		            
            rhythmRel = Math.round( (rhythmRel-0.1) * 10 ) / 10;    
            if (rhythmRel < 0) {rhythmRel=0.0;}
            $("#rhythmRel").val(rhythmRel);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmDub").on( "click", function() {		            
            rhythmDub = Math.round( (rhythmDub-0.1) * 10 ) / 10;    
            if (rhythmDub < 0) {rhythmDub=0.0;}
            $("#rhythmDub").val(rhythmDub);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#downRhythmDis").on( "click", function() {		            
            rhythmDis = Math.round( (rhythmDis-0.1) * 10 ) / 10;    
            if (rhythmDis < 0) {rhythmDis=0.0;}
            $("#rhythmDis").val(rhythmDis);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmVol").on( "click", function() {		            
            rhythmVol = Math.round( ((rhythmVol+0.1)) * 10 ) / 10;
            if (rhythmVol > 1) {rhythmVol=1.0;}
            $("#rhythmVol").val(rhythmVol);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmPan").on( "click", function() {		            
            rhythmPan = Math.round( (rhythmPan+0.1) * 10 ) / 10;            
            if (rhythmPan > 1) {rhythmPan=1.0;}
            $("#rhythmPan").val(rhythmPan);
            resetAudioRhythm("no");
            return false;
        });        
                        
        // handle the input changes
        $("#upRhythmFla").on( "click", function() {		            
            rhythmFla = Math.round( (rhythmFla+0.1) * 10 ) / 10;    
            if (rhythmFla > 1) {rhythmFla=1.0;}
            $("#rhythmFla").val(rhythmFla);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmTre").on( "click", function() {		            
            rhythmTre = Math.round( (rhythmTre+0.1) * 10 ) / 10;    
            if (rhythmTre > 1) {rhythmTre=1.0;}
            $("#rhythmTre").val(rhythmTre);
            resetAudioRhythm("no");
            return false;
        });
        
        // handle the input changes
        $("#upRhythmLow").on( "click", function() {		            
            rhythmLow = Math.round( (rhythmLow+0.1) * 10 ) / 10;    
            if (rhythmLow > 1) {rhythmLow=1.0;}
            $("#rhythmLow").val(rhythmLow);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmHig").on( "click", function() {		            
            rhythmHig = Math.round( (rhythmHig+0.1) * 10 ) / 10;    
            if (rhythmHig > 1) {rhythmHig=1.0;}
            $("#rhythmHig").val(rhythmHig);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmAtt").on( "click", function() {		            
            rhythmAtt = Math.round( (rhythmAtt+0.1) * 10 ) / 10;    
            if (rhythmAtt > 1) {rhythmAtt=1.0;}
            $("#rhythmAtt").val(rhythmAtt);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmRel").on( "click", function() {		            
            rhythmRel = Math.round( (rhythmRel+0.1) * 10 ) / 10;    
            if (rhythmRel > 1) {rhythmRel=1.0;}
            $("#rhythmRel").val(rhythmRel);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmDub").on( "click", function() {		            
            rhythmDub = Math.round( (rhythmDub+0.1) * 10 ) / 10;    
            if (rhythmDub > 1) {rhythmDub=1.0;}
            $("#rhythmDub").val(rhythmDub);
            resetAudioRhythm("no");
            return false;
        });

        // handle the input changes
        $("#upRhythmDis").on( "click", function() {		            
            rhythmDis = Math.round( (rhythmDis+0.1) * 10 ) / 10;    
            if (rhythmDis > 1) {rhythmDis=1.0;}
            $("#rhythmDis").val(rhythmDis);
            resetAudioRhythm("no");
            return false;
        });
                                             
        // function to edit audio streams
        function resetAudioRhythm(changeTrack) {
            // check if changing track
            if (changeTrack === "yes") { 
                // stop sound, disconnect sound
                rhythm.stop();
                $("#rhythmPlay").hide();		            
                $("#rhythmPlayLoading").show();		            
                $("#rhythmRestart").hide();		            
                $("#rhythmRestartLoading").show();		                                                  
                // need timers for small processing delay to prevent audio feedback death
                setTimeout(function(){  
                    resetAudioRhythmNext1(changeTrack);
                }, 2000);
            } else {
                resetAudioRhythmNext2(changeTrack);
            }
            return false;
        }
        
        // function to edit audio streams
        function resetAudioRhythmNext1(changeTrack) {
            // disconnect old track                                
            if (rhythm) {                
                rhythm.disconnect();
            }
            setTimeout(function(){                      
                resetAudioRhythmNext2(changeTrack);
            }, 1000);
        }
        
        // function to edit audio streams
        function resetAudioRhythmNext2(changeTrack) {
            // check if playing - song or individual track        
            if ((rhythmWaveSurfer.isPlaying()) || (mainWaveSurfer.isPlaying())) { 
                bass.pause();
                drum.pause();
                lead.pause();
                rhythm.pause();
                vocal.pause();
                // reload audio if track change
                if (changeTrack === "yes") {                                        
                    rhythmWaveSurfer.pause();
                    rhythmWaveSurfer.seekTo(0);                
                    rhythm = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [rhythmTrackSource],
                            volume: rhythmVol,
                            release: rhythmRel,
                            attack: rhythmAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Rhythm audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#rhythmPlayLoading").hide();		            
                            $("#rhythmPlay").show();		                                    
                            $("#rhythmRestartLoading").hide();		            
                            $("#rhythmRestart").show();		                                                                                      
                            if (mainWaveSurfer.isPlaying()) {
                                mainWaveSurfer.pause();
                                mainWaveSurfer.seekTo(0);
                                bassWaveSurfer.seekTo(0);
                                drumWaveSurfer.seekTo(0);
                                leadWaveSurfer.seekTo(0);
                                rhythmWaveSurfer.seekTo(0);
                                vocalWaveSurfer.seekTo(0);
                                bass.play(0,0);
                                drum.play(0,0);
                                lead.play(0,0);
                                rhythm.play(0,0);
                                vocal.play(0,0);
                                bassWaveSurfer.play();              
                                drumWaveSurfer.play();              
                                leadWaveSurfer.play();              
                                rhythmWaveSurfer.play();              
                                vocalWaveSurfer.play();              
                                mainWaveSurfer.play();              
                            }
                        }
                    });
                } else {
                    // pause sound
                    rhythm.pause();
                    resetFX();
                    loadChanges();
                    if (mainWaveSurfer.isPlaying()) {                        ;                        
                        mainWaveSurfer.pause();
                        bass.play(0,mainWaveSurfer.getCurrentTime());
                        drum.play(0,mainWaveSurfer.getCurrentTime());
                        lead.play(0,mainWaveSurfer.getCurrentTime());
                        rhythm.play(0,mainWaveSurfer.getCurrentTime());
                        vocal.play(0,mainWaveSurfer.getCurrentTime());
                        mainWaveSurfer.play();
                        if (mainWaveSurfer.getDuration() > 0) {                     
                            rhythmWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        } else {
                            rhythmWaveSurfer.seekTo(0);
                        }
                        bassWaveSurfer.play();
                    } else {
                        rhythm.play(0,rhythmWaveSurfer.getCurrentTime());
                        rhythmWaveSurfer.play();
                    }
                }                                                                
            } else {                           
                if (changeTrack === "yes") {                    
                    rhythm = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [rhythmTrackSource],
                            volume: rhythmVol,
                            release: rhythmRel,
                            attack: rhythmAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Rhythm audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#rhythmPlayLoading").hide();		            
                            $("#rhythmPlay").show();		                                    
                            $("#rhythmRestartLoading").hide();		            
                            $("#rhythmRestart").show();		                                                                
                        }
                    });
                } else {
                    rhythm.pause();
                    resetFX();
                    loadChanges();                    
                }                
            }    
            function resetFX() {
                // reset volume and effects
                rhythm.volume = rhythmVol;            
                rhythm.release = rhythmRel;
                rhythm.attack = rhythmAtt;            
                rhythmFXFla.speed = rhythmFla;                        
                rhythmFXLow.frequency = Math.round( rhythmLow * 22000);
                rhythmFXHig.frequency = Math.round( rhythmHig * 22000);                    
                rhythmFXPan.pan = Math.round( ((rhythmPan * 2) - 1) * 10 ) / 10;                                        
                rhythmFXTre.speed = Math.round( rhythmTre * 20 * 10 ) / 10;                                            
                rhythmFXDub.time = Math.round( rhythmDub  * 10 ) / 10;
                rhythmFXDis.gain = Math.round( rhythmDis * 0.15 * 10 ) / 10;
                return false;
            }    
            function loadChanges() {
                // handle pan if not added - if already added, value should be reset (no remove)
                if (rhythm.effects.indexOf(rhythmFXPan) < 0) {rhythm.addEffect(rhythmFXPan)}

                // remove all added effects - required to recover from browser fx crashes (throws warning)
                if (rhythm.effects.indexOf(rhythmFXFla) >= 0) {rhythm.removeEffect(rhythmFXFla);}
                if (rhythm.effects.indexOf(rhythmFXLow) >= 0) {rhythm.removeEffect(rhythmFXLow);}
                if (rhythm.effects.indexOf(rhythmFXHig) >= 0) {rhythm.removeEffect(rhythmFXHig);}                                
                if (rhythm.effects.indexOf(rhythmFXTre) >= 0) {rhythm.removeEffect(rhythmFXTre);}                    
                if (rhythm.effects.indexOf(rhythmFXDub) >= 0) {rhythm.removeEffect(rhythmFXDub);}                    
                if (rhythm.effects.indexOf(rhythmFXDis) >= 0) {rhythm.removeEffect(rhythmFXDis);}                    

                // add effects (not bypassed)
                if ((rhythmFla >= 0.1) && (rhythm.effects.indexOf(rhythmFXFla) < 0)) {rhythm.addEffect(rhythmFXFla)}
                if ((rhythmLow >= 0.1) && (rhythm.effects.indexOf(rhythmFXLow) < 0)) {rhythm.addEffect(rhythmFXLow)}
                if ((rhythmHig >= 0.1) && (rhythm.effects.indexOf(rhythmFXHig) < 0)) {rhythm.addEffect(rhythmFXHig)}                                
                if ((rhythmTre >= 0.1) && (rhythm.effects.indexOf(rhythmFXTre) < 0)) {rhythm.addEffect(rhythmFXTre)}                    
                if ((rhythmDub >= 0.1) && (rhythm.effects.indexOf(rhythmFXDub) < 0)) {rhythm.addEffect(rhythmFXDub)}                    
                if ((rhythmDis >= 0.1) && (rhythm.effects.indexOf(rhythmFXDis) < 0)) {rhythm.addEffect(rhythmFXDis)}                    
            }    
            return false;
        }

        // handle the button click
        $("#rhythmPlay").on( "click", function() {		            
            lead.pause();
            drum.pause();
            bass.pause();
            vocal.pause();
            rhythmWaveSurfer.setMute(true);
            rhythmWaveSurfer.play();            
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                         
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                         
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                         
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                         
            if (rhythmWavePlay === "no") {
                rhythmWavePlay = "yes";
                $("#rhythmPlay").hide();		            
                $("#rhythmPlayLoading").show();		            
                setTimeout(function(){  
                    $("#rhythmPlayLoading").fadeOut("slow");		
                    $("#rhythmPlay").fadeIn("slow");
                }, 3000);
            } else {
                rhythm.pause();            
            }            
            rhythm.play(0,rhythmWaveSurfer.getCurrentTime());
            return false;
        });

        // handle the button click
        $("#rhythmPause").on( "click", function() {		            
            bass.pause();          
            lead.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            rhythmWaveSurfer.pause();       
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                                     
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            return false;
        });

        // handle the button click
        $("#rhythmRestart").on( "click", function() {		
            lead.pause();
            drum.pause();
            bass.pause();
            vocal.pause();
            bassWaveSurfer.setMute(true);
            drumWaveSurfer.setMute(true);
            rhythmWaveSurfer.setMute(true);
            leadWaveSurfer.setMute(true);
            vocalWaveSurfer.setMute(true);
            rhythmWaveSurfer.seekTo(0);
            rhythmWaveSurfer.play();
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            rhythm.stop();
            rhythm.play(0,0);
            $("#rhythmRestart").hide();		            
            $("#rhythmRestartLoading").show();		            
            setTimeout(function(){  
                $("#rhythmRestartLoading").fadeOut("slow");		
                $("#rhythmRestart").fadeIn("slow");
            }, 3000);
            return false;
        });

        // handle the button click
        $("#rhythmSave").on( "click", function() {		
            $("#rhythmSaveAccount").toggle();		            
            $("#rhythmSaveMessage").hide();		            
            $("#rhythmScatter").hide();		            
            return false;
        });

        $("#rhythmSaveNext").on( "click", function() {		
            // get data
            var account = $("#accountRhythm").val();
            var tokenAmount = $("#tokenAmountRhythm").val();
            var tokenAddress = $("#tokenAddressRhythm").val();
            // validate account
            if (!account) {
                alert("Account is invalid. Please enter a value.");                                        
                return false;
            }            
            // validate account length
            if (account.length === 27) {
                // do nothing
            } else {
                alert("Account is invalid. Account should be 27 characters.");                                        
                return false;
            }            
            // validate account content
            for (var j = 0; j < account.length; j++) {
                if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(account.charAt(j)) < 0) {                            
                    alert("Account should contain only letters A-Z or the number 9. Account is invalid.");                                        
                    return false;
                }
            }
            // check token amount exists
            if (!tokenAmount) {
                alert("Token amount is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token is a number
            if (isNaN(tokenAmount)) {                
                alert("Token amount is invalid. Please enter a number.");                                        
                return false;
            }
            // validate the token is positive
            if (tokenAmount <= 0) {                
                alert("Token amount is invalid. Please enter a positive number.");                                        
                return false;
            }
            // validate the token is above threshold
            if (tokenAmount < rhythmBid) {                
                alert("Token amount is less than current threshold. Increase the amount to become the master track.");                                        
                return false;
            }            
            // check token address exists
            if (!tokenAddress) {
                alert("Token address is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token address length             
            if ((tokenAddress.length > 25) && (tokenAddress.length < 36)) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should be between 26 and 35 characters.");                                        
                return false;
            }
            // check token address starts with 1 or 3
            if ((tokenAddress.substring(0,1) === "1") || (tokenAddress.substring(0,1) === "3")) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should start with 1 or 3.");                                        
                return false;
            }     
            // check token address content
            for (var j = 0; j < tokenAddress.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(tokenAddress.charAt(j)) < 0) {                            
                    alert("Token address is invalid. Address should start with 1 or 3 and only contains numbers and letters.");                                        
                    return false;
                }
            }
            // validate the songID
            if (!songID) {
                alert("No songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            if ((songID.length < 2) || (songID.length > 100)) {                
                alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }            
            // validate the songID length
            for (var j = 0; j < songID.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(songID.charAt(j)) < 0) {                            
                    alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                    return false;
                }
            }
            // validate the token
            if (!tokenName) {
                alert("No token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the token length
            if ((tokenName.length < 2) || (tokenName.length > 100)) {                
                alert("Invalid token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }                        
            // set the memo with the current state
            var rhythmMemo = songID + "" + account + "RV" + parseFloat(rhythmVol).toFixed(1) + "RP" + parseFloat(rhythmPan).toFixed(1) + "RF" + parseFloat(rhythmFla).toFixed(1) + "RT" + parseFloat(rhythmTre).toFixed(1) + "RL" + parseFloat(rhythmLow).toFixed(1) + "RH" + parseFloat(rhythmHig).toFixed(1) + "RA" + parseFloat(rhythmAtt).toFixed(1) + "RR" + parseFloat(rhythmRel).toFixed(1) + "RDI" + parseFloat(rhythmDis).toFixed(1) + "RDU" + parseFloat(rhythmDub).toFixed(1) + "RCT" + rhythmTrack;            
            // replace the dots with the letter d
            var memo = rhythmMemo.replace(/\./g, "d");
            // validate the memo
            if (!memo) {
                alert("No memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the memo
            if ((memo.length < 2) || (memo.length > 255)) {                
                alert("Invalid memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            for (var j = 0; j < memo.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(memo.charAt(j)) < 0) {                            
                    alert("Invalid memo has been specified for this song. Please only include letters and numbers. No special characters.");                                        
                    return false;
                }
            }
            
            // sanitize
            account = filterXSS(account);
            tokenAmount = filterXSS(tokenAmount);
            tokenAddress = filterXSS(tokenAddress);            
            songID = filterXSS(songID);            
            tokenName = filterXSS(tokenName);            
            memo = filterXSS(memo);            

            // convert the amount to BTC api format
            var tokenDisplay = tokenAmount;
            tokenAmount = tokenAmount * 100000000;
            tokenAmount = tokenAmount.toFixed(0)

            $('.loadingNew').fadeIn("slow");
            $('.loadingTextNew').fadeIn("slow");            
            $('#errorMessageRhythm').hide();	

            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',
                contentType: 'application/json',
                data: JSON.stringify({                                        
                    'account': account,
                    'tokenamount': tokenAmount,
                    'tokenaddress': tokenAddress,
                    'songID': songID,
                    'token': tokenName,
                    'memo': memo
                }),
                success: function(res){                    
                    if (res.result === "Success") {
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();
                        $(".account").val(filterXSS(account));
                        $(".tokenAddress").val(filterXSS(tokenAddress));                        
                        // set the scatter link            
                        var scatterPayload = songAddress + "/" + tokenDisplay + "/" + memo + "/" + chainIDCurrent;
                        $("#rhythmScatterLink").prop('href',"scatter://transfer/?payload=" + filterXSS(scatterPayload));            
                        $(".rhythmBid").text(filterXSS(tokenDisplay + " BTC"));		            
                        $("#rhythmMemo").text(filterXSS('Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.'));		            
                        $("#rhythmSaveAccount").fadeOut("slow");
                        $("#rhythmSaveMessage").fadeIn("slow");		            
                        $("#rhythmScatter").hide();		            
                    } else {                          
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();	
                        $('#errorMessageRhythm').show();	    
                    }
                },
                error: function(){                                   
                    $('.loadingNew').hide();
                    $('.loadingTextNew').hide();	
                    $('#errorMessageRhythm').show();	
                }
            });            
            return false;
        }); 
        
        // handle the button click
        $("#rhythmMore").on( "click", function() {		
            $(".moreRFX").toggle();
            return false;
        });        

        // handle the input changes
        $("#leadTrack").on( "change", function() {		                             
            // check if need to update mainTrack
            var mainFlag = "no";
            var mainTime = 0;
            if (mainTrack === leadTrack) { 
                mainFlag = "yes";    
            }
            $("#leadProgress").show();                    
            leadTrack = $("#leadTrack").val();                        
            // stop sound, if playing            
            if (leadWaveSurfer.isPlaying()) {
                // stop sound, wavesurfer
                lead.pause();           
                leadWaveSurfer.pause();         
            }            
            // clear the waveform
            $("#leadWaveForm").empty();                                    
            // reload the new waveform
            leadWaveSurfer = WaveSurfer.create({            
                container: '#leadWaveForm',
                waveColor: '#F9464A',
                cursorColor: '#fff',      
                responsive: true,
                barWidth: 3
            });            
            switch (leadTrack){
                case "lead1":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead1.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Red Machine Synth Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead2":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead2.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Sweeping Waterfall Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead3":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead3.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Sweet Rainbow Guitar Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead4":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead4.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Tinker Toy Bell Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead5":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead5.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Celtic Fiddler Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead6":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead6.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Breakbeat Filter Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead7":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead7.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "English Teletype Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead8":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead8.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Common Street Guitar Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead9":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead9.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Hard Electric Guitar Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead10":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead10.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Busby Saxophone Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead11":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead11.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Swing Street Sax Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead12":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead12.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Broadway Street Sax Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead13":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead13.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Concert Strings Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead14":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead14.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Movement Synth Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                case "lead15":
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead15.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Tomorrow Slam Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
                    break;
                default:
                    leadTrackSource = 'https://celody.com/' + soundFolder + '/lead1.mp3';
                    leadWaveSurfer.load(leadTrackSource);
                    leadCurrentTrack = "Red Machine Synth Lead";
                    $("#leadCurrent").text(filterXSS(leadCurrentTrack));               
                    $("#leadProgress").hide();                    
            }         
            if (mainFlag === "yes") {
                mainTrack = leadTrack;
                mainTrackSource = leadTrackSource;
                mainCurrentTrack = leadCurrentTrack;
                // stop wave, if playing            
                if (mainWaveSurfer.isPlaying()) {                    
                    mainWaveSurfer.pause();         
                    if (mainWaveSurfer.getDuration() > 0) {                     
                        mainTime = mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration();
                    }                     
                }            
                // clear the waveform
                $("#mainWaveForm").empty();                                    
                // reload the new waveform
                mainWaveSurfer = WaveSurfer.create({            
                    container: '#mainWaveForm',
                    waveColor: '#F9464A',
                    cursorColor: '#fff',      
                    responsive: true,
                    barWidth: 3
                });
                mainWaveSurfer.load(mainTrackSource);
                mainWaveSurfer.on('ready', function () {            
                    mainWaveSurfer.setMute(true);
                    mainWaveSurfer.seekTo(mainTime);
                    mainWaveSurfer.play();
                });
            }
            leadWavePlay = "no";
            // bypass filters that cause audio feedback
            leadRel = 0.5;
            leadAtt = 0.5;
            leadVol = 0.5;                    
            leadFla = 0;
            leadTre = 0;
            leadLow = 0;
            leadHig = 0;
            leadDub = 0;
            leadDis = 0;
            $("#leadVol").val(leadVol);                                    
            $("#leadFla").val(leadFla);                        
            $("#leadTre").val(leadTre);                        
            $("#leadLow").val(leadLow);                        
            $("#leadHig").val(leadHig);                        
            $("#leadAtt").val(leadAtt);            
            $("#leadRel").val(leadRel);                                
            $("#leadDub").val(leadDub);                                
            $("#leadDis").val(leadDis);                                
            resetAudioLead("yes");
            return false;
        });

        // handle the input changes
        $("#leadVol").on( "change", function() {		
            leadVol = $("#leadVol").val();            
            leadVol = Math.round( leadVol * 10 ) / 10;
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#leadPan").on( "change", function() {		
            leadPan = $("#leadPan").val();            
            leadPan = Math.round( leadPan * 10 ) / 10;            
            resetAudioLead("no");
            return false;
        });        
                        
        // handle the input changes
        $("#leadFla").on( "change", function() {		
            leadFla = $("#leadFla").val();        
            leadFla = Math.round( leadFla * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#leadTre").on( "change", function() {		
            leadTre = $("#leadTre").val();        
            leadTre = Math.round( leadTre * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });
        
        // handle the input changes
        $("#leadLow").on( "change", function() {		
            leadLow = $("#leadLow").val();        
            leadLow = Math.round( leadLow * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#leadHig").on( "change", function() {		
            leadHig = $("#leadHig").val();        
            leadHig = Math.round( leadHig * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#leadAtt").on( "change", function() {		
            leadAtt = $("#leadAtt").val();        
            leadAtt = Math.round( leadAtt * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#leadRel").on( "change", function() {		
            leadRel = $("#leadRel").val();        
            leadRel = Math.round( leadRel * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#leadDub").on( "change", function() {		
            leadDub = $("#leadDub").val();        
            leadDub = Math.round( leadDub * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#leadDis").on( "change", function() {		
            leadDis = $("#leadDis").val();        
            leadDis = Math.round( leadDis * 10 ) / 10;    
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadVol").on( "click", function() {		            
            leadVol = Math.round( ((leadVol-0.1)) * 10 ) / 10;
            if (leadVol < 0) {leadVol=0.0;}
            $("#leadVol").val(leadVol);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadPan").on( "click", function() {		            
            leadPan = Math.round( (leadPan-0.1) * 10 ) / 10;            
            if (leadPan < 0) {leadPan=0.0;}
            $("#leadPan").val(leadPan);
            resetAudioLead("no");
            return false;
        });        
                        
        // handle the input changes
        $("#downLeadFla").on( "click", function() {		            
            leadFla = Math.round( (leadFla-0.1) * 10 ) / 10;    
            if (leadFla < 0) {leadFla=0.0;}
            $("#leadFla").val(leadFla);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadTre").on( "click", function() {		            
            leadTre = Math.round( (leadTre-0.1) * 10 ) / 10;    
            if (leadTre < 0) {leadTre=0.0;}
            $("#leadTre").val(leadTre);
            resetAudioLead("no");
            return false;
        });
        
        // handle the input changes
        $("#downLeadLow").on( "click", function() {		            
            leadLow = Math.round( (leadLow-0.1) * 10 ) / 10;    
            if (leadLow < 0) {leadLow=0.0;}
            $("#leadLow").val(leadLow);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadHig").on( "click", function() {		            
            leadHig = Math.round( (leadHig-0.1) * 10 ) / 10;    
            if (leadHig < 0) {leadHig=0.0;}
            $("#leadHig").val(leadHig);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadAtt").on( "click", function() {		            
            leadAtt = Math.round( (leadAtt-0.1) * 10 ) / 10;    
            if (leadAtt < 0) {leadAtt=0.0;}
            $("#leadAtt").val(leadAtt);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadRel").on( "click", function() {		            
            leadRel = Math.round( (leadRel-0.1) * 10 ) / 10;    
            if (leadRel < 0) {leadRel=0.0;}
            $("#leadRel").val(leadRel);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadDub").on( "click", function() {		            
            leadDub = Math.round( (leadDub-0.1) * 10 ) / 10;    
            if (leadDub < 0) {leadDub=0.0;}
            $("#leadDub").val(leadDub);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#downLeadDis").on( "click", function() {		            
            leadDis = Math.round( (leadDis-0.1) * 10 ) / 10;    
            if (leadDis < 0) {leadDis=0.0;}
            $("#leadDis").val(leadDis);
            resetAudioLead("no");
            return false;
        });
                   
        // handle the input changes
        $("#upLeadVol").on( "click", function() {		            
            leadVol = Math.round( ((leadVol+0.1)) * 10 ) / 10;
            if (leadVol > 1) {leadVol=1.0;}
            $("#leadVol").val(leadVol);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#upLeadPan").on( "click", function() {		            
            leadPan = Math.round( (leadPan+0.1) * 10 ) / 10;            
            if (leadPan > 1) {leadPan=1.0;}
            $("#leadPan").val(leadPan);
            resetAudioLead("no");
            return false;
        });        
                        
        // handle the input changes
        $("#upLeadFla").on( "click", function() {		            
            leadFla = Math.round( (leadFla+0.1) * 10 ) / 10;    
            if (leadFla > 1) {leadFla=1.0;}
            $("#leadFla").val(leadFla);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#upLeadTre").on( "click", function() {		            
            leadTre = Math.round( (leadTre+0.1) * 10 ) / 10;    
            if (leadTre > 1) {leadTre=1.0;}
            $("#leadTre").val(leadTre);
            resetAudioLead("no");
            return false;
        });
        
        // handle the input changes
        $("#upLeadLow").on( "click", function() {		            
            leadLow = Math.round( (leadLow+0.1) * 10 ) / 10;    
            if (leadLow > 1) {leadLow=1.0;}
            $("#leadLow").val(leadLow);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#upLeadHig").on( "click", function() {		            
            leadHig = Math.round( (leadHig+0.1) * 10 ) / 10;    
            if (leadHig > 1) {leadHig=1.0;}
            $("#leadHig").val(leadHig);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#upLeadAtt").on( "click", function() {		            
            leadAtt = Math.round( (leadAtt+0.1) * 10 ) / 10;    
            if (leadAtt > 1) {leadAtt=1.0;}
            $("#leadAtt").val(leadAtt);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#upLeadRel").on( "click", function() {		            
            leadRel = Math.round( (leadRel+0.1) * 10 ) / 10;    
            if (leadRel > 1) {leadRel=1.0;}
            $("#leadRel").val(leadRel);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#upLeadDub").on( "click", function() {		            
            leadDub = Math.round( (leadDub+0.1) * 10 ) / 10;    
            if (leadDub > 1) {leadDub=1.0;}
            $("#leadDub").val(leadDub);
            resetAudioLead("no");
            return false;
        });

        // handle the input changes
        $("#upLeadDis").on( "click", function() {		            
            leadDis = Math.round( (leadDis+0.1) * 10 ) / 10;    
            if (leadDis > 1) {leadDis=1.0;}
            $("#leadDis").val(leadDis);
            resetAudioLead("no");
            return false;
        });

        // function to edit audio streams
        function resetAudioLead(changeTrack) {
            // check if changing track
            if (changeTrack === "yes") { 
                // stop sound, disconnect sound
                lead.stop();
                $("#leadPlay").hide();		            
                $("#leadPlayLoading").show();		            
                $("#leadRestart").hide();		            
                $("#leadRestartLoading").show();		                                                  
                // need timers for small processing delay to prevent audio feedback death
                setTimeout(function(){  
                    resetAudioLeadNext1(changeTrack);
                }, 2000);
            } else {
                resetAudioLeadNext2(changeTrack);
            }
            return false;
        }
        
        // function to edit audio streams
        function resetAudioLeadNext1(changeTrack) {
            // disconnect old track                                
            if (lead) {                
                lead.disconnect();
            }
            setTimeout(function(){                      
                resetAudioLeadNext2(changeTrack);
            }, 1000);
        }
        
        // function to edit audio streams
        function resetAudioLeadNext2(changeTrack) {
            // check if playing - song or individual track        
            if ((leadWaveSurfer.isPlaying()) || (mainWaveSurfer.isPlaying())) { 
                bass.pause();
                drum.pause();
                lead.pause();
                rhythm.pause();
                vocal.pause();
                // reload audio if track change
                if (changeTrack === "yes") {                                        
                    leadWaveSurfer.pause();
                    leadWaveSurfer.seekTo(0);                
                    lead = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [leadTrackSource],
                            volume: leadVol,
                            release: leadRel,
                            attack: leadAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Lead audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#leadPlayLoading").hide();		            
                            $("#leadPlay").show();		                                    
                            $("#leadRestartLoading").hide();		            
                            $("#leadRestart").show();		                                                                                      
                            if (mainWaveSurfer.isPlaying()) {
                                mainWaveSurfer.pause();
                                mainWaveSurfer.seekTo(0);
                                bassWaveSurfer.seekTo(0);
                                drumWaveSurfer.seekTo(0);
                                leadWaveSurfer.seekTo(0);
                                rhythmWaveSurfer.seekTo(0);
                                vocalWaveSurfer.seekTo(0);
                                bass.play(0,0);
                                drum.play(0,0);
                                lead.play(0,0);
                                rhythm.play(0,0);
                                vocal.play(0,0);
                                bassWaveSurfer.play();              
                                drumWaveSurfer.play();              
                                leadWaveSurfer.play();              
                                rhythmWaveSurfer.play();              
                                vocalWaveSurfer.play();              
                                mainWaveSurfer.play();              
                            }
                        }
                    });
                } else {
                    // pause sound
                    lead.pause();
                    resetFX();
                    loadChanges();
                    if (mainWaveSurfer.isPlaying()) {                        ;                        
                        mainWaveSurfer.pause();
                        bass.play(0,mainWaveSurfer.getCurrentTime());
                        drum.play(0,mainWaveSurfer.getCurrentTime());
                        lead.play(0,mainWaveSurfer.getCurrentTime());
                        rhythm.play(0,mainWaveSurfer.getCurrentTime());
                        vocal.play(0,mainWaveSurfer.getCurrentTime());
                        mainWaveSurfer.play();
                        if (mainWaveSurfer.getDuration() > 0) {                     
                            leadWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        } else {
                            leadWaveSurfer.seekTo(0);
                        }
                        leadWaveSurfer.play();
                    } else {
                        lead.play(0,leadWaveSurfer.getCurrentTime());
                        leadWaveSurfer.play();
                    }
                }                                                                
            } else {                           
                if (changeTrack === "yes") {                    
                    lead = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [leadTrackSource],
                            volume: leadVol,
                            release: leadRel,
                            attack: leadAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Lead audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#leadPlayLoading").hide();		            
                            $("#leadPlay").show();		                                    
                            $("#leadRestartLoading").hide();		            
                            $("#leadRestart").show();		                                                                
                        }
                    });
                } else {
                    lead.pause();
                    resetFX();
                    loadChanges();                    
                }                
            }    
            function resetFX() {
                // reset volume and effects
                lead.volume = leadVol;            
                lead.release = leadRel;
                lead.attack = leadAtt;            
                leadFXFla.speed = leadFla;                        
                leadFXLow.frequency = Math.round( leadLow * 22000);
                leadFXHig.frequency = Math.round( leadHig * 22000);                    
                leadFXPan.pan = Math.round( ((leadPan * 2) - 1) * 10 ) / 10;                                        
                leadFXTre.speed = Math.round( leadTre * 20 * 10 ) / 10;                                            
                leadFXDub.time = Math.round( leadDub  * 10 ) / 10;
                leadFXDis.gain = Math.round( leadDis * 0.15 * 10 ) / 10;
                return false;
            }    
            function loadChanges() {
                // handle pan if not added - if already added, value should be reset (no remove)
                if (lead.effects.indexOf(leadFXPan) < 0) {lead.addEffect(leadFXPan)}

                // remove all added effects - required to recover from browser fx crashes (throws warning)
                if (lead.effects.indexOf(leadFXFla) >= 0) {lead.removeEffect(leadFXFla);}
                if (lead.effects.indexOf(leadFXLow) >= 0) {lead.removeEffect(leadFXLow);}
                if (lead.effects.indexOf(leadFXHig) >= 0) {lead.removeEffect(leadFXHig);}                                
                if (lead.effects.indexOf(leadFXTre) >= 0) {lead.removeEffect(leadFXTre);}                    
                if (lead.effects.indexOf(leadFXDub) >= 0) {lead.removeEffect(leadFXDub);}                    
                if (lead.effects.indexOf(leadFXDis) >= 0) {lead.removeEffect(leadFXDis);}                    

                // add effects (not bypassed)
                if ((leadFla >= 0.1) && (lead.effects.indexOf(leadFXFla) < 0)) {lead.addEffect(leadFXFla)}
                if ((leadLow >= 0.1) && (lead.effects.indexOf(leadFXLow) < 0)) {lead.addEffect(leadFXLow)}
                if ((leadHig >= 0.1) && (lead.effects.indexOf(leadFXHig) < 0)) {lead.addEffect(leadFXHig)}                                
                if ((leadTre >= 0.1) && (lead.effects.indexOf(leadFXTre) < 0)) {lead.addEffect(leadFXTre)}                    
                if ((leadDub >= 0.1) && (lead.effects.indexOf(leadFXDub) < 0)) {lead.addEffect(leadFXDub)}                    
                if ((leadDis >= 0.1) && (lead.effects.indexOf(leadFXDis) < 0)) {lead.addEffect(leadFXDis)}                    
            }    
            return false;
        }

        // handle the button click
        $("#leadPlay").on( "click", function() {		            
            bass.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            leadWaveSurfer.setMute(true);
            leadWaveSurfer.play();            
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                         
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                         
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                         
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                         
            if (leadWavePlay === "no") {
                leadWavePlay = "yes";
                $("#leadPlay").hide();		            
                $("#leadPlayLoading").show();		            
                setTimeout(function(){  
                    $("#leadPlayLoading").fadeOut("slow");		
                    $("#leadPlay").fadeIn("slow");
                }, 3000);
            } else {
                lead.pause();            
            }            
            lead.play(0,leadWaveSurfer.getCurrentTime());
            return false;
        });

        // handle the button click
        $("#leadPause").on( "click", function() {		            
            bass.pause();          
            lead.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            leadWaveSurfer.pause();       
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                                     
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            return false;
        });

        // handle the button click
        $("#leadRestart").on( "click", function() {		
            bass.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            bassWaveSurfer.setMute(true);
            drumWaveSurfer.setMute(true);
            rhythmWaveSurfer.setMute(true);
            leadWaveSurfer.setMute(true);
            vocalWaveSurfer.setMute(true);
            leadWaveSurfer.seekTo(0);
            leadWaveSurfer.play();
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                                     
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                                     
            lead.stop();
            lead.play(0,0);
            $("#leadRestart").hide();		            
            $("#leadRestartLoading").show();		            
            setTimeout(function(){  
                $("#leadRestartLoading").fadeOut("slow");		
                $("#leadRestart").fadeIn("slow");
            }, 3000);
            return false;
        });

        // handle the button click
        $("#leadSave").on( "click", function() {		
            $("#leadSaveAccount").toggle();		            
            $("#leadSaveMessage").hide();		            
            $("#leadScatter").hide();		            
            return false;
        });

        $("#leadSaveNext").on( "click", function() {		
            // get data
            var account = $("#accountLead").val();
            var tokenAmount = $("#tokenAmountLead").val();
            var tokenAddress = $("#tokenAddressLead").val();
            // validate account
            if (!account) {
                alert("Account is invalid. Please enter a value.");                                        
                return false;
            }            
            // validate account length
            if (account.length === 27) {
                // do nothing
            } else {
                alert("Account is invalid. Account should be 27 characters.");                                        
                return false;
            }            
            // validate account content
            for (var j = 0; j < account.length; j++) {
                if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(account.charAt(j)) < 0) {                            
                    alert("Account should contain only letters A-Z or the number 9. Account is invalid.");                                        
                    return false;
                }
            }
            // check token amount exists
            if (!tokenAmount) {
                alert("Token amount is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token is a number
            if (isNaN(tokenAmount)) {                
                alert("Token amount is invalid. Please enter a number.");                                        
                return false;
            }
            // validate the token is positive
            if (tokenAmount <= 0) {                
                alert("Token amount is invalid. Please enter a positive number.");                                        
                return false;
            }
            // validate the token is above threshold
            if (tokenAmount < leadBid) {                
                alert("Token amount is less than current threshold. Increase the amount to become the master track.");                                        
                return false;
            }            
            // check token address exists
            if (!tokenAddress) {
                alert("Token address is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token address length             
            if ((tokenAddress.length > 25) && (tokenAddress.length < 36)) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should be between 26 and 35 characters.");                                        
                return false;
            }
            // check token address starts with 1 or 3
            if ((tokenAddress.substring(0,1) === "1") || (tokenAddress.substring(0,1) === "3")) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should start with 1 or 3.");                                        
                return false;
            }     
            // check token address content
            for (var j = 0; j < tokenAddress.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(tokenAddress.charAt(j)) < 0) {                            
                    alert("Token address is invalid. Address should start with 1 or 3 and only contains numbers and letters.");                                        
                    return false;
                }
            }
            // validate the songID
            if (!songID) {
                alert("No songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            if ((songID.length < 2) || (songID.length > 100)) {                
                alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }            
            // validate the songID length
            for (var j = 0; j < songID.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(songID.charAt(j)) < 0) {                            
                    alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                    return false;
                }
            }
            // validate the token
            if (!tokenName) {
                alert("No token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the token length
            if ((tokenName.length < 2) || (tokenName.length > 100)) {                
                alert("Invalid token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }                        
            // set the memo with the current state
            var leadMemo = songID + "" + account + "LV" + parseFloat(leadVol).toFixed(1) + "LP" + parseFloat(leadPan).toFixed(1) + "LF" + parseFloat(leadFla).toFixed(1) + "LT" + parseFloat(leadTre).toFixed(1) + "LL" + parseFloat(leadLow).toFixed(1) + "LH" + parseFloat(leadHig).toFixed(1) + "LA" + parseFloat(leadAtt).toFixed(1) + "LR" + parseFloat(leadRel).toFixed(1) + "LDI" + parseFloat(leadDis).toFixed(1) + "LDU" + parseFloat(leadDub).toFixed(1) + "LCT" + leadTrack;            
            // replace the dots with the letter d
            var memo = leadMemo.replace(/\./g, "d");
            // validate the memo
            if (!memo) {
                alert("No memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the memo
            if ((memo.length < 2) || (memo.length > 255)) {                
                alert("Invalid memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            for (var j = 0; j < memo.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(memo.charAt(j)) < 0) {                            
                    alert("Invalid memo has been specified for this song. Please only include letters and numbers. No special characters.");                                        
                    return false;
                }
            }
            
            // sanitize
            account = filterXSS(account);
            tokenAmount = filterXSS(tokenAmount);
            tokenAddress = filterXSS(tokenAddress);            
            songID = filterXSS(songID);            
            tokenName = filterXSS(tokenName);            
            memo = filterXSS(memo);            

            // convert the amount to BTC api format
            var tokenDisplay = tokenAmount;
            tokenAmount = tokenAmount * 100000000;
            tokenAmount = tokenAmount.toFixed(0)

            $('.loadingNew').fadeIn("slow");
            $('.loadingTextNew').fadeIn("slow");            
            $('#errorMessageLead').hide();	

            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',
                contentType: 'application/json',
                data: JSON.stringify({                                        
                    'account': account,
                    'tokenamount': tokenAmount,
                    'tokenaddress': tokenAddress,
                    'songID': songID,
                    'token': tokenName,
                    'memo': memo
                }),
                success: function(res){                    
                    if (res.result === "Success") {
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();
                        $(".account").val(filterXSS(account));
                        $(".tokenAddress").val(filterXSS(tokenAddress));                        
                        // set the scatter link            
                        var scatterPayload = songAddress + "/" + tokenDisplay + "/" + memo + "/" + chainIDCurrent;
                        $("#leadScatterLink").prop('href',"scatter://transfer/?payload=" + filterXSS(scatterPayload));            
                        $(".leadBid").text(filterXSS(tokenDisplay + " BTC"));		            
                        $("#leadMemo").text(filterXSS('Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.'));		            
                        $("#leadSaveAccount").fadeOut("slow");
                        $("#leadSaveMessage").fadeIn("slow");		            
                        $("#leadScatter").hide();		            
                    } else {                          
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();	
                        $('#errorMessageLead').show();	    
                    }
                },
                error: function(){                                   
                    $('.loadingNew').hide();
                    $('.loadingTextNew').hide();	
                    $('#errorMessageLead').show();	
                }
            });            
            return false;
        }); 
        
        // handle the button click
        $("#leadMore").on( "click", function() {		
            $(".moreLFX").toggle();
            return false;
        });        

        // handle the input changes
        $("#vocalTrack").on( "change", function() {		                             
            // check if need to update mainTrack
            var mainFlag = "no";
            var mainTime = 0;
            if (mainTrack === vocalTrack) { 
                mainFlag = "yes";    
            }
            $("#vocalProgress").show();                    
            vocalTrack = $("#vocalTrack").val();                        
            // stop sound, if playing            
            if (vocalWaveSurfer.isPlaying()) {
                // stop sound, wavesurfer
                vocal.pause();           
                vocalWaveSurfer.pause();         
            }            
            // clear the waveform
            $("#vocalWaveForm").empty();                                    
            // reload the new waveform
            vocalWaveSurfer = WaveSurfer.create({            
                container: '#vocalWaveForm',
                waveColor: '#F9464A',
                cursorColor: '#fff',      
                responsive: true,
                barWidth: 3
            });       
            switch (vocalTrack){
                case "vocal1":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal1.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Female Ah Chant Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal2":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal2.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Stumpy Breaking Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal3":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal3.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Funk Machine Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal4":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal4.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Da Da Da Da Da Da Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal5":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal5.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Super Syrupy Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal6":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal6.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Modern Humming Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal7":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal7.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Boop Boop Boop Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal8":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal8.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Crescendo Cry Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal9":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal9.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Car Engine Crisp Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal10":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal10.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Ooh Ooh Ooh Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal11":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal11.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Big Bad Boh Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal12":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal12.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Wisp Mouth Break Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal13":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal13.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Da Da Da Da Da Dum Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal14":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal14.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Moving Message Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                case "vocal15":
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal15.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Moving Music Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
                    break;
                default:
                    vocalTrackSource = 'https://celody.com/' + soundFolder + '/vocal1.mp3';
                    vocalWaveSurfer.load(vocalTrackSource);
                    vocalCurrentTrack = "Female Ah Chant Vocal";
                    $("#vocalCurrent").text(filterXSS(vocalCurrentTrack));               
                    $("#vocalProgress").hide();                    
            }                                 
            if (mainFlag === "yes") {
                mainTrack = vocalTrack;
                mainTrackSource = vocalTrackSource;
                mainCurrentTrack = vocalCurrentTrack;
                // stop wave, if playing            
                if (mainWaveSurfer.isPlaying()) {                    
                    mainWaveSurfer.pause();         
                    if (mainWaveSurfer.getDuration() > 0) {                     
                        mainTime = mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration();
                    }                     
                }            
                // clear the waveform
                $("#mainWaveForm").empty();                                    
                // reload the new waveform
                mainWaveSurfer = WaveSurfer.create({            
                    container: '#mainWaveForm',
                    waveColor: '#F9464A',
                    cursorColor: '#fff',      
                    responsive: true,
                    barWidth: 3
                });
                mainWaveSurfer.load(mainTrackSource);
                mainWaveSurfer.on('ready', function () {            
                    mainWaveSurfer.setMute(true);
                    mainWaveSurfer.seekTo(mainTime);
                    mainWaveSurfer.play();
                });
            }
            vocalWavePlay = "no";
            // bypass filters that cause audio feedback
            vocalRel = 0.5;
            vocalAtt = 0.5;
            vocalVol = 0.5;                    
            vocalFla = 0;
            vocalTre = 0;
            vocalLow = 0;
            vocalHig = 0;
            vocalDub = 0;
            vocalDis = 0;
            $("#vocalVol").val(vocalVol);                                    
            $("#vocalFla").val(vocalFla);                        
            $("#vocalTre").val(vocalTre);                        
            $("#vocalLow").val(vocalLow);                        
            $("#vocalHig").val(vocalHig);                        
            $("#vocalAtt").val(vocalAtt);            
            $("#vocalRel").val(vocalRel);                                
            $("#vocalDub").val(vocalDub);                                
            $("#vocalDis").val(vocalDis);                                
            resetAudioVocal("yes");
            return false;
        });

        // handle the input changes
        $("#vocalVol").on( "change", function() {		
            vocalVol = $("#vocalVol").val();            
            vocalVol = Math.round( vocalVol * 10 ) / 10;
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#vocalPan").on( "change", function() {		
            vocalPan = $("#vocalPan").val();            
            vocalPan = Math.round( vocalPan * 10 ) / 10;            
            resetAudioVocal("no");
            return false;
        });        
                        
        // handle the input changes
        $("#vocalFla").on( "change", function() {		
            vocalFla = $("#vocalFla").val();        
            vocalFla = Math.round( vocalFla * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#vocalTre").on( "change", function() {		
            vocalTre = $("#vocalTre").val();        
            vocalTre = Math.round( vocalTre * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });
        
        // handle the input changes
        $("#vocalLow").on( "change", function() {		
            vocalLow = $("#vocalLow").val();        
            vocalLow = Math.round( vocalLow * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#vocalHig").on( "change", function() {		
            vocalHig = $("#vocalHig").val();        
            vocalHig = Math.round( vocalHig * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#vocalAtt").on( "change", function() {		
            vocalAtt = $("#vocalAtt").val();        
            vocalAtt = Math.round( vocalAtt * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#vocalRel").on( "change", function() {		
            vocalRel = $("#vocalRel").val();        
            vocalRel = Math.round( vocalRel * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#vocalDub").on( "change", function() {		
            vocalDub = $("#vocalDub").val();        
            vocalDub = Math.round( vocalDub * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#vocalDis").on( "change", function() {		
            vocalDis = $("#vocalDis").val();        
            vocalDis = Math.round( vocalDis * 10 ) / 10;    
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalVol").on( "click", function() {		            
            vocalVol = Math.round( ((vocalVol-0.1)) * 10 ) / 10;
            if (vocalVol < 0) {vocalVol=0.0;}
            $("#vocalVol").val(vocalVol);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalPan").on( "click", function() {		            
            vocalPan = Math.round( (vocalPan-0.1) * 10 ) / 10;            
            if (vocalPan < 0) {vocalPan=0.0;}
            $("#vocalPan").val(vocalPan);
            resetAudioVocal("no");
            return false;
        });        
                        
        // handle the input changes
        $("#downVocalFla").on( "click", function() {		            
            vocalFla = Math.round( (vocalFla-0.1) * 10 ) / 10;    
            if (vocalFla < 0) {vocalFla=0.0;}
            $("#vocalFla").val(vocalFla);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalTre").on( "click", function() {		            
            vocalTre = Math.round( (vocalTre-0.1) * 10 ) / 10;    
            if (vocalTre < 0) {vocalTre=0.0;}
            $("#vocalTre").val(vocalTre);
            resetAudioVocal("no");
            return false;
        });
        
        // handle the input changes
        $("#downVocalLow").on( "click", function() {		            
            vocalLow = Math.round( (vocalLow-0.1) * 10 ) / 10;    
            if (vocalLow < 0) {vocalLow=0.0;}
            $("#vocalLow").val(vocalLow);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalHig").on( "click", function() {		            
            vocalHig = Math.round( (vocalHig-0.1) * 10 ) / 10;    
            if (vocalHig < 0) {vocalHig=0.0;}
            $("#vocalHig").val(vocalHig);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalAtt").on( "click", function() {		            
            vocalAtt = Math.round( (vocalAtt-0.1) * 10 ) / 10;    
            if (vocalAtt < 0) {vocalAtt=0.0;}
            $("#vocalAtt").val(vocalAtt);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalRel").on( "click", function() {		            
            vocalRel = Math.round( (vocalRel-0.1) * 10 ) / 10;    
            if (vocalRel < 0) {vocalRel=0.0;}
            $("#vocalRel").val(vocalRel);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalDub").on( "click", function() {		            
            vocalDub = Math.round( (vocalDub-0.1) * 10 ) / 10;    
            if (vocalDub < 0) {vocalDub=0.0;}
            $("#vocalDub").val(vocalDub);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#downVocalDis").on( "click", function() {		            
            vocalDis = Math.round( (vocalDis-0.1) * 10 ) / 10;    
            if (vocalDis < 0) {vocalDis=0.0;}
            $("#vocalDis").val(vocalDis);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalVol").on( "click", function() {		            
            vocalVol = Math.round( ((vocalVol+0.1)) * 10 ) / 10;
            if (vocalVol > 1) {vocalVol=1.0;}
            $("#vocalVol").val(vocalVol);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalPan").on( "click", function() {		            
            vocalPan = Math.round( (vocalPan+0.1) * 10 ) / 10;            
            if (vocalPan > 1) {vocalPan=1.0;}
            $("#vocalPan").val(vocalPan);
            resetAudioVocal("no");
            return false;
        });        
                        
        // handle the input changes
        $("#upVocalFla").on( "click", function() {		            
            vocalFla = Math.round( (vocalFla+0.1) * 10 ) / 10;    
            if (vocalFla > 1) {vocalFla=1.0;}
            $("#vocalFla").val(vocalFla);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalTre").on( "click", function() {		            
            vocalTre = Math.round( (vocalTre+0.1) * 10 ) / 10;    
            if (vocalTre > 1) {vocalTre=1.0;}
            $("#vocalTre").val(vocalTre);
            resetAudioVocal("no");
            return false;
        });
        
        // handle the input changes
        $("#upVocalLow").on( "click", function() {		            
            vocalLow = Math.round( (vocalLow+0.1) * 10 ) / 10;    
            if (vocalLow > 1) {vocalLow=1.0;}
            $("#vocalLow").val(vocalLow);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalHig").on( "click", function() {		            
            vocalHig = Math.round( (vocalHig+0.1) * 10 ) / 10;    
            if (vocalHig > 1) {vocalHig=1.0;}
            $("#vocalHig").val(vocalHig);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalAtt").on( "click", function() {		            
            vocalAtt = Math.round( (vocalAtt+0.1) * 10 ) / 10;    
            if (vocalAtt > 1) {vocalAtt=1.0;}
            $("#vocalAtt").val(vocalAtt);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalRel").on( "click", function() {		            
            vocalRel = Math.round( (vocalRel+0.1) * 10 ) / 10;    
            if (vocalRel > 1) {vocalRel=1.0;}
            $("#vocalRel").val(vocalRel);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalDub").on( "click", function() {		            
            vocalDub = Math.round( (vocalDub+0.1) * 10 ) / 10;    
            if (vocalDub > 1) {vocalDub=1.0;}
            $("#vocalDub").val(vocalDub);
            resetAudioVocal("no");
            return false;
        });

        // handle the input changes
        $("#upVocalDis").on( "click", function() {		            
            vocalDis = Math.round( (vocalDis+0.1) * 10 ) / 10;    
            if (vocalDis > 1) {vocalDis=1.0;}
            $("#vocalDis").val(vocalDis);
            resetAudioVocal("no");
            return false;
        });

        // function to edit audio streams
        function resetAudioVocal(changeTrack) {
            // check if changing track
            if (changeTrack === "yes") { 
                // stop sound, disconnect sound
                vocal.stop();
                $("#vocalPlay").hide();		            
                $("#vocalPlayLoading").show();		            
                $("#vocalRestart").hide();		            
                $("#vocalRestartLoading").show();		                                                  
                // need timers for small processing delay to prevent audio feedback death
                setTimeout(function(){  
                    resetAudioVocalNext1(changeTrack);
                }, 2000);
            } else {
                resetAudioVocalNext2(changeTrack);
            }
            return false;
        }
        
        // function to edit audio streams
        function resetAudioVocalNext1(changeTrack) {
            // disconnect old track                                
            if (vocal) {                
                vocal.disconnect();
            }
            setTimeout(function(){                      
                resetAudioVocalNext2(changeTrack);
            }, 1000);
        }
        
        // function to edit audio streams
        function resetAudioVocalNext2(changeTrack) {
            // check if playing - song or individual track        
            if ((vocalWaveSurfer.isPlaying()) || (mainWaveSurfer.isPlaying())) { 
                bass.pause();
                drum.pause();
                lead.pause();
                rhythm.pause();
                vocal.pause();
                // reload audio if track change
                if (changeTrack === "yes") {                                        
                    vocalWaveSurfer.pause();
                    vocalWaveSurfer.seekTo(0);                
                    vocal = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [vocalTrackSource],
                            volume: vocalVol,
                            release: vocalRel,
                            attack: vocalAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Vocal audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#vocalPlayLoading").hide();		            
                            $("#vocalPlay").show();		                                    
                            $("#vocalRestartLoading").hide();		            
                            $("#vocalRestart").show();		                                                                                      
                            if (mainWaveSurfer.isPlaying()) {
                                mainWaveSurfer.pause();
                                mainWaveSurfer.seekTo(0);
                                bassWaveSurfer.seekTo(0);
                                drumWaveSurfer.seekTo(0);
                                leadWaveSurfer.seekTo(0);
                                rhythmWaveSurfer.seekTo(0);
                                vocalWaveSurfer.seekTo(0);
                                bass.play(0,0);
                                drum.play(0,0);
                                lead.play(0,0);
                                rhythm.play(0,0);
                                vocal.play(0,0);
                                bassWaveSurfer.play();              
                                drumWaveSurfer.play();              
                                leadWaveSurfer.play();              
                                rhythmWaveSurfer.play();              
                                vocalWaveSurfer.play();              
                                mainWaveSurfer.play();              
                            }
                        }
                    });
                } else {
                    // pause sound
                    vocal.pause();
                    resetFX();
                    loadChanges();
                    if (mainWaveSurfer.isPlaying()) {                        ;                        
                        mainWaveSurfer.pause();
                        bass.play(0,mainWaveSurfer.getCurrentTime());
                        drum.play(0,mainWaveSurfer.getCurrentTime());
                        lead.play(0,mainWaveSurfer.getCurrentTime());
                        rhythm.play(0,mainWaveSurfer.getCurrentTime());
                        vocal.play(0,mainWaveSurfer.getCurrentTime());
                        mainWaveSurfer.play();
                        if (mainWaveSurfer.getDuration() > 0) {                     
                            vocalWaveSurfer.seekTo(mainWaveSurfer.getCurrentTime()/mainWaveSurfer.getDuration());
                        } else {
                            vocalWaveSurfer.seekTo(0);
                        }
                        vocalWaveSurfer.play();
                    } else {
                        vocal.play(0,vocalWaveSurfer.getCurrentTime());
                        vocalWaveSurfer.play();
                    }
                }                                                                
            } else {                           
                if (changeTrack === "yes") {                    
                    vocal = new Pizzicato.Sound({ 
                        source: 'file',
                        options: { 
                            path: [vocalTrackSource],
                            volume: vocalVol,
                            release: vocalRel,
                            attack: vocalAtt,
                            detached: false
                        }
                    }, function(error) {
                        if (error) {
                            alert('Your internet connection may down. Vocal audio did not load. Try reloading page.');
                        } else {
                            resetFX();
                            loadChanges();                            
                            $("#vocalPlayLoading").hide();		            
                            $("#vocalPlay").show();		                                    
                            $("#vocalRestartLoading").hide();		            
                            $("#vocalRestart").show();		                                                                
                        }
                    });
                } else {
                    vocal.pause();
                    resetFX();
                    loadChanges();                    
                }                
            }    
            function resetFX() {
                // reset volume and effects
                vocal.volume = vocalVol;            
                vocal.release = vocalRel;
                vocal.attack = vocalAtt;            
                vocalFXFla.speed = vocalFla;                        
                vocalFXLow.frequency = Math.round( vocalLow * 22000);
                vocalFXHig.frequency = Math.round( vocalHig * 22000);                    
                vocalFXPan.pan = Math.round( ((vocalPan * 2) - 1) * 10 ) / 10;                                        
                vocalFXTre.speed = Math.round( vocalTre * 20 * 10 ) / 10;                                            
                vocalFXDub.time = Math.round( vocalDub  * 10 ) / 10;
                vocalFXDis.gain = Math.round( vocalDis * 0.15 * 10 ) / 10;
                return false;
            }    
            function loadChanges() {
                // handle pan if not added - if already added, value should be reset (no remove)
                if (vocal.effects.indexOf(vocalFXPan) < 0) {vocal.addEffect(vocalFXPan)}

                // remove all added effects - required to recover from browser fx crashes (throws warning)
                if (vocal.effects.indexOf(vocalFXFla) >= 0) {vocal.removeEffect(vocalFXFla);}
                if (vocal.effects.indexOf(vocalFXLow) >= 0) {vocal.removeEffect(vocalFXLow);}
                if (vocal.effects.indexOf(vocalFXHig) >= 0) {vocal.removeEffect(vocalFXHig);}                                
                if (vocal.effects.indexOf(vocalFXTre) >= 0) {vocal.removeEffect(vocalFXTre);}                    
                if (vocal.effects.indexOf(vocalFXDub) >= 0) {vocal.removeEffect(vocalFXDub);}                    
                if (vocal.effects.indexOf(vocalFXDis) >= 0) {vocal.removeEffect(vocalFXDis);}                    

                // add effects (not bypassed)
                if ((vocalFla >= 0.1) && (vocal.effects.indexOf(vocalFXFla) < 0)) {vocal.addEffect(vocalFXFla)}
                if ((vocalLow >= 0.1) && (vocal.effects.indexOf(vocalFXLow) < 0)) {vocal.addEffect(vocalFXLow)}
                if ((vocalHig >= 0.1) && (vocal.effects.indexOf(vocalFXHig) < 0)) {vocal.addEffect(vocalFXHig)}                                
                if ((vocalTre >= 0.1) && (vocal.effects.indexOf(vocalFXTre) < 0)) {vocal.addEffect(vocalFXTre)}                    
                if ((vocalDub >= 0.1) && (vocal.effects.indexOf(vocalFXDub) < 0)) {vocal.addEffect(vocalFXDub)}                    
                if ((vocalDis >= 0.1) && (vocal.effects.indexOf(vocalFXDis) < 0)) {vocal.addEffect(vocalFXDis)}                    
            }    
            return false;
        }

        // handle the button click
        $("#vocalPlay").on( "click", function() {		            
            lead.pause();
            drum.pause();
            rhythm.pause();
            bass.pause();
            vocalWaveSurfer.setMute(true);
            vocalWaveSurfer.play();            
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                         
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                         
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                         
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                         
            if (vocalWavePlay === "no") {
                vocalWavePlay = "yes";
                $("#vocalPlay").hide();		            
                $("#vocalPlayLoading").show();		            
                setTimeout(function(){  
                    $("#vocalPlayLoading").fadeOut("slow");		
                    $("#vocalPlay").fadeIn("slow");
                }, 3000);
            } else {
                vocal.pause();            
            }            
            vocal.play(0,vocalWaveSurfer.getCurrentTime());
            return false;
        });

        // handle the button click
        $("#vocalPause").on( "click", function() {		            
            bass.pause();          
            lead.pause();
            drum.pause();
            rhythm.pause();
            vocal.pause();
            vocalWaveSurfer.pause();       
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                                     
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                                     
            return false;
        });

        // handle the button click
        $("#vocalRestart").on( "click", function() {		
            lead.pause();
            drum.pause();
            rhythm.pause();
            bass.pause();
            bassWaveSurfer.setMute(true);
            drumWaveSurfer.setMute(true);
            rhythmWaveSurfer.setMute(true);
            leadWaveSurfer.setMute(true);
            vocalWaveSurfer.setMute(true);
            vocalWaveSurfer.seekTo(0);
            vocalWaveSurfer.play();
            mainWaveSurfer.seekTo(0);                         
            mainWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                                     
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                                     
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                                     
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                                     
            vocal.stop();
            vocal.play(0,0);
            $("#vocalRestart").hide();		            
            $("#vocalRestartLoading").show();		            
            setTimeout(function(){  
                $("#vocalRestartLoading").fadeOut("slow");		
                $("#vocalRestart").fadeIn("slow");
            }, 3000);
            return false;
        });

        // handle the button click
        $("#vocalSave").on( "click", function() {		
            $("#vocalSaveAccount").toggle();		            
            $("#vocalSaveMessage").hide();		            
            $("#vocalScatter").hide();		            
            return false;
        });

        $("#vocalSaveNext").on( "click", function() {		
            // get data
            var account = $("#accountVocal").val();
            var tokenAmount = $("#tokenAmountVocal").val();
            var tokenAddress = $("#tokenAddressVocal").val();
            // validate account
            if (!account) {
                alert("Account is invalid. Please enter a value.");                                        
                return false;
            }            
            // validate account length
            if (account.length === 27) {
                // do nothing
            } else {
                alert("Account is invalid. Account should be 27 characters.");                                        
                return false;
            }            
            // validate account content
            for (var j = 0; j < account.length; j++) {
                if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(account.charAt(j)) < 0) {                            
                    alert("Account should contain only letters A-Z or the number 9. Account is invalid.");                                        
                    return false;
                }
            }
            // check token amount exists
            if (!tokenAmount) {
                alert("Token amount is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token is a number
            if (isNaN(tokenAmount)) {                
                alert("Token amount is invalid. Please enter a number.");                                        
                return false;
            }
            // validate the token is positive
            if (tokenAmount <= 0) {                
                alert("Token amount is invalid. Please enter a positive number.");                                        
                return false;
            }
            // validate the token is above threshold
            if (tokenAmount < vocalBid) {                
                alert("Token amount is less than current threshold. Increase the amount to become the master track.");                                        
                return false;
            }            
            // check token address exists
            if (!tokenAddress) {
                alert("Token address is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token address length             
            if ((tokenAddress.length > 25) && (tokenAddress.length < 36)) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should be between 26 and 35 characters.");                                        
                return false;
            }
            // check token address starts with 1 or 3
            if ((tokenAddress.substring(0,1) === "1") || (tokenAddress.substring(0,1) === "3")) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should start with 1 or 3.");                                        
                return false;
            }     
            // check token address content
            for (var j = 0; j < tokenAddress.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(tokenAddress.charAt(j)) < 0) {                            
                    alert("Token address is invalid. Address should start with 1 or 3 and only contains numbers and letters.");                                        
                    return false;
                }
            }
            // validate the songID
            if (!songID) {
                alert("No songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            if ((songID.length < 2) || (songID.length > 100)) {                
                alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }            
            // validate the songID length
            for (var j = 0; j < songID.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(songID.charAt(j)) < 0) {                            
                    alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                    return false;
                }
            }
            // validate the token
            if (!tokenName) {
                alert("No token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the token length
            if ((tokenName.length < 2) || (tokenName.length > 100)) {                
                alert("Invalid token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }                        
            // set the memo with the current state
            var vocalMemo = songID + "" + account + "VV" + parseFloat(vocalVol).toFixed(1) + "VP" + parseFloat(vocalPan).toFixed(1) + "VF" + parseFloat(vocalFla).toFixed(1) + "VT" + parseFloat(vocalTre).toFixed(1) + "VL" + parseFloat(vocalLow).toFixed(1) + "VH" + parseFloat(vocalHig).toFixed(1) + "VA" + parseFloat(vocalAtt).toFixed(1) + "VR" + parseFloat(vocalRel).toFixed(1) + "VDI" + parseFloat(vocalDis).toFixed(1) + "VDU" + parseFloat(vocalDub).toFixed(1) + "VCT" + vocalTrack;            
            // replace the dots with the letter d
            var memo = vocalMemo.replace(/\./g, "d");
            // validate the memo
            if (!memo) {
                alert("No memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the memo
            if ((memo.length < 2) || (memo.length > 255)) {                
                alert("Invalid memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            for (var j = 0; j < memo.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(memo.charAt(j)) < 0) {                            
                    alert("Invalid memo has been specified for this song. Please only include letters and numbers. No special characters.");                                        
                    return false;
                }
            }
            
            // sanitize
            account = filterXSS(account);
            tokenAmount = filterXSS(tokenAmount);
            tokenAddress = filterXSS(tokenAddress);            
            songID = filterXSS(songID);            
            tokenName = filterXSS(tokenName);            
            memo = filterXSS(memo);            

            // convert the amount to BTC api format
            var tokenDisplay = tokenAmount;
            tokenAmount = tokenAmount * 100000000;
            tokenAmount = tokenAmount.toFixed(0)

            $('.loadingNew').fadeIn("slow");
            $('.loadingTextNew').fadeIn("slow");            
            $('#errorMessageVocal').hide();	

            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',
                contentType: 'application/json',
                data: JSON.stringify({                                        
                    'account': account,
                    'tokenamount': tokenAmount,
                    'tokenaddress': tokenAddress,
                    'songID': songID,
                    'token': tokenName,
                    'memo': memo
                }),
                success: function(res){                    
                    if (res.result === "Success") {
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();
                        $(".account").val(filterXSS(account));
                        $(".tokenAddress").val(filterXSS(tokenAddress));                        
                        // set the scatter link            
                        var scatterPayload = songAddress + "/" + tokenDisplay + "/" + memo + "/" + chainIDCurrent;
                        $("#vocalScatterLink").prop('href',"scatter://transfer/?payload=" + filterXSS(scatterPayload));            
                        $(".vocalBid").text(filterXSS(tokenDisplay + " BTC"));		            
                        $("#vocalMemo").text(filterXSS('Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.'));		            
                        $("#vocalSaveAccount").fadeOut("slow");
                        $("#vocalSaveMessage").fadeIn("slow");		            
                        $("#vocalScatter").hide();		            
                    } else {                          
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();	
                        $('#errorMessageVocal').show();	    
                    }
                },
                error: function(){                                   
                    $('.loadingNew').hide();
                    $('.loadingTextNew').hide();	
                    $('#errorMessageVocal').show();	
                }
            });            
            return false;
        }); 
        
        // handle the button click
        $("#vocalMore").on( "click", function() {		
            $(".moreVFX").toggle();
            return false;
        });        

        // handle the button click
        $("#mainPlay").on( "click", function() {		                                    
            bass.pause();            
            lead.pause();                        
            drum.pause();     
            rhythm.pause();            
            vocal.pause();     
            mainWaveSurfer.setMute(true);
            mainWaveSurfer.play();            
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                         
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                         
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                         
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                         
            bass.play(0,mainWaveSurfer.getCurrentTime());            
            lead.play(0,mainWaveSurfer.getCurrentTime());                        
            drum.play(0,mainWaveSurfer.getCurrentTime());            
            rhythm.play(0,mainWaveSurfer.getCurrentTime());            
            vocal.play(0,mainWaveSurfer.getCurrentTime());            
            return false;
        });

        // handle the button click
        $("#mainPause").on( "click", function() {		
            bass.pause();
            lead.pause();
            drum.pause();            
            rhythm.pause();            
            vocal.pause();            
            mainWaveSurfer.pause();       
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                         
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                         
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                         
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                         
            return false;
        });

        // handle the button click
        $("#mainRestart").on( "click", function() {		
            // stop any individual tracks
            bass.stop();
            lead.stop();
            drum.stop();
            rhythm.stop();
            vocal.stop();
            mainWaveSurfer.setMute(true);
            mainWaveSurfer.seekTo(0);
            mainWaveSurfer.play();            
            bassWaveSurfer.seekTo(0);                         
            bassWaveSurfer.stop();                         
            drumWaveSurfer.seekTo(0);                         
            drumWaveSurfer.stop();                         
            rhythmWaveSurfer.seekTo(0);                         
            rhythmWaveSurfer.stop();                         
            leadWaveSurfer.seekTo(0);                         
            leadWaveSurfer.stop();                         
            vocalWaveSurfer.seekTo(0);                         
            vocalWaveSurfer.stop();                         
            bass.play(0,0);
            lead.play(0,0);
            drum.play(0,0);
            rhythm.play(0,0);
            vocal.play(0,0);
            return false;
        });

        // handle the button click
        $(".songPlay").on( "click", function() {		
            // pause any individual tracks
            bass.pause();
            lead.pause();
            drum.pause();            
            rhythm.pause();            
            vocal.pause();            
            mainWaveSurfer.setMute(true);
            bassWaveSurfer.setMute(true);
            drumWaveSurfer.setMute(true);
            rhythmWaveSurfer.setMute(true);
            leadWaveSurfer.setMute(true);
            vocalWaveSurfer.setMute(true);
            mainWaveSurfer.seekTo(0);
            bassWaveSurfer.seekTo(0);
            drumWaveSurfer.seekTo(0);
            rhythmWaveSurfer.seekTo(0);
            leadWaveSurfer.seekTo(0);
            vocalWaveSurfer.seekTo(0);
            mainWaveSurfer.play();            
            bassWaveSurfer.play();            
            drumWaveSurfer.play();            
            rhythmWaveSurfer.play();            
            leadWaveSurfer.play();            
            vocalWaveSurfer.play();            
            bass.play(0,0);            
            lead.play(0,0);            
            drum.play(0,0);            
            rhythm.play(0,0);            
            vocal.play(0,0);            
            return false;
        });        

        // handle the button click
        $("#editSongName").on( "click", function() {		
            $("#saveSongName").toggle();		                        
            $("#songNameSaveMessage").hide();		            
            return false;
        });

        $("#songNameSaveNext").on( "click", function() {		
            // get data
            var account = $("#accountSong").val();
            var tokenAmount = $("#tokenAmountSongName").val();
            var tokenAddress = $("#tokenAddressSongName").val();
            var sName = $("#songNameNew").val();                       
            // validate account
            if (!account) {
                alert("Account is invalid. Please enter a value.");                                        
                return false;
            }            
            // validate account length
            if (account.length === 27) {
                // do nothing
            } else {
                alert("Account is invalid. Account should be 27 characters.");                                        
                return false;
            }            
            // validate account content
            for (var j = 0; j < account.length; j++) {
                if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(account.charAt(j)) < 0) {                            
                    alert("Account should contain only letters A-Z or the number 9. Account is invalid.");                                        
                    return false;
                }
            }
            // check token amount exists
            if (!tokenAmount) {
                alert("Token amount is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token is a number
            if (isNaN(tokenAmount)) {                
                alert("Token amount is invalid. Please enter a number.");                                        
                return false;
            }
            // validate the token is positive
            if (tokenAmount <= 0) {                
                alert("Token amount is invalid. Please enter a positive number.");                                        
                return false;
            }
            // validate the token is above threshold
            if (tokenAmount < songNameBid) {                
                alert("Token amount is less than current threshold. Increase the amount to become the master track.");                                        
                return false;
            }            
            // check token address exists
            if (!tokenAddress) {
                alert("Token address is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token address length             
            if ((tokenAddress.length > 25) && (tokenAddress.length < 36)) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should be between 26 and 35 characters.");                                        
                return false;
            }
            // check token address starts with 1 or 3
            if ((tokenAddress.substring(0,1) === "1") || (tokenAddress.substring(0,1) === "3")) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should start with 1 or 3.");                                        
                return false;
            }            
            // check token address content
            for (var j = 0; j < tokenAddress.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(tokenAddress.charAt(j)) < 0) {                            
                    alert("Token address is invalid. Address should start with 1 or 3 and only contains numbers and letters.");                                        
                    return false;
                }
            }
            // validate the songID
            if (!songID) {
                alert("No songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            if ((songID.length < 2) || (songID.length > 100)) {                
                alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            for (var j = 0; j < songID.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(songID.charAt(j)) < 0) {                            
                    alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                    return false;
                }
            }            
            // validate the token
            if (!tokenName) {
                alert("No token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the token length
            if ((tokenName.length < 2) || (tokenName.length > 100)) {                
                alert("Invalid token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }                                    
            if (!sName) {
                alert("Please enter a song name.");
                return false;
            }
            sName = sName.trim();
            if ((sName.length < 1) || (sName.length > 50)) {
                alert("Please enter a song name shorter than 50 characters.");
                return false;
            }
            for (var j = 0; j < sName.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(sName.charAt(j)) < 0) {                            
                    alert("Invalid name has been specified for this song. Please just use letters, numbers and spaces with no special characters.");                                        
                    return false;
                }
            }
            // set the memo with the current state
            var memo = songID + "" + account + "SN" + sName;                                                
            // validate the memo
            if (!memo) {
                alert("No memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the memo
            if ((memo.length < 2) || (memo.length > 255)) {                
                alert("Invalid memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            for (var j = 0; j < memo.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(memo.charAt(j)) < 0) {                            
                    alert("Invalid memo has been specified for this song. Please only include letters and numbers. No special characters.");                                        
                    return false;
                }
            }
            
            // sanitize
            account = filterXSS(account);
            tokenAmount = filterXSS(tokenAmount);
            tokenAddress = filterXSS(tokenAddress);            
            songID = filterXSS(songID);            
            tokenName = filterXSS(tokenName);            
            memo = filterXSS(memo);            

            // convert the amount to BTC api format
            var tokenDisplay = tokenAmount;
            tokenAmount = tokenAmount * 100000000;
            tokenAmount = tokenAmount.toFixed(0)

            $('.loadingNew').fadeIn("slow");
            $('.loadingTextNew').fadeIn("slow");
            $('#errorMessageSongName').hide();	

            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',
                contentType: 'application/json',
                data: JSON.stringify({                                        
                    'account': account,
                    'tokenamount': tokenAmount,
                    'tokenaddress': tokenAddress,
                    'songID': songID,
                    'token': tokenName,
                    'memo': memo
                }),
                success: function(res){                 
                    if (res.result === "Success") {
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();
                        $(".account").val(filterXSS(account));
                        $(".tokenAddress").val(filterXSS(tokenAddress));                     
                        // set the scatter link            
                        var scatterPayload = songAddress + "/" + tokenDisplay + "/" + memo + "/" + chainIDCurrent;
                        $("#songNameScatterLink").prop('href',"scatter://transfer/?payload=" + filterXSS(scatterPayload));            
                        $(".songNameBid").text(filterXSS(tokenDisplay + " BTC"));		            
                        $("#songNameMemo").text(filterXSS('Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.'));		            
                        $("#saveSongName").fadeOut("slow");
                        $("#songNameSaveMessage").fadeIn("slow");		            
                        $("#songNameScatter").hide();		            
                    } else {                          
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();	
                        $('#errorMessageSongName').show();	    
                    }
                },
                error: function(){                                   
                    $('.loadingNew').hide();
                    $('.loadingTextNew').hide();	
                    $('#errorMessageSongName').show();	
                }
            });            
            return false;
        }); 
         
        // handle the button click
        $("#editBandName").on( "click", function() {		
            $("#saveBandName").toggle();		                        
            $("#bandNameSaveMessage").hide();		            
            return false;
        });

        $("#bandNameSaveNext").on( "click", function() {		
            // get data
            var account = $("#accountBand").val();
            var tokenAmount = $("#tokenAmountBandName").val();
            var tokenAddress = $("#tokenAddressBandName").val();  
            var bName = $("#bandNameNew").val();                       
            // validate account
            if (!account) {
                alert("Account is invalid. Please enter a value.");                                        
                return false;
            }            
            // validate account length
            if (account.length === 27) {
                // do nothing
            } else {
                alert("Account is invalid. Account should be 27 characters.");                                        
                return false;
            }            
            // validate account content
            for (var j = 0; j < account.length; j++) {
                if (("9ABCDEFGHIJKLMNOPQRSTUVWXYZ").indexOf(account.charAt(j)) < 0) {                            
                    alert("Account should contain only letters A-Z or the number 9. Account is invalid.");                                        
                    return false;
                }
            }
            // check token amount exists
            if (!tokenAmount) {
                alert("Token amount is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token is a number
            if (isNaN(tokenAmount)) {                
                alert("Token amount is invalid. Please enter a number.");                                        
                return false;
            }
            // validate the token is positive
            if (tokenAmount <= 0) {                
                alert("Token amount is invalid. Please enter a positive number.");                                        
                return false;
            }
            // validate the token is above threshold
            if (tokenAmount < bandNameBid) {                
                alert("Token amount is less than current threshold. Increase the amount to become the master track.");                                        
                return false;
            }            
            // check token address exists
            if (!tokenAddress) {
                alert("Token address is invalid. Please enter a value.");                                        
                return false;
            }
            // validate the token address length             
            if ((tokenAddress.length > 25) && (tokenAddress.length < 36)) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should be between 26 and 35 characters.");                                        
                return false;
            }
            // check token address starts with 1 or 3
            if ((tokenAddress.substring(0,1) === "1") || (tokenAddress.substring(0,1) === "3")) {
                // do nothing
            } else {
                alert("Token address is invalid. Address should start with 1 or 3.");                                        
                return false;
            }
            // check token address content
            for (var j = 0; j < tokenAddress.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(tokenAddress.charAt(j)) < 0) {                            
                    alert("Token address is invalid. Address should start with 1 or 3 and only contains numbers and letters.");                                        
                    return false;
                }
            }            
            // validate the songID
            if (!songID) {
                alert("No songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the songID length
            if ((songID.length < 2) || (songID.length > 100)) {                
                alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                return false;
            }            
            // validate the songID length
            for (var j = 0; j < songID.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").indexOf(songID.charAt(j)) < 0) {                            
                    alert("Invalid songID has been specified for this song. Please report this issue on github.");                                        
                    return false;
                }
            }
            // validate the token
            if (!tokenName) {
                alert("No token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the token length
            if ((tokenName.length < 2) || (tokenName.length > 100)) {                
                alert("Invalid token has been specified for this song. Please report this issue on github.");                                        
                return false;
            }                                    
            if (!bName) {
                alert("Please enter a band name.");
                return false;
            }
            bName = bName.trim();
            if ((bName.length < 1) || (bName.length > 50)) {
                alert("Please enter a band name shorter than 50 characters.");
                return false;
            }
            for (var j = 0; j < bName.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(bName.charAt(j)) < 0) {                            
                    alert("Invalid band name has been specified. Please only include letters, numbers and spaces. No special characters.");                                        
                    return false;
                }
            }
            // set the memo with the current state
            var memo = songID + "" + account + "BN" + bName;                                                
            // validate the memo
            if (!memo) {
                alert("No memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            // validate the memo
            if ((memo.length < 2) || (memo.length > 255)) {                
                alert("Invalid memo has been specified for this song. Please report this issue on github.");                                        
                return false;
            }
            for (var j = 0; j < memo.length; j++) {
                if (("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .'?!-:").indexOf(memo.charAt(j)) < 0) {                            
                    alert("Invalid memo has been specified for this song. Please only include letters and numbers. No special characters.");                                        
                    return false;
                }
            }
            
            // sanitize
            account = filterXSS(account);
            tokenAmount = filterXSS(tokenAmount);
            tokenAddress = filterXSS(tokenAddress);            
            songID = filterXSS(songID);            
            tokenName = filterXSS(tokenName);            
            memo = filterXSS(memo);            

            // convert the amount to BTC api format
            var tokenDisplay = tokenAmount;
            tokenAmount = tokenAmount * 100000000;
            tokenAmount = tokenAmount.toFixed(0)

            $('.loadingNew').fadeIn("slow");
            $('.loadingTextNew').fadeIn("slow");            
            $('#errorMessageBandName').hide();	

            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',
                contentType: 'application/json',
                data: JSON.stringify({                                        
                    'account': account,
                    'tokenamount': tokenAmount,
                    'tokenaddress': tokenAddress,
                    'songID': songID,
                    'token': tokenName,
                    'memo': memo
                }),
                success: function(res){                    
                    if (res.result === "Success") {                
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();
                        $(".account").val(filterXSS(account));
                        $(".tokenAddress").val(filterXSS(tokenAddress));                        
                        // set the scatter link            
                        var scatterPayload = songAddress + "/" + tokenDisplay + "/" + memo + "/" + chainIDCurrent;
                        $("#bandNameScatterLink").prop('href',"scatter://transfer/?payload=" + filterXSS(scatterPayload));            
                        $(".bandNameBid").text(filterXSS(tokenDisplay + " BTC"));		            
                        $("#bandNameMemo").text(filterXSS('Sending a different BTC amount or sending from a different BTC wallet will invalidate your edit.'));		            
                        $("#saveBandName").fadeOut("slow");
                        $("#bandNameSaveMessage").fadeIn("slow");		            
                        $("#bandNameScatter").hide();		            
                    } else {                          
                        $('.loadingNew').hide();
                        $('.loadingTextNew').hide();	
                        $('#errorMessageBandName').show();	    
                    }
                },
                error: function(){                                   
                    $('.loadingNew').hide();
                    $('.loadingTextNew').hide();	
                    $('#errorMessageBandName').show();	
                }
            });            

            return false;
        }); 

        $("#downloadSong").on( "click", function() {		                        
            var recorder;            
            const ctx = Pizzicato.context
            // disconnect web audio and hook to recorder
            const source = Pizzicato.masterGainNode            
            source.disconnect(ctx.destination)
            const dest = ctx.createMediaStreamDestination()
            source.connect(dest)
            recorder = new Recorder(source);
            // show creating wav file message
            $("#createWav").fadeIn("slow");            
            startTimer(Math.round(songDuration/1000));
            function startTimer(duration) {
                var timer = duration, minutes, seconds;
                var timerInterval =  setInterval(function () {
                    minutes = parseInt(timer / 60, 10)
                    seconds = parseInt(timer % 60, 10);
                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;
                    $("#time").text(filterXSS(minutes + ":" + seconds));
                    if (--timer <= 0) {
                        clearInterval(timerInterval);
                    }
                }, 1000);
            }            
            // start recording
            recorder.record();            
            // stop any individual tracks
            bass.stop();
            lead.stop();
            drum.stop();
            rhythm.stop();
            vocal.stop();            
            mainWaveSurfer.stop();            
            bassWaveSurfer.stop();            
            drumWaveSurfer.stop();            
            rhythmWaveSurfer.stop();            
            leadWaveSurfer.stop();            
            vocalWaveSurfer.stop();            
            // play sounds
            bass.play(0,0);
            lead.play(0,0);
            drum.play(0,0);
            rhythm.play(0,0);
            vocal.play(0,0);
            // record for song duration
            setTimeout(function(){                                  
                bass.stop();
                lead.stop();
                drum.stop();
                rhythm.stop();
                vocal.stop();
                recorder.stop();
                // reconnect
                source.disconnect(dest)
                source.connect(ctx.destination)
                // hide wave processing message
                $("#createWav").fadeOut("slow");
                // create WAV download link using audio data blob
                createDownloadLink();    
                $("#downloadLink").fadeIn("slow");
                function createDownloadLink() {
                    recorder && recorder.exportWAV(function(blob) {
                        var url = URL.createObjectURL(blob);
                        var hf = document.getElementById('downloadLink');
                        hf.href = url;
                        hf.download = new Date().toISOString() + '.wav';                    
                    });
                }   
            }, songDuration);
            return false;
        });                        

        // set restore function
        $("#songRestore").on( "click", function() {	            	
            // stop all tracks
            bass.stop();
            drum.stop();
            rhythm.stop();
            lead.stop();
            vocal.stop();
            // reload the page to return original setting
            window.location.reload(false);              
            return false;            
        });

        // handle the send button click for feedback
        $("#sendButton").on( "click", function() {		
            
            // get values
            var message = $("#feedback").val();
            
            // sanitize
            message = filterXSS(message);
            
            $('#loadingFeedback').hide();          
            $('#successMessageFeedback').hide();	
            $('#errorMessageFeedback').hide();	            
    
            // check message exists
            if (!message) {
                alert("Message is invalid. Please enter some text.");                                        
                return false;
            }
    
            // validate the length             
            if (message.length > 1000) {              
                alert("Message is too long. Please use less than 1000 characters.");                                        
                return false;
            }
            
            $('#loadingFeedback').show();          
    
            // post data
            $.ajax({
                type: "POST",
                beforeSend: function(request) {
                    request.setRequestHeader("x-api-key", "");
                },
                url: '',              
                contentType: 'application/json',
                data: JSON.stringify({                    
                    'message': message
                }),
                success: function(res){
                    $('#loadingFeedback').hide();                  
                    $('#sendButton').hide();	
                    $('#successMessageFeedback').show();	
                },
                error: function(){                    
                    $('#loadingFeedback').hide();                  
                    $('#errorMessageFeedback').show();	
                }
            });
    
            return false;
    
        });  	                                     
              
    });

    </script>
    
</body>

</html>
